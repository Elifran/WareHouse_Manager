{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-orders-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import api from'../services/api';import Button from'../components/Button';import{formatCurrency,formatDate}from'../utils/helpers';import{useAuth}from'../contexts/AuthContext';import{generatePrintContent}from'../components/PrintButton';import'./PendingSales.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PendingSales=()=>{var _selectedSale$payment,_selectedSale$items,_selectedSale$items2,_selectedSale$items3,_stockValidationStatu4,_stockValidationStatu5,_stockValidationStatu6,_editFormData$items2,_editFormData$items3;const{t}=useTranslation();const{user,loading:authLoading}=useAuth();const[pendingSales,setPendingSales]=useState([]);const[loading,setLoading]=useState(true);const[showSaleModal,setShowSaleModal]=useState(false);const[selectedSale,setSelectedSale]=useState(null);const[showEditModal,setShowEditModal]=useState(false);const[editingSale,setEditingSale]=useState(null);const[editFormData,setEditFormData]=useState({});const[completingSale,setCompletingSale]=useState(null);const[stockValidationStatus,setStockValidationStatus]=useState({});const[paymentType,setPaymentType]=useState('full');const[paidAmount,setPaidAmount]=useState(0);useEffect(()=>{if(!authLoading&&user){fetchPendingSales();}},[authLoading,user]);useEffect(()=>{if(pendingSales.length>0){validateStockForAllSales();}},[pendingSales]);const fetchPendingSales=async()=>{try{setLoading(true);console.log('Fetching pending sales from:','/sales/pending/');// Check if user is authenticated\nconst token=localStorage.getItem('accessToken');console.log('Auth token exists:',!!token);console.log('Auth token:',token?token.substring(0,20)+'...':'None');const response=await api.get('/api/sales/pending/');console.log('Pending sales response:',response.data);setPendingSales(response.data);}catch(error){var _error$response,_error$response2,_error$response3,_error$response4;console.error('Error fetching pending sales:',error);console.error('Error details:',{message:error.message,response:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data,status:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status,statusText:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.statusText});// More specific error handling\nif(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401){alert('Authentication required. Please log in again.');// Redirect to login or refresh token\nwindow.location.href='/login';}else{var _error$response5,_error$response5$data;alert('Error fetching pending sales: '+(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message));}}finally{setLoading(false);}};const validateStockForAllSales=async()=>{const validationStatus={};for(const sale of pendingSales){let hasInsufficientStock=false;for(const item of sale.items||[]){try{const response=await api.get(\"/api/products/\".concat(item.product,\"/stock-availability/\"));const stockData=response.data;if(stockData.available_units){const unitData=stockData.available_units.find(unit=>unit.id===item.unit);if(unitData&&unitData.available_quantity<item.quantity_display){hasInsufficientStock=true;break;}}}catch(error){console.error(\"Error checking stock for product \".concat(item.product,\":\"),error);}}validationStatus[sale.id]={hasInsufficientStock};}setStockValidationStatus(validationStatus);};const completeSale=async saleId=>{try{setCompletingSale(saleId);// Check stock before completing\nconst sale=pendingSales.find(s=>s.id===saleId);const stockValidationErrors=[];for(const item of sale.items||[]){try{const response=await api.get(\"/api/products/\".concat(item.product,\"/stock-availability/\"));const stockData=response.data;if(stockData.available_units){const unitData=stockData.available_units.find(unit=>unit.id===item.unit);if(unitData&&unitData.available_quantity<item.quantity_display){stockValidationErrors.push(\"\".concat(item.product_name,\": Required \").concat(item.quantity_display,\" \").concat(item.unit_name,\", but only \").concat(unitData.available_quantity,\" available\"));}}}catch(error){console.error(\"Error checking stock for product \".concat(item.product,\":\"),error);stockValidationErrors.push(\"\".concat(item.product_name,\": Unable to check stock availability\"));}}if(stockValidationErrors.length>0){alert('Cannot complete sale due to insufficient stock:\\n'+stockValidationErrors.join('\\n'));return;}await api.post(\"/api/sales/\".concat(saleId,\"/complete/\"));// Print receipt after successful completion\nconst completedSale=_objectSpread(_objectSpread({},sale),{},{status:'completed'});printPendingSale(completedSale);// Remove from pending sales list\nsetPendingSales(prev=>prev.filter(sale=>sale.id!==saleId));setShowSaleModal(false);setSelectedSale(null);alert('Sale completed successfully!');}catch(error){var _error$response6,_error$response6$data;console.error('Error completing sale:',error);alert('Error completing sale: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}finally{setCompletingSale(null);}};const cancelSale=async saleId=>{if(window.confirm('Are you sure you want to cancel this sale?')){try{await api.delete(\"/api/sales/\".concat(saleId,\"/\"));setPendingSales(prev=>prev.filter(sale=>sale.id!==saleId));setShowSaleModal(false);setSelectedSale(null);alert('Sale cancelled successfully!');}catch(error){var _error$response7,_error$response7$data;console.error('Error cancelling sale:',error);alert('Error cancelling sale: '+(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.detail)||error.message));}}};const printPendingSale=sale=>{try{var _sale$items;// Prepare print data in the same format as regular sales\nconst printData={sale_number:sale.sale_number,customer_name:sale.customer_name||'Walk-in Customer',customer_phone:sale.customer_phone||'',customer_email:sale.customer_email||'',user_name:(user===null||user===void 0?void 0:user.username)||t('app.unknown_user'),user_id:(user===null||user===void 0?void 0:user.id)||'unknown',created_at:sale.created_at,print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9)),status:sale.status==='completed'?'completed':'pending',total_amount:sale.total_amount||sale.subtotal,subtotal:sale.subtotal,discount_amount:sale.discount_amount||0,tax_amount:sale.tax_amount||0,items:((_sale$items=sale.items)===null||_sale$items===void 0?void 0:_sale$items.map(item=>({product_name:item.product_name,product_sku:item.product_sku,quantity:item.quantity,quantity_display:item.quantity_display,unit_name:item.unit_name,unit_price:item.unit_price,total_price:item.total_price})))||[]};// Generate print content using the standardized system\nconst printContent=generatePrintContent(printData,t('titles.sale_receipt'),'sale',t);// Open print window\nconst printWindow=window.open('','_blank','width=800,height=600');if(!printWindow){throw new Error('Failed to open print window. Please check popup blockers.');}printWindow.document.write(printContent);printWindow.document.close();// Wait for content to load then print\nconst printAfterLoad=()=>{printWindow.focus();printWindow.print();// Close the window after a short delay\nsetTimeout(()=>{printWindow.close();},1000);};// Check if window is already loaded\nif(printWindow.document.readyState==='complete'){printAfterLoad();}else{printWindow.onload=printAfterLoad;}}catch(error){console.error('Print error:',error);alert('Failed to print receipt. Please try again. Error: '+error.message);}};const editSale=sale=>{var _sale$items2;setEditingSale(sale);// Initialize items with proper quantities and calculate totals\nconst items=((_sale$items2=sale.items)===null||_sale$items2===void 0?void 0:_sale$items2.map(item=>{const quantity=parseFloat(item.quantity_display||item.quantity)||0;const unitPrice=parseFloat(item.unit_price)||0;const calculatedTotalPrice=quantity*unitPrice;console.log('Item calculation:',{product_name:item.product_name,quantity_display:item.quantity_display,quantity:item.quantity,unit_price:item.unit_price,calculated_total_price:calculatedTotalPrice,stored_total_price:item.total_price});return _objectSpread(_objectSpread({},item),{},{quantity:quantity,unit_price:unitPrice,total_price:calculatedTotalPrice});}))||[];// Calculate initial totals based on current item data\nconst calculatedSubtotal=items.reduce((sum,item)=>sum+item.total_price,0);// If no tax_amount is provided, assume 0% tax (common for many sales)\nconst taxAmount=parseFloat(sale.tax_amount||0)||0;const discountAmount=parseFloat(sale.discount_amount||0)||0;const calculatedTotal=calculatedSubtotal+taxAmount-discountAmount;// Always use calculated totals to ensure accuracy\nconst subtotal=calculatedSubtotal;const total_amount=calculatedTotal;console.log('Edit Sale Debug:',{sale:sale,items:items,calculatedSubtotal:calculatedSubtotal,calculatedTotal:calculatedTotal,saleSubtotal:sale.subtotal,saleTotalAmount:sale.total_amount,finalSubtotal:subtotal,finalTotalAmount:total_amount,tax_amount:sale.tax_amount,discount_amount:sale.discount_amount});const formData={customer_name:sale.customer_name||'',customer_phone:sale.customer_phone||'',customer_email:sale.customer_email||'',payment_method:sale.payment_method||'cash',items:items,subtotal:subtotal,total_amount:total_amount,tax_amount:sale.tax_amount||0,discount_amount:sale.discount_amount||0};console.log('Setting EditFormData:',formData);setEditFormData(formData);// Initialize payment options\nconst currentPaidAmount=parseFloat(sale.paid_amount)||0;const totalAmount=parseFloat(sale.total_amount)||0;if(currentPaidAmount>=totalAmount){setPaymentType('full');setPaidAmount(totalAmount);}else if(currentPaidAmount>0){setPaymentType('partial');setPaidAmount(currentPaidAmount);}else{setPaymentType('full');setPaidAmount(totalAmount);}setShowEditModal(true);setShowSaleModal(false);};const handleEditItemQuantity=(itemIndex,newQuantity)=>{const updatedItems=[...editFormData.items];updatedItems[itemIndex].quantity=parseFloat(newQuantity)||0;updatedItems[itemIndex].total_price=updatedItems[itemIndex].quantity*parseFloat(updatedItems[itemIndex].unit_price)||0;const subtotal=updatedItems.reduce((sum,item)=>sum+item.total_price,0);console.log('Quantity Change Debug:',{itemIndex:itemIndex,newQuantity:newQuantity,unitPrice:updatedItems[itemIndex].unit_price,totalPrice:updatedItems[itemIndex].total_price,subtotal:subtotal});// Fallback to original sale values if editFormData doesn't have them\nconst taxAmount=parseFloat(editFormData.tax_amount!==undefined?editFormData.tax_amount:(editingSale===null||editingSale===void 0?void 0:editingSale.tax_amount)||0)||0;const discountAmount=parseFloat(editFormData.discount_amount!==undefined?editFormData.discount_amount:(editingSale===null||editingSale===void 0?void 0:editingSale.discount_amount)||0)||0;const newTotalAmount=subtotal+taxAmount-discountAmount;console.log('Quantity Change Debug - Totals:',{subtotal:subtotal,taxAmount:taxAmount,discountAmount:discountAmount,newTotalAmount:newTotalAmount,editFormDataTax:editFormData.tax_amount,editFormDataDiscount:editFormData.discount_amount});setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{items:updatedItems,subtotal:subtotal,total_amount:newTotalAmount}));};const removeEditItem=itemIndex=>{const updatedItems=editFormData.items.filter((_,index)=>index!==itemIndex);const subtotal=updatedItems.reduce((sum,item)=>sum+item.total_price,0);// Fallback to original sale values if editFormData doesn't have them\nconst taxAmount=parseFloat(editFormData.tax_amount!==undefined?editFormData.tax_amount:(editingSale===null||editingSale===void 0?void 0:editingSale.tax_amount)||0)||0;const discountAmount=parseFloat(editFormData.discount_amount!==undefined?editFormData.discount_amount:(editingSale===null||editingSale===void 0?void 0:editingSale.discount_amount)||0)||0;const newTotalAmount=subtotal+taxAmount-discountAmount;setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{items:updatedItems,subtotal:subtotal,total_amount:newTotalAmount}));};const calculateEditTotal=()=>{var _editFormData$items;return((_editFormData$items=editFormData.items)===null||_editFormData$items===void 0?void 0:_editFormData$items.reduce((total,item)=>{return total+parseFloat(item.unit_price||0)*parseFloat(item.quantity||0);},0))||0;};// Update paid amount when payment type changes\nuseEffect(()=>{if(paymentType==='full'){setPaidAmount(calculateEditTotal());}},[paymentType,editFormData.items]);const saveEditedSale=async()=>{try{const updateData={customer_name:editFormData.customer_name,customer_phone:editFormData.customer_phone,customer_email:editFormData.customer_email,payment_method:editFormData.payment_method,paid_amount:paidAmount,items:editFormData.items.map(item=>({id:item.id,quantity:item.quantity,unit_price:item.unit_price}))};console.log('Saving edited sale:',{saleId:editingSale.id,updateData:updateData,editFormData:editFormData});const response=await api.patch(\"/api/sales/\".concat(editingSale.id,\"/\"),updateData);console.log('Save response:',response.data);setShowEditModal(false);setEditingSale(null);setEditFormData({});// Refresh the pending sales list\nfetchPendingSales();alert('Sale updated successfully!');}catch(error){var _error$response8,_error$response8$data;console.error('Error updating sale:',error);alert('Error updating sale: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}};if(authLoading||loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"pending-sales-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:t('titles.pending_sales')})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Loading pending sales...\"})]});}if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"pending-sales-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:t('titles.pending_sales')})}),/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Please log in to view pending sales.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"pending-sales-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('titles.pending_sales')}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage and validate pending sales before completion\"})]}),pendingSales.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-pending-sales\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"no-sales-icon\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"h3\",{children:t('titles.no_pending_sales')}),/*#__PURE__*/_jsx(\"p\",{children:\"All sales have been completed or there are no pending sales at the moment.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"pending-sales-grid\",children:pendingSales.map(sale=>{var _sale$items3,_sale$items4,_sale$items5,_stockValidationStatu,_stockValidationStatu2,_stockValidationStatu3;return/*#__PURE__*/_jsxs(\"div\",{className:\"pending-sale-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sale-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sale-number\",children:sale.sale_number}),/*#__PURE__*/_jsx(\"div\",{className:\"sale-date\",children:formatDate(sale.created_at)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sale-customer\",children:/*#__PURE__*/_jsx(\"strong\",{children:sale.customer_name||'Walk-in Customer'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sale-items\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"items-count\",children:[((_sale$items3=sale.items)===null||_sale$items3===void 0?void 0:_sale$items3.length)||0,\" items\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-preview\",children:[(_sale$items4=sale.items)===null||_sale$items4===void 0?void 0:_sale$items4.slice(0,3).map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-preview\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:item.product_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-quantity\",children:[item.quantity_display||item.quantity,\" \",item.unit_name]}),/*#__PURE__*/_jsx(\"span\",{className:\"price-mode-badge \".concat(item.price_mode==='wholesale'?'wholesale':''),children:item.price_mode==='wholesale'?'WS':'STD'})]},index)),((_sale$items5=sale.items)===null||_sale$items5===void 0?void 0:_sale$items5.length)>3&&/*#__PURE__*/_jsxs(\"div\",{className:\"more-items\",children:[\"+\",sale.items.length-3,\" more items\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sale-total\",children:/*#__PURE__*/_jsx(\"strong\",{children:formatCurrency(sale.total_amount)})}),/*#__PURE__*/_jsx(\"div\",{className:\"stock-status\",children:(_stockValidationStatu=stockValidationStatus[sale.id])!==null&&_stockValidationStatu!==void 0&&_stockValidationStatu.hasInsufficientStock?/*#__PURE__*/_jsx(\"div\",{className:\"stock-insufficient\",children:\"\\u26A0\\uFE0F Insufficient Stock\"}):/*#__PURE__*/_jsx(\"div\",{className:\"stock-sufficient\",children:\"\\u2705 Stock Available\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sale-actions\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:async()=>{try{// Fetch complete sale data including items\nconst response=await api.get(\"/api/sales/\".concat(sale.id,\"/\"));setSelectedSale(response.data);setShowSaleModal(true);}catch(error){console.error('Error fetching sale details:',error);// Fallback to using the sale data from the list\nsetSelectedSale(sale);setShowSaleModal(true);}},children:\"View Details\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>printPendingSale(sale),children:\"\\uD83D\\uDDA8\\uFE0F Print\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>editSale(sale),children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"primary\",disabled:(_stockValidationStatu2=stockValidationStatus[sale.id])===null||_stockValidationStatu2===void 0?void 0:_stockValidationStatu2.hasInsufficientStock,onClick:()=>completeSale(sale.id),loading:completingSale===sale.id,children:(_stockValidationStatu3=stockValidationStatus[sale.id])!==null&&_stockValidationStatu3!==void 0&&_stockValidationStatu3.hasInsufficientStock?t('buttons.insufficient_stock'):t('buttons.complete_sale')})]})]},sale.id);})}),showSaleModal&&selectedSale&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal sale-details-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Sale Details - \",selectedSale.sale_number]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>{setShowSaleModal(false);setSelectedSale(null);},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Customer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:selectedSale.customer_name||'Walk-in Customer'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Phone:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:selectedSale.customer_phone||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:selectedSale.customer_email||'N/A'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sale Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:formatDate(selectedSale.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Payment Method:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:(_selectedSale$payment=selectedSale.payment_method)===null||_selectedSale$payment===void 0?void 0:_selectedSale$payment.replace('_',' ').toUpperCase()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge pending\",children:\"Pending\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Items (\",((_selectedSale$items=selectedSale.items)===null||_selectedSale$items===void 0?void 0:_selectedSale$items.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"items-container\",style:{minHeight:\"\".concat(Math.max(200,(((_selectedSale$items2=selectedSale.items)===null||_selectedSale$items2===void 0?void 0:_selectedSale$items2.length)||0)*120),\"px\"),maxHeight:'500px'},children:(_selectedSale$items3=selectedSale.items)===null||_selectedSale$items3===void 0?void 0:_selectedSale$items3.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"item-card\",style:{marginBottom:'12px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-name\",children:item.product_name}),/*#__PURE__*/_jsx(\"span\",{className:\"price-mode-badge \".concat(item.price_mode==='wholesale'?'wholesale':''),children:item.price_mode==='wholesale'?'WS':'STD'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-quantity\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"quantity\",children:item.quantity_display||item.quantity||'N/A'}),/*#__PURE__*/_jsx(\"span\",{className:\"unit\",children:item.unit_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"unit-price\",children:[item.unit_price?formatCurrency(item.unit_price):'N/A',\" each\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"total-price\",children:item.total_price?formatCurrency(item.total_price):'N/A'})]})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"totals-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Totals\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"totals-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Subtotal:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:formatCurrency(selectedSale.subtotal)})]}),selectedSale.discount_amount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Discount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-value\",children:[\"-\",formatCurrency(selectedSale.discount_amount)]})]}),selectedSale.tax_amount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Tax:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:formatCurrency(selectedSale.tax_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-item total-final\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:formatCurrency(selectedSale.total_amount)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stock-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Stock Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stock-status\",children:(_stockValidationStatu4=stockValidationStatus[selectedSale.id])!==null&&_stockValidationStatu4!==void 0&&_stockValidationStatu4.hasInsufficientStock?/*#__PURE__*/_jsx(\"div\",{className:\"stock-insufficient\",children:\"\\u26A0\\uFE0F Insufficient Stock\"}):/*#__PURE__*/_jsx(\"div\",{className:\"stock-sufficient\",children:\"\\u2705 Stock Available\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>{setShowSaleModal(false);setSelectedSale(null);},children:\"Close\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>printPendingSale(selectedSale),children:\"\\uD83D\\uDDA8\\uFE0F Print Receipt\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>editSale(selectedSale),children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(Button,{variant:\"success\",disabled:(_stockValidationStatu5=stockValidationStatus[selectedSale.id])===null||_stockValidationStatu5===void 0?void 0:_stockValidationStatu5.hasInsufficientStock,onClick:()=>completeSale(selectedSale.id),children:(_stockValidationStatu6=stockValidationStatus[selectedSale.id])!==null&&_stockValidationStatu6!==void 0&&_stockValidationStatu6.hasInsufficientStock?t('buttons.insufficient_stock'):t('buttons.complete_sale')})]})]})}),showEditModal&&editingSale&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal edit-sale-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Edit Sale - \",editingSale.sale_number]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>{setShowEditModal(false);setEditingSale(null);setEditFormData({});},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Customer Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.customer_name||'',onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{customer_name:e.target.value})),placeholder:t('forms.customer_name')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.customer_phone||'',onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{customer_phone:e.target.value})),placeholder:t('forms.phone_number')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editFormData.customer_email||'',onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{customer_email:e.target.value})),placeholder:t('forms.email_address')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.payment_method||'cash',onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{payment_method:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"card\",children:\"Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mobile_money\",children:\"Mobile Money\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bank_transfer\",children:\"Bank Transfer\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment Type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-types\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentType\",value:\"full\",checked:paymentType==='full',onChange:e=>setPaymentType(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Full Payment (100%)\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"paymentType\",value:\"partial\",checked:paymentType==='partial',onChange:e=>setPaymentType(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:\"Partial Payment (0-99.99%)\"})]})]}),paymentType==='partial'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount to Pay\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",max:calculateEditTotal(),value:paidAmount||0,onChange:e=>{const value=parseFloat(e.target.value)||0;setPaidAmount(value);},placeholder:t('forms.enter_amount_to_pay')}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Total: \",formatCurrency(calculateEditTotal()),\" | Remaining: \",formatCurrency(calculateEditTotal()-(paidAmount||0))]})]}),paymentType==='full'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount to Pay\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:calculateEditTotal(),readOnly:true,className:\"form-control\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Full payment for the total amount.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Items (\",((_editFormData$items2=editFormData.items)===null||_editFormData$items2===void 0?void 0:_editFormData$items2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"items-edit-container\",children:(_editFormData$items3=editFormData.items)===null||_editFormData$items3===void 0?void 0:_editFormData$items3.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-name\",children:item.product_name}),/*#__PURE__*/_jsx(\"span\",{className:\"price-mode-badge \".concat(item.price_mode==='wholesale'?'wholesale':''),children:item.price_mode==='wholesale'?'WS':'STD'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-unit\",children:item.unit_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[formatCurrency(item.unit_price),\" each\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",value:item.quantity,onChange:e=>handleEditItemQuantity(index,e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"control-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price Mode:\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.price_mode,disabled:true,style:{backgroundColor:'#f5f5f5',color:'#666'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"standard\",children:\"Standard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"wholesale\",children:\"Wholesale\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"item-total\",children:formatCurrency(item.total_price)}),/*#__PURE__*/_jsx(\"div\",{className:\"item-actions\",children:/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>removeEditItem(index),children:\"Remove\"})})]})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"totals-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Totals\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"totals-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"total-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Subtotal:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:formatCurrency(editFormData.subtotal||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-item total-final\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"total-label\",children:\"Total:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"total-value\",children:formatCurrency(editFormData.total_amount||0)})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>{setShowEditModal(false);setEditingSale(null);setEditFormData({});},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:saveEditedSale,children:\"Save Changes\"})]})]})})]});};export default PendingSales;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","api","Button","formatCurrency","formatDate","useAuth","generatePrintContent","jsx","_jsx","jsxs","_jsxs","PendingSales","_selectedSale$payment","_selectedSale$items","_selectedSale$items2","_selectedSale$items3","_stockValidationStatu4","_stockValidationStatu5","_stockValidationStatu6","_editFormData$items2","_editFormData$items3","t","user","loading","authLoading","pendingSales","setPendingSales","setLoading","showSaleModal","setShowSaleModal","selectedSale","setSelectedSale","showEditModal","setShowEditModal","editingSale","setEditingSale","editFormData","setEditFormData","completingSale","setCompletingSale","stockValidationStatus","setStockValidationStatus","paymentType","setPaymentType","paidAmount","setPaidAmount","fetchPendingSales","length","validateStockForAllSales","console","log","token","localStorage","getItem","substring","response","get","data","error","_error$response","_error$response2","_error$response3","_error$response4","message","status","statusText","alert","window","location","href","_error$response5","_error$response5$data","detail","validationStatus","sale","hasInsufficientStock","item","items","concat","product","stockData","available_units","unitData","find","unit","id","available_quantity","quantity_display","completeSale","saleId","s","stockValidationErrors","push","product_name","unit_name","join","post","completedSale","_objectSpread","printPendingSale","prev","filter","_error$response6","_error$response6$data","cancelSale","confirm","delete","_error$response7","_error$response7$data","_sale$items","printData","sale_number","customer_name","customer_phone","customer_email","user_name","username","user_id","created_at","print_timestamp","Date","toISOString","print_id","now","Math","random","toString","substr","total_amount","subtotal","discount_amount","tax_amount","map","product_sku","quantity","unit_price","total_price","printContent","printWindow","open","Error","document","write","close","printAfterLoad","focus","print","setTimeout","readyState","onload","editSale","_sale$items2","parseFloat","unitPrice","calculatedTotalPrice","calculated_total_price","stored_total_price","calculatedSubtotal","reduce","sum","taxAmount","discountAmount","calculatedTotal","saleSubtotal","saleTotalAmount","finalSubtotal","finalTotalAmount","formData","payment_method","currentPaidAmount","paid_amount","totalAmount","handleEditItemQuantity","itemIndex","newQuantity","updatedItems","totalPrice","undefined","newTotalAmount","editFormDataTax","editFormDataDiscount","removeEditItem","_","index","calculateEditTotal","_editFormData$items","total","saveEditedSale","updateData","patch","_error$response8","_error$response8$data","className","children","_sale$items3","_sale$items4","_sale$items5","_stockValidationStatu","_stockValidationStatu2","_stockValidationStatu3","slice","price_mode","size","variant","onClick","disabled","replace","toUpperCase","style","minHeight","max","maxHeight","marginBottom","type","value","onChange","e","target","placeholder","name","checked","step","min","readOnly","backgroundColor","color"],"sources":["/home/el-ifran/WareHouse_Manager/elif-orders-app/beverage_management_system/src/pages/PendingSales.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport api from '../services/api';\nimport Button from '../components/Button';\nimport { formatCurrency, formatDate } from '../utils/helpers';\nimport { useAuth } from '../contexts/AuthContext';\nimport { generatePrintContent } from '../components/PrintButton';\nimport './PendingSales.css';\n\nconst PendingSales = () => {\n  const { t } = useTranslation();\n  const { user, loading: authLoading } = useAuth();\n  const [pendingSales, setPendingSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showSaleModal, setShowSaleModal] = useState(false);\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingSale, setEditingSale] = useState(null);\n  const [editFormData, setEditFormData] = useState({});\n  const [completingSale, setCompletingSale] = useState(null);\n  const [stockValidationStatus, setStockValidationStatus] = useState({});\n  const [paymentType, setPaymentType] = useState('full');\n  const [paidAmount, setPaidAmount] = useState(0);\n\n  useEffect(() => {\n    if (!authLoading && user) {\n      fetchPendingSales();\n    }\n  }, [authLoading, user]);\n\n  useEffect(() => {\n    if (pendingSales.length > 0) {\n      validateStockForAllSales();\n    }\n  }, [pendingSales]);\n\n  const fetchPendingSales = async () => {\n    try {\n      setLoading(true);\n      console.log('Fetching pending sales from:', '/sales/pending/');\n      \n      // Check if user is authenticated\n      const token = localStorage.getItem('accessToken');\n      console.log('Auth token exists:', !!token);\n      console.log('Auth token:', token ? token.substring(0, 20) + '...' : 'None');\n      \n      const response = await api.get('/api/sales/pending/');\n      console.log('Pending sales response:', response.data);\n      setPendingSales(response.data);\n    } catch (error) {\n      console.error('Error fetching pending sales:', error);\n      console.error('Error details:', {\n        message: error.message,\n        response: error.response?.data,\n        status: error.response?.status,\n        statusText: error.response?.statusText\n      });\n      \n      // More specific error handling\n      if (error.response?.status === 401) {\n        alert('Authentication required. Please log in again.');\n        // Redirect to login or refresh token\n        window.location.href = '/login';\n      } else {\n        alert('Error fetching pending sales: ' + (error.response?.data?.detail || error.message));\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const validateStockForAllSales = async () => {\n    const validationStatus = {};\n    \n    for (const sale of pendingSales) {\n      let hasInsufficientStock = false;\n      \n      for (const item of sale.items || []) {\n        try {\n          const response = await api.get(`/api/products/${item.product}/stock-availability/`);\n          const stockData = response.data;\n          \n          if (stockData.available_units) {\n            const unitData = stockData.available_units.find(unit => unit.id === item.unit);\n            if (unitData && unitData.available_quantity < item.quantity_display) {\n              hasInsufficientStock = true;\n              break;\n            }\n          }\n        } catch (error) {\n          console.error(`Error checking stock for product ${item.product}:`, error);\n        }\n      }\n      \n      validationStatus[sale.id] = { hasInsufficientStock };\n    }\n    \n    setStockValidationStatus(validationStatus);\n  };\n\n  const completeSale = async (saleId) => {\n    try {\n      setCompletingSale(saleId);\n      \n      // Check stock before completing\n      const sale = pendingSales.find(s => s.id === saleId);\n      const stockValidationErrors = [];\n      \n      for (const item of sale.items || []) {\n        try {\n          const response = await api.get(`/api/products/${item.product}/stock-availability/`);\n          const stockData = response.data;\n          \n          if (stockData.available_units) {\n            const unitData = stockData.available_units.find(unit => unit.id === item.unit);\n            if (unitData && unitData.available_quantity < item.quantity_display) {\n              stockValidationErrors.push(`${item.product_name}: Required ${item.quantity_display} ${item.unit_name}, but only ${unitData.available_quantity} available`);\n            }\n          }\n        } catch (error) {\n          console.error(`Error checking stock for product ${item.product}:`, error);\n          stockValidationErrors.push(`${item.product_name}: Unable to check stock availability`);\n        }\n      }\n      \n      if (stockValidationErrors.length > 0) {\n        alert('Cannot complete sale due to insufficient stock:\\n' + stockValidationErrors.join('\\n'));\n        return;\n      }\n      \n      await api.post(`/api/sales/${saleId}/complete/`);\n      \n      // Print receipt after successful completion\n      const completedSale = { ...sale, status: 'completed' };\n      printPendingSale(completedSale);\n      \n      // Remove from pending sales list\n      setPendingSales(prev => prev.filter(sale => sale.id !== saleId));\n      setShowSaleModal(false);\n      setSelectedSale(null);\n      \n      alert('Sale completed successfully!');\n    } catch (error) {\n      console.error('Error completing sale:', error);\n      alert('Error completing sale: ' + (error.response?.data?.detail || error.message));\n    } finally {\n      setCompletingSale(null);\n    }\n  };\n\n  const cancelSale = async (saleId) => {\n    if (window.confirm('Are you sure you want to cancel this sale?')) {\n      try {\n        await api.delete(`/api/sales/${saleId}/`);\n        setPendingSales(prev => prev.filter(sale => sale.id !== saleId));\n        setShowSaleModal(false);\n        setSelectedSale(null);\n        alert('Sale cancelled successfully!');\n      } catch (error) {\n        console.error('Error cancelling sale:', error);\n        alert('Error cancelling sale: ' + (error.response?.data?.detail || error.message));\n      }\n    }\n  };\n\n  const printPendingSale = (sale) => {\n    try {\n      // Prepare print data in the same format as regular sales\n      const printData = {\n        sale_number: sale.sale_number,\n        customer_name: sale.customer_name || 'Walk-in Customer',\n        customer_phone: sale.customer_phone || '',\n        customer_email: sale.customer_email || '',\n        user_name: user?.username || t('app.unknown_user'),\n        user_id: user?.id || 'unknown',\n        created_at: sale.created_at,\n        print_timestamp: new Date().toISOString(),\n        print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        status: sale.status === 'completed' ? 'completed' : 'pending',\n        total_amount: sale.total_amount || sale.subtotal,\n        subtotal: sale.subtotal,\n        discount_amount: sale.discount_amount || 0,\n        tax_amount: sale.tax_amount || 0,\n        items: sale.items?.map(item => ({\n          product_name: item.product_name,\n          product_sku: item.product_sku,\n          quantity: item.quantity,\n          quantity_display: item.quantity_display,\n          unit_name: item.unit_name,\n          unit_price: item.unit_price,\n          total_price: item.total_price\n        })) || []\n      };\n\n      // Generate print content using the standardized system\n      const printContent = generatePrintContent(printData, t('titles.sale_receipt'), 'sale', t);\n      \n      // Open print window\n      const printWindow = window.open('', '_blank', 'width=800,height=600');\n      \n      if (!printWindow) {\n        throw new Error('Failed to open print window. Please check popup blockers.');\n      }\n      \n      printWindow.document.write(printContent);\n      printWindow.document.close();\n      \n      // Wait for content to load then print\n      const printAfterLoad = () => {\n        printWindow.focus();\n        printWindow.print();\n        // Close the window after a short delay\n        setTimeout(() => {\n          printWindow.close();\n        }, 1000);\n      };\n      \n      // Check if window is already loaded\n      if (printWindow.document.readyState === 'complete') {\n        printAfterLoad();\n      } else {\n        printWindow.onload = printAfterLoad;\n      }\n      \n    } catch (error) {\n      console.error('Print error:', error);\n      alert('Failed to print receipt. Please try again. Error: ' + error.message);\n    }\n  };\n\n  const editSale = (sale) => {\n    setEditingSale(sale);\n    \n    // Initialize items with proper quantities and calculate totals\n    const items = sale.items?.map(item => {\n      const quantity = parseFloat(item.quantity_display || item.quantity) || 0;\n      const unitPrice = parseFloat(item.unit_price) || 0;\n      const calculatedTotalPrice = quantity * unitPrice;\n      \n      console.log('Item calculation:', {\n        product_name: item.product_name,\n        quantity_display: item.quantity_display,\n        quantity: item.quantity,\n        unit_price: item.unit_price,\n        calculated_total_price: calculatedTotalPrice,\n        stored_total_price: item.total_price\n      });\n      \n      return {\n        ...item,\n        quantity: quantity,\n        unit_price: unitPrice,\n        total_price: calculatedTotalPrice\n      };\n    }) || [];\n    \n    // Calculate initial totals based on current item data\n    const calculatedSubtotal = items.reduce((sum, item) => sum + item.total_price, 0);\n    \n    // If no tax_amount is provided, assume 0% tax (common for many sales)\n    const taxAmount = parseFloat(sale.tax_amount || 0) || 0;\n    const discountAmount = parseFloat(sale.discount_amount || 0) || 0;\n    const calculatedTotal = calculatedSubtotal + taxAmount - discountAmount;\n    \n    // Always use calculated totals to ensure accuracy\n    const subtotal = calculatedSubtotal;\n    const total_amount = calculatedTotal;\n    \n    console.log('Edit Sale Debug:', {\n      sale: sale,\n      items: items,\n      calculatedSubtotal: calculatedSubtotal,\n      calculatedTotal: calculatedTotal,\n      saleSubtotal: sale.subtotal,\n      saleTotalAmount: sale.total_amount,\n      finalSubtotal: subtotal,\n      finalTotalAmount: total_amount,\n      tax_amount: sale.tax_amount,\n      discount_amount: sale.discount_amount\n    });\n    \n    const formData = {\n      customer_name: sale.customer_name || '',\n      customer_phone: sale.customer_phone || '',\n      customer_email: sale.customer_email || '',\n      payment_method: sale.payment_method || 'cash',\n      items: items,\n      subtotal: subtotal,\n      total_amount: total_amount,\n      tax_amount: sale.tax_amount || 0,\n      discount_amount: sale.discount_amount || 0\n    };\n    \n    console.log('Setting EditFormData:', formData);\n    \n    setEditFormData(formData);\n    \n    // Initialize payment options\n    const currentPaidAmount = parseFloat(sale.paid_amount) || 0;\n    const totalAmount = parseFloat(sale.total_amount) || 0;\n    \n    if (currentPaidAmount >= totalAmount) {\n      setPaymentType('full');\n      setPaidAmount(totalAmount);\n    } else if (currentPaidAmount > 0) {\n      setPaymentType('partial');\n      setPaidAmount(currentPaidAmount);\n    } else {\n      setPaymentType('full');\n      setPaidAmount(totalAmount);\n    }\n    \n    setShowEditModal(true);\n    setShowSaleModal(false);\n  };\n\n  const handleEditItemQuantity = (itemIndex, newQuantity) => {\n    const updatedItems = [...editFormData.items];\n    updatedItems[itemIndex].quantity = parseFloat(newQuantity) || 0;\n    updatedItems[itemIndex].total_price = updatedItems[itemIndex].quantity * parseFloat(updatedItems[itemIndex].unit_price) || 0;\n    \n    const subtotal = updatedItems.reduce((sum, item) => sum + item.total_price, 0);\n    \n    console.log('Quantity Change Debug:', {\n      itemIndex: itemIndex,\n      newQuantity: newQuantity,\n      unitPrice: updatedItems[itemIndex].unit_price,\n      totalPrice: updatedItems[itemIndex].total_price,\n      subtotal: subtotal\n    });\n    \n    // Fallback to original sale values if editFormData doesn't have them\n    const taxAmount = parseFloat(editFormData.tax_amount !== undefined ? editFormData.tax_amount : (editingSale?.tax_amount || 0)) || 0;\n    const discountAmount = parseFloat(editFormData.discount_amount !== undefined ? editFormData.discount_amount : (editingSale?.discount_amount || 0)) || 0;\n    const newTotalAmount = subtotal + taxAmount - discountAmount;\n    \n    console.log('Quantity Change Debug - Totals:', {\n      subtotal: subtotal,\n      taxAmount: taxAmount,\n      discountAmount: discountAmount,\n      newTotalAmount: newTotalAmount,\n      editFormDataTax: editFormData.tax_amount,\n      editFormDataDiscount: editFormData.discount_amount\n    });\n    \n    setEditFormData({\n      ...editFormData,\n      items: updatedItems,\n      subtotal: subtotal,\n      total_amount: newTotalAmount\n    });\n  };\n\n  const removeEditItem = (itemIndex) => {\n    const updatedItems = editFormData.items.filter((_, index) => index !== itemIndex);\n    const subtotal = updatedItems.reduce((sum, item) => sum + item.total_price, 0);\n    \n    // Fallback to original sale values if editFormData doesn't have them\n    const taxAmount = parseFloat(editFormData.tax_amount !== undefined ? editFormData.tax_amount : (editingSale?.tax_amount || 0)) || 0;\n    const discountAmount = parseFloat(editFormData.discount_amount !== undefined ? editFormData.discount_amount : (editingSale?.discount_amount || 0)) || 0;\n    const newTotalAmount = subtotal + taxAmount - discountAmount;\n    \n    setEditFormData({\n      ...editFormData,\n      items: updatedItems,\n      subtotal: subtotal,\n      total_amount: newTotalAmount\n    });\n  };\n\n  const calculateEditTotal = () => {\n    return editFormData.items?.reduce((total, item) => {\n      return total + (parseFloat(item.unit_price || 0) * parseFloat(item.quantity || 0));\n    }, 0) || 0;\n  };\n\n  // Update paid amount when payment type changes\n  useEffect(() => {\n    if (paymentType === 'full') {\n      setPaidAmount(calculateEditTotal());\n    }\n  }, [paymentType, editFormData.items]);\n\n\n  const saveEditedSale = async () => {\n    try {\n      const updateData = {\n        customer_name: editFormData.customer_name,\n        customer_phone: editFormData.customer_phone,\n        customer_email: editFormData.customer_email,\n        payment_method: editFormData.payment_method,\n        paid_amount: paidAmount,\n        items: editFormData.items.map(item => ({\n          id: item.id,\n          quantity: item.quantity,\n          unit_price: item.unit_price\n        }))\n      };\n      \n      console.log('Saving edited sale:', {\n        saleId: editingSale.id,\n        updateData: updateData,\n        editFormData: editFormData\n      });\n      \n      const response = await api.patch(`/api/sales/${editingSale.id}/`, updateData);\n      console.log('Save response:', response.data);\n      \n      setShowEditModal(false);\n      setEditingSale(null);\n      setEditFormData({});\n      \n      // Refresh the pending sales list\n      fetchPendingSales();\n      \n      alert('Sale updated successfully!');\n    } catch (error) {\n      console.error('Error updating sale:', error);\n      alert('Error updating sale: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  if (authLoading || loading) {\n    return (\n      <div className=\"pending-sales-page\">\n        <div className=\"page-header\">\n          <h1>{t('titles.pending_sales')}</h1>\n        </div>\n        <div className=\"loading-message\">Loading pending sales...</div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"pending-sales-page\">\n        <div className=\"page-header\">\n          <h1>{t('titles.pending_sales')}</h1>\n        </div>\n        <div className=\"loading-message\">Please log in to view pending sales.</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"pending-sales-page\">\n      <div className=\"page-header\">\n        <h1>{t('titles.pending_sales')}</h1>\n        <p>Manage and validate pending sales before completion</p>\n      </div>\n\n      {pendingSales.length === 0 ? (\n        <div className=\"no-pending-sales\">\n          <div className=\"no-sales-icon\"></div>\n          <h3>{t('titles.no_pending_sales')}</h3>\n          <p>All sales have been completed or there are no pending sales at the moment.</p>\n        </div>\n      ) : (\n        <div className=\"pending-sales-grid\">\n          {pendingSales.map((sale) => (\n            <div key={sale.id} className=\"pending-sale-card\">\n              <div className=\"sale-header\">\n                <div className=\"sale-number\">{sale.sale_number}</div>\n                <div className=\"sale-date\">{formatDate(sale.created_at)}</div>\n              </div>\n              \n              <div className=\"sale-customer\">\n                <strong>{sale.customer_name || 'Walk-in Customer'}</strong>\n              </div>\n              \n              <div className=\"sale-items\">\n                <div className=\"items-count\">{sale.items?.length || 0} items</div>\n                <div className=\"items-preview\">\n                  {sale.items?.slice(0, 3).map((item, index) => (\n                    <div key={index} className=\"item-preview\">\n                      <span className=\"item-name\">{item.product_name}</span>\n                      <span className=\"item-quantity\">{item.quantity_display || item.quantity} {item.unit_name}</span>\n                      <span className={`price-mode-badge ${item.price_mode === 'wholesale' ? 'wholesale' : ''}`}>\n                        {item.price_mode === 'wholesale' ? 'WS' : 'STD'}\n                      </span>\n                    </div>\n                  ))}\n                  {sale.items?.length > 3 && (\n                    <div className=\"more-items\">+{sale.items.length - 3} more items</div>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"sale-total\">\n                <strong>{formatCurrency(sale.total_amount)}</strong>\n              </div>\n              \n              <div className=\"stock-status\">\n                {stockValidationStatus[sale.id]?.hasInsufficientStock ? (\n                  <div className=\"stock-insufficient\"> Insufficient Stock</div>\n                ) : (\n                  <div className=\"stock-sufficient\"> Stock Available</div>\n                )}\n              </div>\n              \n              <div className=\"sale-actions\">\n                <Button\n                  size=\"small\"\n                  variant=\"outline\"\n                  onClick={async () => {\n                    try {\n                      // Fetch complete sale data including items\n                      const response = await api.get(`/api/sales/${sale.id}/`);\n                      setSelectedSale(response.data);\n                      setShowSaleModal(true);\n                    } catch (error) {\n                      console.error('Error fetching sale details:', error);\n                      // Fallback to using the sale data from the list\n                      setSelectedSale(sale);\n                      setShowSaleModal(true);\n                    }\n                  }}\n                >\n                  View Details\n                </Button>\n                <Button\n                  size=\"small\"\n                  variant=\"outline\"\n                  onClick={() => printPendingSale(sale)}\n                >\n                   Print\n                </Button>\n                <Button\n                  size=\"small\"\n                  variant=\"outline\"\n                  onClick={() => editSale(sale)}\n                >\n                   Edit\n                </Button>\n                <Button\n                  size=\"small\"\n                  variant=\"primary\"\n                  disabled={stockValidationStatus[sale.id]?.hasInsufficientStock}\n                  onClick={() => completeSale(sale.id)}\n                  loading={completingSale === sale.id}\n                >\n                  {stockValidationStatus[sale.id]?.hasInsufficientStock ? t('buttons.insufficient_stock') : t('buttons.complete_sale')}\n                </Button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Sale Details Modal */}\n      {showSaleModal && selectedSale && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal sale-details-modal\">\n            <div className=\"modal-header\">\n              <h2>Sale Details - {selectedSale.sale_number}</h2>\n              <button \n                className=\"modal-close\" \n                onClick={() => {\n                  setShowSaleModal(false);\n                  setSelectedSale(null);\n                }}\n              >\n                \n              </button>\n            </div>\n\n            <div className=\"modal-body\">\n              {/* Customer Information */}\n              <div className=\"info-section\">\n                <h3>Customer Information</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Name:</span>\n                    <span className=\"info-value\">{selectedSale.customer_name || 'Walk-in Customer'}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Phone:</span>\n                    <span className=\"info-value\">{selectedSale.customer_phone || 'N/A'}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Email:</span>\n                    <span className=\"info-value\">{selectedSale.customer_email || 'N/A'}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Sale Information */}\n              <div className=\"info-section\">\n                <h3>Sale Information</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Date:</span>\n                    <span className=\"info-value\">{formatDate(selectedSale.created_at)}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Payment Method:</span>\n                    <span className=\"info-value\">{selectedSale.payment_method?.replace('_', ' ').toUpperCase()}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <span className=\"info-label\">Status:</span>\n                    <span className=\"status-badge pending\">Pending</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Items List */}\n              <div className=\"items-section\">\n                <h3>Items ({selectedSale.items?.length || 0})</h3>\n                <div \n                  className=\"items-container\"\n                  style={{\n                    minHeight: `${Math.max(200, (selectedSale.items?.length || 0) * 120)}px`,\n                    maxHeight: '500px'\n                  }}\n                >\n                  {selectedSale.items?.map((item, index) => (\n                    <div key={index} className=\"item-card\" style={{marginBottom: '12px'}}>\n                      <div className=\"item-header\">\n                        <div className=\"item-name\">{item.product_name}</div>\n                        <span className={`price-mode-badge ${item.price_mode === 'wholesale' ? 'wholesale' : ''}`}>\n                          {item.price_mode === 'wholesale' ? 'WS' : 'STD'}\n                        </span>\n                      </div>\n                      <div className=\"item-details\">\n                        <div className=\"item-quantity\">\n                          <span className=\"quantity\">{item.quantity_display || item.quantity || 'N/A'}</span>\n                          <span className=\"unit\">{item.unit_name || 'N/A'}</span>\n                        </div>\n                        <div className=\"item-price\">\n                          <span className=\"unit-price\">{item.unit_price ? formatCurrency(item.unit_price) : 'N/A'} each</span>\n                          <span className=\"total-price\">{item.total_price ? formatCurrency(item.total_price) : 'N/A'}</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Totals */}\n              <div className=\"totals-section\">\n                <h3>Totals</h3>\n                <div className=\"totals-grid\">\n                  <div className=\"total-item\">\n                    <span className=\"total-label\">Subtotal:</span>\n                    <span className=\"total-value\">{formatCurrency(selectedSale.subtotal)}</span>\n                  </div>\n                  {selectedSale.discount_amount > 0 && (\n                    <div className=\"total-item\">\n                      <span className=\"total-label\">Discount:</span>\n                      <span className=\"total-value\">-{formatCurrency(selectedSale.discount_amount)}</span>\n                    </div>\n                  )}\n                  {selectedSale.tax_amount > 0 && (\n                    <div className=\"total-item\">\n                      <span className=\"total-label\">Tax:</span>\n                      <span className=\"total-value\">{formatCurrency(selectedSale.tax_amount)}</span>\n                    </div>\n                  )}\n                  <div className=\"total-item total-final\">\n                    <span className=\"total-label\">Total:</span>\n                    <span className=\"total-value\">{formatCurrency(selectedSale.total_amount)}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Stock Status */}\n              <div className=\"stock-section\">\n                <h3>Stock Status</h3>\n                <div className=\"stock-status\">\n                  {stockValidationStatus[selectedSale.id]?.hasInsufficientStock ? (\n                    <div className=\"stock-insufficient\">\n                       Insufficient Stock\n                    </div>\n                  ) : (\n                    <div className=\"stock-sufficient\">\n                       Stock Available\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button\n                variant=\"secondary\"\n                onClick={() => {\n                  setShowSaleModal(false);\n                  setSelectedSale(null);\n                }}\n              >\n                Close\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => printPendingSale(selectedSale)}\n              >\n                 Print Receipt\n              </Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => editSale(selectedSale)}\n              >\n                 Edit\n              </Button>\n              <Button\n                variant=\"success\"\n                disabled={stockValidationStatus[selectedSale.id]?.hasInsufficientStock}\n                onClick={() => completeSale(selectedSale.id)}\n              >\n                {stockValidationStatus[selectedSale.id]?.hasInsufficientStock ? t('buttons.insufficient_stock') : t('buttons.complete_sale')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Sale Modal */}\n      {showEditModal && editingSale && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal edit-sale-modal\">\n            <div className=\"modal-header\">\n              <h2>Edit Sale - {editingSale.sale_number}</h2>\n              <button \n                className=\"modal-close\" \n                onClick={() => {\n                  setShowEditModal(false);\n                  setEditingSale(null);\n                  setEditFormData({});\n                }}\n              >\n                \n              </button>\n            </div>\n\n            <div className=\"modal-body\">\n              {/* Customer Information */}\n              <div className=\"form-section\">\n                <h3>Customer Information</h3>\n                <div className=\"form-grid\">\n                  <div className=\"form-group\">\n                    <label>Customer Name</label>\n                    <input\n                      type=\"text\"\n                      value={editFormData.customer_name || ''}\n                      onChange={(e) => setEditFormData({...editFormData, customer_name: e.target.value})}\n                      placeholder={t('forms.customer_name')}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Phone</label>\n                    <input\n                      type=\"text\"\n                      value={editFormData.customer_phone || ''}\n                      onChange={(e) => setEditFormData({...editFormData, customer_phone: e.target.value})}\n                      placeholder={t('forms.phone_number')}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Email</label>\n                    <input\n                      type=\"email\"\n                      value={editFormData.customer_email || ''}\n                      onChange={(e) => setEditFormData({...editFormData, customer_email: e.target.value})}\n                      placeholder={t('forms.email_address')}\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Payment Method</label>\n                    <select\n                      value={editFormData.payment_method || 'cash'}\n                      onChange={(e) => setEditFormData({...editFormData, payment_method: e.target.value})}\n                    >\n                      <option value=\"cash\">Cash</option>\n                      <option value=\"card\">Card</option>\n                      <option value=\"mobile_money\">Mobile Money</option>\n                      <option value=\"bank_transfer\">Bank Transfer</option>\n                    </select>\n                  </div>\n                </div>\n              </div>\n\n              {/* Payment Options */}\n              <div className=\"form-section\">\n                <h3>Payment Type</h3>\n                <div className=\"payment-types\">\n                  <label className=\"payment-type\">\n                    <input\n                      type=\"radio\"\n                      name=\"paymentType\"\n                      value=\"full\"\n                      checked={paymentType === 'full'}\n                      onChange={(e) => setPaymentType(e.target.value)}\n                    />\n                    <span>Full Payment (100%)</span>\n                  </label>\n                  <label className=\"payment-type\">\n                    <input\n                      type=\"radio\"\n                      name=\"paymentType\"\n                      value=\"partial\"\n                      checked={paymentType === 'partial'}\n                      onChange={(e) => setPaymentType(e.target.value)}\n                    />\n                    <span>Partial Payment (0-99.99%)</span>\n                  </label>\n                </div>\n                \n                {paymentType === 'partial' && (\n                  <div className=\"form-group\">\n                    <label>Amount to Pay</label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      max={calculateEditTotal()}\n                      value={paidAmount || 0}\n                      onChange={(e) => {\n                        const value = parseFloat(e.target.value) || 0;\n                        setPaidAmount(value);\n                      }}\n                      placeholder={t('forms.enter_amount_to_pay')}\n                    />\n                    <small>\n                      Total: {formatCurrency(calculateEditTotal())} | \n                      Remaining: {formatCurrency(calculateEditTotal() - (paidAmount || 0))}\n                    </small>\n                  </div>\n                )}\n                \n                {paymentType === 'full' && (\n                  <div className=\"form-group\">\n                    <label>Amount to Pay</label>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      value={calculateEditTotal()}\n                      readOnly\n                      className=\"form-control\"\n                    />\n                    <small>Full payment for the total amount.</small>\n                  </div>\n                )}\n              </div>\n\n              {/* Items */}\n              <div className=\"form-section\">\n                <h3>Items ({editFormData.items?.length || 0})</h3>\n                <div className=\"items-edit-container\">\n                  {editFormData.items?.map((item, index) => (\n                    <div key={index} className=\"edit-item-card\">\n                      <div className=\"item-header\">\n                        <div className=\"item-name\">{item.product_name}</div>\n                        <span className={`price-mode-badge ${item.price_mode === 'wholesale' ? 'wholesale' : ''}`}>\n                          {item.price_mode === 'wholesale' ? 'WS' : 'STD'}\n                        </span>\n                      </div>\n                      <div className=\"item-details\">\n                        <div className=\"item-unit\">{item.unit_name}</div>\n                        <div className=\"item-price\">{formatCurrency(item.unit_price)} each</div>\n                      </div>\n                      <div className=\"item-controls\">\n                        <div className=\"control-group\">\n                          <label>Quantity:</label>\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            step=\"0.01\"\n                            value={item.quantity}\n                            onChange={(e) => handleEditItemQuantity(index, e.target.value)}\n                          />\n                        </div>\n                        <div className=\"control-group\">\n                          <label>Price Mode:</label>\n                          <select\n                            value={item.price_mode}\n                            disabled\n                            style={{ backgroundColor: '#f5f5f5', color: '#666' }}\n                          >\n                            <option value=\"standard\">Standard</option>\n                            <option value=\"wholesale\">Wholesale</option>\n                          </select>\n                        </div>\n                        <div className=\"item-total\">\n                          {formatCurrency(item.total_price)}\n                        </div>\n                        <div className=\"item-actions\">\n                          <Button\n                            size=\"small\"\n                            variant=\"danger\"\n                            onClick={() => removeEditItem(index)}\n                          >\n                            Remove\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* Totals */}\n              <div className=\"totals-section\">\n                <h3>Totals</h3>\n                <div className=\"totals-grid\">\n                  <div className=\"total-item\">\n                    <span className=\"total-label\">Subtotal:</span>\n                    <span className=\"total-value\">{formatCurrency(editFormData.subtotal || 0)}</span>\n                  </div>\n                  <div className=\"total-item total-final\">\n                    <span className=\"total-label\">Total:</span>\n                    <span className=\"total-value\">{formatCurrency(editFormData.total_amount || 0)}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button\n                variant=\"secondary\"\n                onClick={() => {\n                  setShowEditModal(false);\n                  setEditingSale(null);\n                  setEditFormData({});\n                }}\n              >\n                Cancel\n              </Button>\n              <Button\n                variant=\"primary\"\n                onClick={saveEditedSale}\n              >\n                Save Changes\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PendingSales;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}