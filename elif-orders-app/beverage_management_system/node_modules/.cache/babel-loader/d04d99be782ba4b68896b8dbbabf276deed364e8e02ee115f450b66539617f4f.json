{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{setCookie,getCookie}from'../utils/cookieUtils';import'./LanguageSelector.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LanguageSelector=()=>{const{i18n,t}=useTranslation();const[isOpen,setIsOpen]=useState(false);const languages=[{code:'en',name:'English',flag:'ðŸ‡ºðŸ‡¸'},{code:'fr',name:'FranÃ§ais',flag:'ðŸ‡«ðŸ‡·'},{code:'mg',name:'Malagasy',flag:'ðŸ‡²ðŸ‡¬'}];const currentLanguage=languages.find(lang=>lang.code===i18n.language)||languages[0];// Load language from storage on mount\nuseEffect(()=>{const savedLanguage=sessionStorage.getItem('i18nextLng')||localStorage.getItem('i18nextLng')||getCookie('i18next')||'en';if(savedLanguage!==i18n.language){i18n.changeLanguage(savedLanguage);}},[i18n]);const handleLanguageChange=languageCode=>{i18n.changeLanguage(languageCode);setIsOpen(false);// Save to sessionStorage (primary), localStorage (backup), and cookie (fallback)\nsessionStorage.setItem('i18nextLng',languageCode);localStorage.setItem('i18nextLng',languageCode);setCookie('i18next',languageCode,30);// 30 days\n// Show success message\nconst message=t('language.language_changed');// You can add a toast notification here if you have one\n};const toggleDropdown=()=>{setIsOpen(!isOpen);};return/*#__PURE__*/_jsxs(\"div\",{className:\"language-selector\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"language-selector-button\",onClick:toggleDropdown,\"aria-label\":t('language.select_language'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"language-flag\",children:currentLanguage.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"language-name\",children:currentLanguage.name}),/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow \".concat(isOpen?'open':''),children:\"\\u25BC\"})]}),isOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"language-dropdown\",children:languages.map(language=>/*#__PURE__*/_jsxs(\"button\",{className:\"language-option \".concat(i18n.language===language.code?'active':''),onClick:()=>handleLanguageChange(language.code),children:[/*#__PURE__*/_jsx(\"span\",{className:\"language-flag\",children:language.flag}),/*#__PURE__*/_jsx(\"span\",{className:\"language-name\",children:language.name}),i18n.language===language.code&&/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\",children:\"\\u2713\"})]},language.code))})]});};export default LanguageSelector;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","setCookie","getCookie","jsx","_jsx","jsxs","_jsxs","LanguageSelector","i18n","t","isOpen","setIsOpen","languages","code","name","flag","currentLanguage","find","lang","language","savedLanguage","sessionStorage","getItem","localStorage","changeLanguage","handleLanguageChange","languageCode","setItem","message","toggleDropdown","className","children","onClick","concat","map"],"sources":["/home/el-ifran/WareHouse_Manager/elif-orders-app/beverage_management_system/src/components/LanguageSelector.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { setCookie, getCookie } from '../utils/cookieUtils';\nimport './LanguageSelector.css';\n\nconst LanguageSelector = () => {\n  const { i18n, t } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const languages = [\n    { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },\n    { code: 'fr', name: 'FranÃ§ais', flag: 'ðŸ‡«ðŸ‡·' },\n    { code: 'mg', name: 'Malagasy', flag: 'ðŸ‡²ðŸ‡¬' }\n  ];\n\n  const currentLanguage = languages.find(lang => lang.code === i18n.language) || languages[0];\n\n  // Load language from storage on mount\n  useEffect(() => {\n    const savedLanguage = sessionStorage.getItem('i18nextLng') || \n                         localStorage.getItem('i18nextLng') || \n                         getCookie('i18next') ||\n                         'en';\n    \n    if (savedLanguage !== i18n.language) {\n      i18n.changeLanguage(savedLanguage);\n    }\n  }, [i18n]);\n\n  const handleLanguageChange = (languageCode) => {\n    i18n.changeLanguage(languageCode);\n    setIsOpen(false);\n    \n    // Save to sessionStorage (primary), localStorage (backup), and cookie (fallback)\n    sessionStorage.setItem('i18nextLng', languageCode);\n    localStorage.setItem('i18nextLng', languageCode);\n    setCookie('i18next', languageCode, 30); // 30 days\n    \n    // Show success message\n    const message = t('language.language_changed');\n    // You can add a toast notification here if you have one\n  };\n\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div className=\"language-selector\">\n      <button \n        className=\"language-selector-button\"\n        onClick={toggleDropdown}\n        aria-label={t('language.select_language')}\n      >\n        <span className=\"language-flag\">{currentLanguage.flag}</span>\n        <span className=\"language-name\">{currentLanguage.name}</span>\n        <span className={`dropdown-arrow ${isOpen ? 'open' : ''}`}>â–¼</span>\n      </button>\n      \n      {isOpen && (\n        <div className=\"language-dropdown\">\n          {languages.map((language) => (\n            <button\n              key={language.code}\n              className={`language-option ${i18n.language === language.code ? 'active' : ''}`}\n              onClick={() => handleLanguageChange(language.code)}\n            >\n              <span className=\"language-flag\">{language.flag}</span>\n              <span className=\"language-name\">{language.name}</span>\n              {i18n.language === language.code && (\n                <span className=\"checkmark\">âœ“</span>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LanguageSelector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}