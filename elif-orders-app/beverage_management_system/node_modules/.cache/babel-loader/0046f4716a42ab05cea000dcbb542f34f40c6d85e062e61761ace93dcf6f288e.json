{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../services/api';import'./ConnectionStatus.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ConnectionStatus=()=>{const[isConnected,setIsConnected]=useState(false);const[isChecking,setIsChecking]=useState(true);const checkConnection=async()=>{try{setIsChecking(true);// Try to access the health check endpoint that doesn't require authentication\nawait api.get('/core/health/',{timeout:5000});// If we get here, server is connected\nsetIsConnected(true);}catch(error){// Check if it's a connection error vs other errors\nif(error.code==='ECONNREFUSED'||error.message.includes('Network Error')||error.message.includes('ERR_CONNECTION_REFUSED')||error.message.includes('Failed to fetch')||error.message.includes('Connection refused')){setIsConnected(false);}else if(error.response&&error.response.status){// If we get a response with a status code, server is connected\nsetIsConnected(true);}else{// For any other error, assume disconnected\nsetIsConnected(false);}}finally{setIsChecking(false);}};useEffect(()=>{checkConnection();// Check connection every 30 seconds\nconst interval=setInterval(checkConnection,30000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"connection-status\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"status-dot \".concat(isConnected?'connected':'disconnected',\" \").concat(isChecking?'checking':''),title:isChecking?'Checking connection...':isConnected?'Server connected':'Server disconnected'}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:isChecking?'Checking...':isConnected?'Connected':'Disconnected'})]});};export default ConnectionStatus;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","ConnectionStatus","isConnected","setIsConnected","isChecking","setIsChecking","checkConnection","get","timeout","error","code","message","includes","response","status","interval","setInterval","clearInterval","className","children","concat","title"],"sources":["/home/el-ifran/WareHouse_Manager/beverage_management_system/src/components/ConnectionStatus.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../services/api';\nimport './ConnectionStatus.css';\n\nconst ConnectionStatus = () => {\n  const [isConnected, setIsConnected] = useState(false);\n  const [isChecking, setIsChecking] = useState(true);\n\n  const checkConnection = async () => {\n    try {\n      setIsChecking(true);\n      // Try to access the health check endpoint that doesn't require authentication\n      await api.get('/core/health/', { timeout: 5000 });\n      // If we get here, server is connected\n      setIsConnected(true);\n    } catch (error) {\n      // Check if it's a connection error vs other errors\n      if (error.code === 'ECONNREFUSED' || \n          error.message.includes('Network Error') || \n          error.message.includes('ERR_CONNECTION_REFUSED') ||\n          error.message.includes('Failed to fetch') ||\n          error.message.includes('Connection refused')) {\n        setIsConnected(false);\n      } else if (error.response && error.response.status) {\n        // If we get a response with a status code, server is connected\n        setIsConnected(true);\n      } else {\n        // For any other error, assume disconnected\n        setIsConnected(false);\n      }\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  useEffect(() => {\n    checkConnection();\n    \n    // Check connection every 30 seconds\n    const interval = setInterval(checkConnection, 30000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"connection-status\">\n      <div \n        className={`status-dot ${isConnected ? 'connected' : 'disconnected'} ${isChecking ? 'checking' : ''}`}\n        title={isChecking ? 'Checking connection...' : (isConnected ? 'Server connected' : 'Server disconnected')}\n      />\n      <span className=\"status-text\">\n        {isChecking ? 'Checking...' : (isConnected ? 'Connected' : 'Disconnected')}\n      </span>\n    </div>\n  );\n};\n\nexport default ConnectionStatus;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CACjC,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACU,UAAU,CAAEC,aAAa,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAElD,KAAM,CAAAY,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACFD,aAAa,CAAC,IAAI,CAAC,CACnB;AACA,KAAM,CAAAT,GAAG,CAACW,GAAG,CAAC,eAAe,CAAE,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CACjD;AACAL,cAAc,CAAC,IAAI,CAAC,CACtB,CAAE,MAAOM,KAAK,CAAE,CACd;AACA,GAAIA,KAAK,CAACC,IAAI,GAAK,cAAc,EAC7BD,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,eAAe,CAAC,EACvCH,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,wBAAwB,CAAC,EAChDH,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,iBAAiB,CAAC,EACzCH,KAAK,CAACE,OAAO,CAACC,QAAQ,CAAC,oBAAoB,CAAC,CAAE,CAChDT,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,IAAM,IAAIM,KAAK,CAACI,QAAQ,EAAIJ,KAAK,CAACI,QAAQ,CAACC,MAAM,CAAE,CAClD;AACAX,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,IAAM,CACL;AACAA,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,OAAS,CACRE,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAEDV,SAAS,CAAC,IAAM,CACdW,eAAe,CAAC,CAAC,CAEjB;AACA,KAAM,CAAAS,QAAQ,CAAGC,WAAW,CAACV,eAAe,CAAE,KAAK,CAAC,CAEpD,MAAO,IAAMW,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEf,KAAA,QAAKkB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCrB,IAAA,QACEoB,SAAS,eAAAE,MAAA,CAAgBlB,WAAW,CAAG,WAAW,CAAG,cAAc,MAAAkB,MAAA,CAAIhB,UAAU,CAAG,UAAU,CAAG,EAAE,CAAG,CACtGiB,KAAK,CAAEjB,UAAU,CAAG,wBAAwB,CAAIF,WAAW,CAAG,kBAAkB,CAAG,qBAAuB,CAC3G,CAAC,cACFJ,IAAA,SAAMoB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC1Bf,UAAU,CAAG,aAAa,CAAIF,WAAW,CAAG,WAAW,CAAG,cAAe,CACtE,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAD,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}