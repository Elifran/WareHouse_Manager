{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import Table from'../components/Table';import Button from'../components/Button';import PrintButton from'../components/PrintButton';import'./Inventory.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Inventory=()=>{const{user}=useAuth();const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[taxClasses,setTaxClasses]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showAddModal,setShowAddModal]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[filters,setFilters]=useState({category:'',stockStatus:'',search:''});useEffect(()=>{fetchProducts();fetchCategories();fetchTaxClasses();},[]);const fetchProducts=async function(){let filterParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{setLoading(true);const params=new URLSearchParams();// Add filters to params\nif(filterParams.category)params.append('category',filterParams.category);if(filterParams.search)params.append('search',filterParams.search);if(filterParams.is_active!==undefined)params.append('is_active',filterParams.is_active);if(filterParams.stock_quantity!==undefined)params.append('stock_quantity',filterParams.stock_quantity);const url=\"/products/\".concat(params.toString()?'?'+params.toString():'');const response=await api.get(url);let products=response.data.results||response.data;// Handle low stock filter on frontend since it's a calculated field\nif(filterParams.stockStatus==='low'){products=products.filter(product=>product.is_low_stock);}setProducts(products);}catch(err){setError('Failed to load products');console.error('Products error:',err);}finally{setLoading(false);}};const fetchCategories=async()=>{try{const response=await api.get('/products/categories/');setCategories(response.data.results||response.data);}catch(err){console.error('Categories error:',err);}};const fetchTaxClasses=async()=>{try{const response=await api.get('/products/tax-classes/');setTaxClasses(response.data.results||response.data);}catch(err){console.error('Tax classes error:',err);}};const handleAddProduct=()=>{setEditingProduct(null);setShowAddModal(true);};const handleEditProduct=async product=>{try{// Fetch full product details including cost_price and category ID\nconst response=await api.get(\"/products/\".concat(product.id,\"/\"));setEditingProduct(response.data);setShowAddModal(true);}catch(err){setError('Failed to load product details');console.error('Product details error:',err);}};const handleDeleteProduct=async product=>{if(window.confirm(\"Are you sure you want to delete \".concat(product.name,\"?\"))){try{await api.delete(\"/products/\".concat(product.id,\"/\"));fetchProducts(filters);}catch(err){setError('Failed to delete product');console.error('Delete error:',err);}}};const handleFilterChange=(filterType,value)=>{const newFilters=_objectSpread(_objectSpread({},filters),{},{[filterType]:value});setFilters(newFilters);// Convert stock status filter to API parameters\nconst apiParams=_objectSpread({},newFilters);if(newFilters.stockStatus==='out'){// For out of stock, filter by stock_quantity = 0\napiParams.stock_quantity=0;}fetchProducts(apiParams);};const clearFilters=()=>{const clearedFilters={category:'',stockStatus:'',search:''};setFilters(clearedFilters);fetchProducts(clearedFilters);};const columns=[{key:'name',header:'Product Name',render:(value,row)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-name\",children:value}),/*#__PURE__*/_jsx(\"div\",{className:\"product-sku\",children:row.sku})]})},{key:'category_name',header:'Category'},{key:'stock_quantity',header:'Stock',render:(value,row)=>/*#__PURE__*/_jsxs(\"div\",{className:\"stock-quantity \".concat(row.is_low_stock?'low-stock':'',\" \").concat(row.is_out_of_stock?'out-of-stock':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"base-stock\",children:[value,\" \",row.unit,row.is_low_stock&&/*#__PURE__*/_jsx(\"span\",{className:\"stock-warning\",children:\"Low\"}),row.is_out_of_stock&&/*#__PURE__*/_jsx(\"span\",{className:\"stock-warning\",children:\"Out\"})]}),row.stock_in_units&&row.stock_in_units.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"stock-in-units\",children:row.stock_in_units.filter(stockUnit=>!stockUnit.is_base_unit).map(stockUnit=>/*#__PURE__*/_jsxs(\"div\",{className:\"unit-stock\",children:[stockUnit.quantity,\" \",stockUnit.unit_symbol]},stockUnit.unit_id))})]})},{key:'price',header:'Price',render:value=>\"$\".concat(parseFloat(value).toFixed(2))},{key:'actions',header:'Actions',render:(value,row)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>handleEditProduct(row),children:\"Edit\"}),(user===null||user===void 0?void 0:user.role)==='admin'&&/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDeleteProduct(row),children:\"Delete\"})]})}];return/*#__PURE__*/_jsxs(\"div\",{className:\"inventory\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inventory-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Inventory Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},products),{},{user_name:(user===null||user===void 0?void 0:user.username)||'Unknown User',user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:\"Inventory Report\",type:\"inventory\",printText:\"Print Inventory\",className:\"print-inventory-btn\"}),/*#__PURE__*/_jsx(Button,{onClick:handleAddProduct,children:\"Add Product\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"inventory-filters\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.category,onChange:e=>handleFilterChange('category',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Categories\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Stock Status:\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.stockStatus,onChange:e=>handleFilterChange('stockStatus',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low Stock\"}),/*#__PURE__*/_jsx(\"option\",{value:\"out\",children:\"Out of Stock\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:filters.search,onChange:e=>handleFilterChange('search',e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-group\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:clearFilters,children:\"Clear Filters\"})})]}),/*#__PURE__*/_jsx(Table,{data:products,columns:columns,loading:loading,emptyMessage:\"No products found\"}),showAddModal&&/*#__PURE__*/_jsx(ProductModal,{product:editingProduct,categories:categories,taxClasses:taxClasses,onClose:()=>setShowAddModal(false),onSave:()=>{setShowAddModal(false);fetchProducts(filters);}})]});};const ProductModal=_ref=>{var _product$base_unit,_product$is_active;let{product,categories,taxClasses,onClose,onSave}=_ref;const[formData,setFormData]=useState({name:(product===null||product===void 0?void 0:product.name)||'',description:(product===null||product===void 0?void 0:product.description)||'',category:(product===null||product===void 0?void 0:product.category)||'',tax_class:(product===null||product===void 0?void 0:product.tax_class)||'',sku:(product===null||product===void 0?void 0:product.sku)||'',price:(product===null||product===void 0?void 0:product.price)||'',cost_price:(product===null||product===void 0?void 0:product.cost_price)||'',stock_quantity:(product===null||product===void 0?void 0:product.stock_quantity)||0,min_stock_level:(product===null||product===void 0?void 0:product.min_stock_level)||10,max_stock_level:(product===null||product===void 0?void 0:product.max_stock_level)||1000,base_unit:(product===null||product===void 0?void 0:(_product$base_unit=product.base_unit)===null||_product$base_unit===void 0?void 0:_product$base_unit.id)||(product===null||product===void 0?void 0:product.base_unit)||'',is_active:(_product$is_active=product===null||product===void 0?void 0:product.is_active)!==null&&_product$is_active!==void 0?_product$is_active:true});const[units,setUnits]=useState([]);const[allUnits,setAllUnits]=useState([]);const[compatibleUnits,setCompatibleUnits]=useState([]);const[showUnitSelector,setShowUnitSelector]=useState(false);const[convertibleUnits,setConvertibleUnits]=useState([]);const[selectedDisplayUnit,setSelectedDisplayUnit]=useState(null);const[unitConversions,setUnitConversions]=useState([]);// Load base units when component mounts (for product creation/editing)\nuseEffect(()=>{const fetchUnits=async()=>{try{console.log('=== FETCHING UNITS ===');const[baseUnitsResponse,allUnitsResponse]=await Promise.all([api.get('/products/base-units/'),api.get('/products/units/')]);console.log('Base units response:',baseUnitsResponse.data);console.log('All units response:',allUnitsResponse.data);const baseUnits=baseUnitsResponse.data.results||baseUnitsResponse.data;const allUnitsData=allUnitsResponse.data.results||allUnitsResponse.data;console.log('Setting base units:',baseUnits);console.log('Setting all units:',allUnitsData);setUnits(baseUnits);setAllUnits(allUnitsData);// Handle pagination for conversions\nlet allConversions=[];let nextUrl='/products/unit-conversions/';while(nextUrl){const response=await api.get(nextUrl);const data=response.data;allConversions=allConversions.concat(data.results||data);nextUrl=data.next;}console.log('Setting unit conversions:',allConversions);setUnitConversions(allConversions);console.log('=== UNITS LOADED ===');}catch(err){console.error('Failed to load units:',err);}};fetchUnits();},[]);// Load compatible units when editing a product\nuseEffect(()=>{if(product&&product.compatible_units){setCompatibleUnits(product.compatible_units);}else{setCompatibleUnits([]);}},[product]);// Set default display unit when base unit changes\nuseEffect(()=>{if(formData.base_unit&&allUnits.length>0){const baseUnit=allUnits.find(unit=>unit.id===parseInt(formData.base_unit));if(baseUnit){setSelectedDisplayUnit(baseUnit);}}},[formData.base_unit,allUnits]);// Debug: Monitor formData changes\nuseEffect(()=>{console.log('FormData changed:',formData);},[formData]);// Debug: Monitor allUnits changes\nuseEffect(()=>{console.log('AllUnits changed:',allUnits);},[allUnits]);// Debug: Monitor units changes\nuseEffect(()=>{console.log('Units changed:',units);},[units]);// Fetch convertible units when base unit changes\nuseEffect(()=>{const fetchConvertibleUnits=async()=>{if(formData.base_unit){try{// Use a unified approach for both new and existing products\n// Get all unit conversions and find units that can be converted to/from the base unit\n// Handle pagination to get all conversions\nlet allConversions=[];let nextUrl='/products/unit-conversions/';while(nextUrl){const response=await api.get(nextUrl);const data=response.data;allConversions=allConversions.concat(data.results||data);nextUrl=data.next;// Next page URL\n}const conversions=allConversions;const baseUnitId=parseInt(formData.base_unit);const convertible=[];// Find units that have conversions with the base unit\nconversions.forEach(conversion=>{if(conversion.from_unit===baseUnitId&&!convertible.find(u=>u.id===conversion.to_unit)){// Find the unit details\nconst unit=allUnits.find(u=>u.id===conversion.to_unit);if(unit){convertible.push({id:unit.id,name:unit.name,symbol:unit.symbol,is_base_unit:unit.is_base_unit});}}else if(conversion.to_unit===baseUnitId&&!convertible.find(u=>u.id===conversion.from_unit)){// Find the unit details\nconst unit=allUnits.find(u=>u.id===conversion.from_unit);if(unit){convertible.push({id:unit.id,name:unit.name,symbol:unit.symbol,is_base_unit:unit.is_base_unit});}}});setConvertibleUnits(convertible);}catch(err){console.error('Failed to fetch convertible units:',err);setConvertibleUnits([]);}}else{setConvertibleUnits([]);}};fetchConvertibleUnits();},[formData.base_unit,allUnits]);// Update form data when product changes (for editing)\nuseEffect(()=>{if(product){var _product$base_unit2,_product$is_active2;setFormData({name:product.name||'',description:product.description||'',category:product.category||'',tax_class:product.tax_class||'',sku:product.sku||'',price:product.price||'',cost_price:product.cost_price||'',stock_quantity:product.stock_quantity||0,min_stock_level:product.min_stock_level||10,max_stock_level:product.max_stock_level||1000,base_unit:((_product$base_unit2=product.base_unit)===null||_product$base_unit2===void 0?void 0:_product$base_unit2.id)||product.base_unit||'',is_active:(_product$is_active2=product.is_active)!==null&&_product$is_active2!==void 0?_product$is_active2:true});}},[product]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Function to get conversion factor between units\nconst getConversionFactor=(fromUnitId,toUnitId)=>{if(fromUnitId===toUnitId)return 1;// Look for direct conversion\nlet conversion=unitConversions.find(conv=>conv.from_unit===fromUnitId&&conv.to_unit===toUnitId);if(conversion){console.log('Found direct conversion:',conversion);return conversion.conversion_factor;}// Look for reverse conversion\nconversion=unitConversions.find(conv=>conv.from_unit===toUnitId&&conv.to_unit===fromUnitId);if(conversion){console.log('Found reverse conversion:',conversion);return 1/conversion.conversion_factor;}console.log('No conversion found between',fromUnitId,'and',toUnitId);console.log('Available conversions:',unitConversions.map(c=>\"\".concat(c.from_unit,\"->\").concat(c.to_unit,\": \").concat(c.conversion_factor)));return null;};// Function to convert quantity from base unit to display unit\nconst convertQuantity=(baseQuantity,baseUnitId,displayUnitId)=>{const factor=getConversionFactor(baseUnitId,displayUnitId);return factor?baseQuantity*factor:baseQuantity;};// Function to convert price from base unit to display unit\nconst convertPrice=(basePrice,baseUnitId,displayUnitId)=>{const factor=getConversionFactor(displayUnitId,baseUnitId);return factor?basePrice*factor:basePrice;};// Function to convert values back to base unit for saving\nconst convertToBaseUnit=(displayValue,displayUnitId,baseUnitId)=>{const factor=getConversionFactor(displayUnitId,baseUnitId);return factor?displayValue/factor:displayValue;};// Function to get available units for display (base unit + compatible units)\nconst getAvailableDisplayUnits=()=>{if(!formData.base_unit||allUnits.length===0){console.log('No base unit or allUnits empty');return[];}const baseUnit=allUnits.find(unit=>unit.id===parseInt(formData.base_unit));if(!baseUnit){console.log('Base unit not found:',formData.base_unit);return[];}console.log('Base unit found:',baseUnit);console.log('Compatible units:',compatibleUnits);console.log('Unit conversions:',unitConversions.length);const availableUnits=[baseUnit];// Base unit is always first\n// Add compatible units that have conversions\ncompatibleUnits.forEach(cu=>{const unit=allUnits.find(u=>u.id===cu.unit);if(unit&&unit.id!==baseUnit.id){// Don't add base unit again\n// Check if there's a conversion between base unit and this unit\nconst hasConversion=unitConversions.some(conv=>conv.from_unit===baseUnit.id&&conv.to_unit===unit.id||conv.to_unit===baseUnit.id&&conv.from_unit===unit.id);if(hasConversion){availableUnits.push(unit);console.log('Added compatible unit:',unit);}else{console.log('No conversion found for unit:',unit);}}});console.log('Available display units:',availableUnits);return availableUnits;};const handleChange=e=>{const{name,value,type,checked}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:type==='checkbox'?checked:value}));};const handleDisplayUnitChange=unitId=>{alert(\"Display unit changed to: \".concat(unitId));const unit=allUnits.find(u=>u.id===parseInt(unitId));setSelectedDisplayUnit(unit);console.log('=== DISPLAY UNIT CHANGE ===');console.log('Selected unit:',unit);console.log('Current formData:',formData);// Update form data to show converted values\nif(unit&&formData.base_unit){const baseUnitId=parseInt(formData.base_unit);const displayUnitId=unit.id;console.log('Converting from base unit',baseUnitId,'to display unit',displayUnitId);console.log('Current values:',{stock:formData.stock_quantity,price:formData.price,minStock:formData.min_stock_level,maxStock:formData.max_stock_level});// Convert quantities\nconst convertedStock=convertQuantity(parseFloat(formData.stock_quantity||0),baseUnitId,displayUnitId);const convertedMinStock=convertQuantity(parseFloat(formData.min_stock_level||0),baseUnitId,displayUnitId);const convertedMaxStock=convertQuantity(parseFloat(formData.max_stock_level||0),baseUnitId,displayUnitId);// Convert prices\nconst convertedPrice=convertPrice(parseFloat(formData.price||0),baseUnitId,displayUnitId);const convertedCostPrice=convertPrice(parseFloat(formData.cost_price||0),baseUnitId,displayUnitId);console.log('Converted values:',{stock:convertedStock,price:convertedPrice,minStock:convertedMinStock,maxStock:convertedMaxStock});// Update form data with converted values\nconst newFormData=_objectSpread(_objectSpread({},formData),{},{stock_quantity:convertedStock.toFixed(2),min_stock_level:convertedMinStock.toFixed(2),max_stock_level:convertedMaxStock.toFixed(2),price:convertedPrice.toFixed(2),cost_price:convertedCostPrice.toFixed(2)});console.log('New formData:',newFormData);setFormData(newFormData);console.log('=== END DISPLAY UNIT CHANGE ===');}};const addCompatibleUnit=async unitId=>{if(!product)return;// Check if the unit is already the base unit\nif(parseInt(unitId)===parseInt(formData.base_unit)){alert('Cannot add the base unit as a compatible unit.');return;}// Check if the unit is already added\nconst alreadyAdded=compatibleUnits.some(cu=>cu.unit===parseInt(unitId));if(alreadyAdded){alert('This unit is already added as a compatible unit.');return;}try{const response=await api.post(\"/products/\".concat(product.id,\"/units/\"),{unit:parseInt(unitId),is_default:false,is_active:true});setCompatibleUnits([...compatibleUnits,response.data]);setShowUnitSelector(false);}catch(err){var _err$response,_err$response$data;console.error('Failed to add compatible unit:',err);alert(\"Failed to add compatible unit: \".concat(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message));}};const removeCompatibleUnit=async productUnitId=>{if(!product)return;try{await api.delete(\"/products/\".concat(product.id,\"/units/\").concat(productUnitId,\"/\"));setCompatibleUnits(compatibleUnits.filter(cu=>cu.id!==productUnitId));}catch(err){console.error('Failed to remove compatible unit:',err);}};const setDefaultUnit=async productUnitId=>{if(!product)return;try{// First, set all units to non-default\nfor(const cu of compatibleUnits){if(cu.is_default){await api.put(\"/products/\".concat(product.id,\"/units/\").concat(cu.id,\"/\"),_objectSpread(_objectSpread({},cu),{},{is_default:false}));}}// Then set the selected unit as default\nconst unitToUpdate=compatibleUnits.find(cu=>cu.id===productUnitId);if(unitToUpdate){await api.put(\"/products/\".concat(product.id,\"/units/\").concat(productUnitId,\"/\"),_objectSpread(_objectSpread({},unitToUpdate),{},{is_default:true}));// Update local state\nsetCompatibleUnits(compatibleUnits.map(cu=>_objectSpread(_objectSpread({},cu),{},{is_default:cu.id===productUnitId})));}}catch(err){console.error('Failed to set default unit:',err);}};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{// Convert values back to base unit if a display unit is selected\nlet finalFormData=_objectSpread({},formData);if(selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)){const baseUnitId=parseInt(formData.base_unit);const displayUnitId=selectedDisplayUnit.id;// Convert back to base unit\nfinalFormData=_objectSpread(_objectSpread({},formData),{},{stock_quantity:convertToBaseUnit(parseFloat(formData.stock_quantity||0),displayUnitId,baseUnitId).toString(),min_stock_level:convertToBaseUnit(parseFloat(formData.min_stock_level||0),displayUnitId,baseUnitId).toString(),max_stock_level:convertToBaseUnit(parseFloat(formData.max_stock_level||0),displayUnitId,baseUnitId).toString(),price:convertToBaseUnit(parseFloat(formData.price||0),displayUnitId,baseUnitId).toString(),cost_price:convertToBaseUnit(parseFloat(formData.cost_price||0),displayUnitId,baseUnitId).toString()});}// Prepare data for submission\nconst submitData=_objectSpread(_objectSpread({},finalFormData),{},{base_unit:finalFormData.base_unit?parseInt(finalFormData.base_unit):null});if(product){await api.put(\"/products/\".concat(product.id,\"/\"),submitData);}else{await api.post('/products/',submitData);}onSave();}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to save product');console.error('Save error:',err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"modal-overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:product?'Edit Product':'Add Product'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"modal-form\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"SKU *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"sku\",value:formData.sku,onChange:handleChange,required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleChange,rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",value:formData.category,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tax Class\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"tax_class\",value:formData.tax_class,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"No Tax Class\"}),taxClasses.map(taxClass=>/*#__PURE__*/_jsxs(\"option\",{value:taxClass.id,children:[taxClass.name,\" (\",taxClass.tax_rate,\"%)\"]},taxClass.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Base Unit\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"base_unit\",value:formData.base_unit,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Base Unit\"}),units.map(unit=>/*#__PURE__*/_jsxs(\"option\",{value:unit.id,children:[unit.name,\" (\",unit.symbol,\")\"]},unit.id))]})]}),formData.base_unit&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Display Unit\"}),/*#__PURE__*/_jsx(\"select\",{value:(selectedDisplayUnit===null||selectedDisplayUnit===void 0?void 0:selectedDisplayUnit.id)||'',onChange:e=>handleDisplayUnitChange(e.target.value),children:getAvailableDisplayUnits().map(unit=>/*#__PURE__*/_jsxs(\"option\",{value:unit.id,children:[unit.name,\" (\",unit.symbol,\")\"]},unit.id))}),/*#__PURE__*/_jsx(\"small\",{className:\"form-help\",children:\"Select a unit to view quantities and prices in that unit\"})]})]}),product&&/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Compatible Units\"}),/*#__PURE__*/_jsx(\"p\",{className:\"compatible-units-note\",children:\"Only units that can be converted to/from the base unit can be added as compatible units.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"compatible-units-section\",children:[compatibleUnits.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"compatible-units-list\",children:compatibleUnits.map(compatibleUnit=>/*#__PURE__*/_jsxs(\"div\",{className:\"compatible-unit-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"unit-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"unit-name\",children:[compatibleUnit.unit_name,\" (\",compatibleUnit.unit_symbol,\")\"]}),compatibleUnit.is_default&&/*#__PURE__*/_jsx(\"span\",{className:\"default-badge\",children:\"Default\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"unit-actions\",children:[!compatibleUnit.is_default&&/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>setDefaultUnit(compatibleUnit.id),children:\"Set Default\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>removeCompatibleUnit(compatibleUnit.id),children:\"Remove\"})]})]},compatibleUnit.id))}):/*#__PURE__*/_jsx(\"p\",{className:\"no-units-message\",children:\"No compatible units added yet.\"}),/*#__PURE__*/_jsxs(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowUnitSelector(true),className:\"add-unit-button\",disabled:!formData.base_unit||convertibleUnits.filter(unit=>{const isAlreadyAdded=compatibleUnits.some(cu=>cu.unit===unit.id);const isBaseUnit=unit.id===parseInt(formData.base_unit);return!isAlreadyAdded&&!isBaseUnit;}).length===0,children:[\"+ Add Compatible Unit\",!formData.base_unit&&\" (Select base unit first)\",formData.base_unit&&convertibleUnits.filter(unit=>{const isAlreadyAdded=compatibleUnits.some(cu=>cu.unit===unit.id);const isBaseUnit=unit.id===parseInt(formData.base_unit);return!isAlreadyAdded&&!isBaseUnit;}).length===0&&\" (No convertible units)\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Price * \",selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)&&\"(per \".concat(selectedDisplayUnit.name,\")\")]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",name:\"price\",value:formData.price,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Cost Price \",selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)&&\"(per \".concat(selectedDisplayUnit.name,\")\")]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",name:\"cost_price\",value:formData.cost_price,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Stock Quantity \",selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)&&\"(\".concat(selectedDisplayUnit.name,\")\")]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"stock_quantity\",value:formData.stock_quantity,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Min Stock Level \",selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)&&\"(\".concat(selectedDisplayUnit.name,\")\")]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"min_stock_level\",value:formData.min_stock_level,onChange:handleChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Max Stock Level \",selectedDisplayUnit&&selectedDisplayUnit.id!==parseInt(formData.base_unit)&&\"(\".concat(selectedDisplayUnit.name,\")\")]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"max_stock_level\",value:formData.max_stock_level,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"is_active\",checked:formData.is_active,onChange:handleChange}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",loading:loading,children:product?'Update':'Create'})]})]})]}),showUnitSelector&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content unit-selector-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Compatible Unit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowUnitSelector(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Select a unit to add as compatible for this product:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"unit-selector-note\",children:\"Only units that can be converted to/from the base unit are shown.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"unit-selector-list\",children:[convertibleUnits.filter(unit=>{const isAlreadyAdded=compatibleUnits.some(cu=>cu.unit===unit.id);const isBaseUnit=unit.id===parseInt(formData.base_unit);return!isAlreadyAdded&&!isBaseUnit;}).map(unit=>/*#__PURE__*/_jsx(\"div\",{className:\"unit-selector-item\",onClick:()=>addCompatibleUnit(unit.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"unit-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"unit-name\",children:unit.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"unit-symbol\",children:[\"(\",unit.symbol,\")\"]}),unit.is_base_unit&&/*#__PURE__*/_jsx(\"span\",{className:\"base-unit-badge\",children:\"Base Unit\"})]})},unit.id)),convertibleUnits.filter(unit=>!compatibleUnits.some(cu=>cu.unit===unit.id)&&unit.id!==parseInt(formData.base_unit)).length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"no-units-available\",children:formData.base_unit?\"No convertible units available for the selected base unit.\":\"Please select a base unit first.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-actions\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowUnitSelector(false),children:\"Cancel\"})})]})})]});};export default Inventory;","map":{"version":3,"names":["React","useState","useEffect","useAuth","api","Table","Button","PrintButton","jsx","_jsx","jsxs","_jsxs","Inventory","user","products","setProducts","categories","setCategories","taxClasses","setTaxClasses","loading","setLoading","error","setError","showAddModal","setShowAddModal","editingProduct","setEditingProduct","filters","setFilters","category","stockStatus","search","fetchProducts","fetchCategories","fetchTaxClasses","filterParams","arguments","length","undefined","params","URLSearchParams","append","is_active","stock_quantity","url","concat","toString","response","get","data","results","filter","product","is_low_stock","err","console","handleAddProduct","handleEditProduct","id","handleDeleteProduct","window","confirm","name","delete","handleFilterChange","filterType","value","newFilters","_objectSpread","apiParams","clearFilters","clearedFilters","columns","key","header","render","row","children","className","sku","is_out_of_stock","unit","stock_in_units","stockUnit","is_base_unit","map","quantity","unit_symbol","unit_id","parseFloat","toFixed","size","variant","onClick","role","user_name","username","user_id","print_timestamp","Date","toISOString","print_id","now","Math","random","substr","title","type","printText","onChange","e","target","placeholder","emptyMessage","ProductModal","onClose","onSave","_ref","_product$base_unit","_product$is_active","formData","setFormData","description","tax_class","price","cost_price","min_stock_level","max_stock_level","base_unit","units","setUnits","allUnits","setAllUnits","compatibleUnits","setCompatibleUnits","showUnitSelector","setShowUnitSelector","convertibleUnits","setConvertibleUnits","selectedDisplayUnit","setSelectedDisplayUnit","unitConversions","setUnitConversions","fetchUnits","log","baseUnitsResponse","allUnitsResponse","Promise","all","baseUnits","allUnitsData","allConversions","nextUrl","next","compatible_units","baseUnit","find","parseInt","fetchConvertibleUnits","conversions","baseUnitId","convertible","forEach","conversion","from_unit","u","to_unit","push","symbol","_product$base_unit2","_product$is_active2","getConversionFactor","fromUnitId","toUnitId","conv","conversion_factor","c","convertQuantity","baseQuantity","displayUnitId","factor","convertPrice","basePrice","convertToBaseUnit","displayValue","getAvailableDisplayUnits","availableUnits","cu","hasConversion","some","handleChange","checked","handleDisplayUnitChange","unitId","alert","stock","minStock","maxStock","convertedStock","convertedMinStock","convertedMaxStock","convertedPrice","convertedCostPrice","newFormData","addCompatibleUnit","alreadyAdded","post","is_default","_err$response","_err$response$data","detail","message","removeCompatibleUnit","productUnitId","setDefaultUnit","put","unitToUpdate","handleSubmit","preventDefault","finalFormData","submitData","_err$response2","_err$response2$data","onSubmit","required","rows","taxClass","tax_rate","compatibleUnit","unit_name","disabled","isAlreadyAdded","isBaseUnit","step"],"sources":["/home/el-ifran/WareHouse_Manager/beverage_management_system/src/pages/Inventory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../services/api';\nimport Table from '../components/Table';\nimport Button from '../components/Button';\nimport PrintButton from '../components/PrintButton';\nimport './Inventory.css';\n\nconst Inventory = () => {\n  const { user } = useAuth();\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [taxClasses, setTaxClasses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [filters, setFilters] = useState({\n    category: '',\n    stockStatus: '',\n    search: ''\n  });\n\n  useEffect(() => {\n    fetchProducts();\n    fetchCategories();\n    fetchTaxClasses();\n  }, []);\n\n  const fetchProducts = async (filterParams = {}) => {\n    try {\n      setLoading(true);\n      const params = new URLSearchParams();\n      \n      // Add filters to params\n      if (filterParams.category) params.append('category', filterParams.category);\n      if (filterParams.search) params.append('search', filterParams.search);\n      if (filterParams.is_active !== undefined) params.append('is_active', filterParams.is_active);\n      if (filterParams.stock_quantity !== undefined) params.append('stock_quantity', filterParams.stock_quantity);\n      \n      const url = `/products/${params.toString() ? '?' + params.toString() : ''}`;\n      const response = await api.get(url);\n      let products = response.data.results || response.data;\n      \n      // Handle low stock filter on frontend since it's a calculated field\n      if (filterParams.stockStatus === 'low') {\n        products = products.filter(product => product.is_low_stock);\n      }\n      \n      setProducts(products);\n    } catch (err) {\n      setError('Failed to load products');\n      console.error('Products error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchCategories = async () => {\n    try {\n      const response = await api.get('/products/categories/');\n      setCategories(response.data.results || response.data);\n    } catch (err) {\n      console.error('Categories error:', err);\n    }\n  };\n\n  const fetchTaxClasses = async () => {\n    try {\n      const response = await api.get('/products/tax-classes/');\n      setTaxClasses(response.data.results || response.data);\n    } catch (err) {\n      console.error('Tax classes error:', err);\n    }\n  };\n\n  const handleAddProduct = () => {\n    setEditingProduct(null);\n    setShowAddModal(true);\n  };\n\n  const handleEditProduct = async (product) => {\n    try {\n      // Fetch full product details including cost_price and category ID\n      const response = await api.get(`/products/${product.id}/`);\n      setEditingProduct(response.data);\n      setShowAddModal(true);\n    } catch (err) {\n      setError('Failed to load product details');\n      console.error('Product details error:', err);\n    }\n  };\n\n  const handleDeleteProduct = async (product) => {\n    if (window.confirm(`Are you sure you want to delete ${product.name}?`)) {\n      try {\n        await api.delete(`/products/${product.id}/`);\n        fetchProducts(filters);\n      } catch (err) {\n        setError('Failed to delete product');\n        console.error('Delete error:', err);\n      }\n    }\n  };\n\n  const handleFilterChange = (filterType, value) => {\n    const newFilters = { ...filters, [filterType]: value };\n    setFilters(newFilters);\n    \n    // Convert stock status filter to API parameters\n    const apiParams = { ...newFilters };\n    if (newFilters.stockStatus === 'out') {\n      // For out of stock, filter by stock_quantity = 0\n      apiParams.stock_quantity = 0;\n    }\n    \n    fetchProducts(apiParams);\n  };\n\n  const clearFilters = () => {\n    const clearedFilters = { category: '', stockStatus: '', search: '' };\n    setFilters(clearedFilters);\n    fetchProducts(clearedFilters);\n  };\n\n  const columns = [\n    {\n      key: 'name',\n      header: 'Product Name',\n      render: (value, row) => (\n        <div>\n          <div className=\"product-name\">{value}</div>\n          <div className=\"product-sku\">{row.sku}</div>\n        </div>\n      )\n    },\n    {\n      key: 'category_name',\n      header: 'Category'\n    },\n    {\n      key: 'stock_quantity',\n      header: 'Stock',\n      render: (value, row) => (\n        <div className={`stock-quantity ${row.is_low_stock ? 'low-stock' : ''} ${row.is_out_of_stock ? 'out-of-stock' : ''}`}>\n          {/* Base unit stock */}\n          <div className=\"base-stock\">\n          {value} {row.unit}\n          {row.is_low_stock && <span className=\"stock-warning\">Low</span>}\n          {row.is_out_of_stock && <span className=\"stock-warning\">Out</span>}\n          </div>\n          \n          {/* Stock in other units */}\n          {row.stock_in_units && row.stock_in_units.length > 1 && (\n            <div className=\"stock-in-units\">\n              {row.stock_in_units\n                .filter(stockUnit => !stockUnit.is_base_unit)\n                .map(stockUnit => (\n                  <div key={stockUnit.unit_id} className=\"unit-stock\">\n                    {stockUnit.quantity} {stockUnit.unit_symbol}\n                  </div>\n                ))\n              }\n            </div>\n          )}\n        </div>\n      )\n    },\n    {\n      key: 'price',\n      header: 'Price',\n      render: (value) => `$${parseFloat(value).toFixed(2)}`\n    },\n    {\n      key: 'actions',\n      header: 'Actions',\n      render: (value, row) => (\n        <div className=\"action-buttons\">\n          <Button\n            size=\"small\"\n            variant=\"outline\"\n            onClick={() => handleEditProduct(row)}\n          >\n            Edit\n          </Button>\n          {user?.role === 'admin' && (\n            <Button\n              size=\"small\"\n              variant=\"danger\"\n              onClick={() => handleDeleteProduct(row)}\n            >\n              Delete\n            </Button>\n          )}\n        </div>\n      )\n    }\n  ];\n\n  return (\n    <div className=\"inventory\">\n      <div className=\"inventory-header\">\n        <h1>Inventory Management</h1>\n        <div className=\"header-actions\">\n          <PrintButton\n            data={{\n              ...products,\n              user_name: user?.username || 'Unknown User',\n              user_id: user?.id || 'unknown',\n              print_timestamp: new Date().toISOString(),\n              print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n            }}\n            title=\"Inventory Report\"\n            type=\"inventory\"\n            printText=\"Print Inventory\"\n            className=\"print-inventory-btn\"\n          />\n        <Button onClick={handleAddProduct}>\n          Add Product\n        </Button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"inventory-filters\">\n        <div className=\"filter-group\">\n          <label>Category:</label>\n          <select \n            value={filters.category} \n            onChange={(e) => handleFilterChange('category', e.target.value)}\n          >\n            <option value=\"\">All Categories</option>\n            {categories.map(category => (\n              <option key={category.id} value={category.id}>\n                {category.name}\n              </option>\n            ))}\n          </select>\n        </div>\n        <div className=\"filter-group\">\n          <label>Stock Status:</label>\n          <select \n            value={filters.stockStatus} \n            onChange={(e) => handleFilterChange('stockStatus', e.target.value)}\n          >\n            <option value=\"\">All</option>\n            <option value=\"low\">Low Stock</option>\n            <option value=\"out\">Out of Stock</option>\n          </select>\n        </div>\n        <div className=\"filter-group\">\n          <label>Search:</label>\n          <input\n            type=\"text\"\n            placeholder=\"Search products...\"\n            value={filters.search}\n            onChange={(e) => handleFilterChange('search', e.target.value)}\n          />\n        </div>\n        <div className=\"filter-group\">\n          <Button variant=\"outline\" size=\"small\" onClick={clearFilters}>\n            Clear Filters\n          </Button>\n        </div>\n      </div>\n\n      <Table\n        data={products}\n        columns={columns}\n        loading={loading}\n        emptyMessage=\"No products found\"\n      />\n\n      {showAddModal && (\n        <ProductModal\n          product={editingProduct}\n          categories={categories}\n          taxClasses={taxClasses}\n          onClose={() => setShowAddModal(false)}\n          onSave={() => {\n            setShowAddModal(false);\n            fetchProducts(filters);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nconst ProductModal = ({ product, categories, taxClasses, onClose, onSave }) => {\n  const [formData, setFormData] = useState({\n    name: product?.name || '',\n    description: product?.description || '',\n    category: product?.category || '',\n    tax_class: product?.tax_class || '',\n    sku: product?.sku || '',\n    price: product?.price || '',\n    cost_price: product?.cost_price || '',\n    stock_quantity: product?.stock_quantity || 0,\n    min_stock_level: product?.min_stock_level || 10,\n    max_stock_level: product?.max_stock_level || 1000,\n    base_unit: product?.base_unit?.id || product?.base_unit || '',\n    is_active: product?.is_active ?? true\n  });\n  const [units, setUnits] = useState([]);\n  const [allUnits, setAllUnits] = useState([]);\n  const [compatibleUnits, setCompatibleUnits] = useState([]);\n  const [showUnitSelector, setShowUnitSelector] = useState(false);\n  const [convertibleUnits, setConvertibleUnits] = useState([]);\n  const [selectedDisplayUnit, setSelectedDisplayUnit] = useState(null);\n  const [unitConversions, setUnitConversions] = useState([]);\n\n  // Load base units when component mounts (for product creation/editing)\n  useEffect(() => {\n    const fetchUnits = async () => {\n      try {\n        console.log('=== FETCHING UNITS ===');\n        const [baseUnitsResponse, allUnitsResponse] = await Promise.all([\n          api.get('/products/base-units/'),\n          api.get('/products/units/')\n        ]);\n        \n        console.log('Base units response:', baseUnitsResponse.data);\n        console.log('All units response:', allUnitsResponse.data);\n        \n        const baseUnits = baseUnitsResponse.data.results || baseUnitsResponse.data;\n        const allUnitsData = allUnitsResponse.data.results || allUnitsResponse.data;\n        \n        console.log('Setting base units:', baseUnits);\n        console.log('Setting all units:', allUnitsData);\n        \n        setUnits(baseUnits);\n        setAllUnits(allUnitsData);\n        \n        // Handle pagination for conversions\n        let allConversions = [];\n        let nextUrl = '/products/unit-conversions/';\n        while (nextUrl) {\n          const response = await api.get(nextUrl);\n          const data = response.data;\n          allConversions = allConversions.concat(data.results || data);\n          nextUrl = data.next;\n        }\n        console.log('Setting unit conversions:', allConversions);\n        setUnitConversions(allConversions);\n        console.log('=== UNITS LOADED ===');\n      } catch (err) {\n        console.error('Failed to load units:', err);\n      }\n    };\n    fetchUnits();\n  }, []);\n\n  // Load compatible units when editing a product\n  useEffect(() => {\n    if (product && product.compatible_units) {\n      setCompatibleUnits(product.compatible_units);\n    } else {\n      setCompatibleUnits([]);\n    }\n  }, [product]);\n\n  // Set default display unit when base unit changes\n  useEffect(() => {\n    if (formData.base_unit && allUnits.length > 0) {\n      const baseUnit = allUnits.find(unit => unit.id === parseInt(formData.base_unit));\n      if (baseUnit) {\n        setSelectedDisplayUnit(baseUnit);\n      }\n    }\n  }, [formData.base_unit, allUnits]);\n\n  // Debug: Monitor formData changes\n  useEffect(() => {\n    console.log('FormData changed:', formData);\n  }, [formData]);\n\n  // Debug: Monitor allUnits changes\n  useEffect(() => {\n    console.log('AllUnits changed:', allUnits);\n  }, [allUnits]);\n\n  // Debug: Monitor units changes\n  useEffect(() => {\n    console.log('Units changed:', units);\n  }, [units]);\n\n  // Fetch convertible units when base unit changes\n  useEffect(() => {\n    const fetchConvertibleUnits = async () => {\n      if (formData.base_unit) {\n        try {\n          // Use a unified approach for both new and existing products\n          // Get all unit conversions and find units that can be converted to/from the base unit\n          // Handle pagination to get all conversions\n          let allConversions = [];\n          let nextUrl = '/products/unit-conversions/';\n          \n          while (nextUrl) {\n            const response = await api.get(nextUrl);\n            const data = response.data;\n            allConversions = allConversions.concat(data.results || data);\n            nextUrl = data.next; // Next page URL\n          }\n          \n          const conversions = allConversions;\n          \n          const baseUnitId = parseInt(formData.base_unit);\n          const convertible = [];\n          \n          // Find units that have conversions with the base unit\n          conversions.forEach(conversion => {\n            if (conversion.from_unit === baseUnitId && !convertible.find(u => u.id === conversion.to_unit)) {\n              // Find the unit details\n              const unit = allUnits.find(u => u.id === conversion.to_unit);\n              if (unit) {\n                convertible.push({\n                  id: unit.id,\n                  name: unit.name,\n                  symbol: unit.symbol,\n                  is_base_unit: unit.is_base_unit\n                });\n              }\n            } else if (conversion.to_unit === baseUnitId && !convertible.find(u => u.id === conversion.from_unit)) {\n              // Find the unit details\n              const unit = allUnits.find(u => u.id === conversion.from_unit);\n              if (unit) {\n                convertible.push({\n                  id: unit.id,\n                  name: unit.name,\n                  symbol: unit.symbol,\n                  is_base_unit: unit.is_base_unit\n                });\n              }\n            }\n          });\n          \n          setConvertibleUnits(convertible);\n        } catch (err) {\n          console.error('Failed to fetch convertible units:', err);\n          setConvertibleUnits([]);\n        }\n      } else {\n        setConvertibleUnits([]);\n      }\n    };\n\n    fetchConvertibleUnits();\n  }, [formData.base_unit, allUnits]);\n\n  // Update form data when product changes (for editing)\n  useEffect(() => {\n    if (product) {\n      setFormData({\n        name: product.name || '',\n        description: product.description || '',\n        category: product.category || '',\n        tax_class: product.tax_class || '',\n        sku: product.sku || '',\n        price: product.price || '',\n        cost_price: product.cost_price || '',\n        stock_quantity: product.stock_quantity || 0,\n        min_stock_level: product.min_stock_level || 10,\n        max_stock_level: product.max_stock_level || 1000,\n        base_unit: product.base_unit?.id || product.base_unit || '',\n        is_active: product.is_active ?? true\n      });\n    }\n  }, [product]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Function to get conversion factor between units\n  const getConversionFactor = (fromUnitId, toUnitId) => {\n    if (fromUnitId === toUnitId) return 1;\n    \n    // Look for direct conversion\n    let conversion = unitConversions.find(conv => \n      (conv.from_unit === fromUnitId && conv.to_unit === toUnitId)\n    );\n    \n    if (conversion) {\n      console.log('Found direct conversion:', conversion);\n      return conversion.conversion_factor;\n    }\n    \n    // Look for reverse conversion\n    conversion = unitConversions.find(conv => \n      (conv.from_unit === toUnitId && conv.to_unit === fromUnitId)\n    );\n    \n    if (conversion) {\n      console.log('Found reverse conversion:', conversion);\n      return 1 / conversion.conversion_factor;\n    }\n    \n    console.log('No conversion found between', fromUnitId, 'and', toUnitId);\n    console.log('Available conversions:', unitConversions.map(c => `${c.from_unit}->${c.to_unit}: ${c.conversion_factor}`));\n    return null;\n  };\n\n  // Function to convert quantity from base unit to display unit\n  const convertQuantity = (baseQuantity, baseUnitId, displayUnitId) => {\n    const factor = getConversionFactor(baseUnitId, displayUnitId);\n    return factor ? baseQuantity * factor : baseQuantity;\n  };\n\n  // Function to convert price from base unit to display unit\n  const convertPrice = (basePrice, baseUnitId, displayUnitId) => {\n    const factor = getConversionFactor(displayUnitId, baseUnitId);\n    return factor ? basePrice * factor : basePrice;\n  };\n\n  // Function to convert values back to base unit for saving\n  const convertToBaseUnit = (displayValue, displayUnitId, baseUnitId) => {\n    const factor = getConversionFactor(displayUnitId, baseUnitId);\n    return factor ? displayValue / factor : displayValue;\n  };\n\n  // Function to get available units for display (base unit + compatible units)\n  const getAvailableDisplayUnits = () => {\n    if (!formData.base_unit || allUnits.length === 0) {\n      console.log('No base unit or allUnits empty');\n      return [];\n    }\n    \n    const baseUnit = allUnits.find(unit => unit.id === parseInt(formData.base_unit));\n    if (!baseUnit) {\n      console.log('Base unit not found:', formData.base_unit);\n      return [];\n    }\n    \n    console.log('Base unit found:', baseUnit);\n    console.log('Compatible units:', compatibleUnits);\n    console.log('Unit conversions:', unitConversions.length);\n    \n    const availableUnits = [baseUnit]; // Base unit is always first\n    \n    // Add compatible units that have conversions\n    compatibleUnits.forEach(cu => {\n      const unit = allUnits.find(u => u.id === cu.unit);\n      if (unit && unit.id !== baseUnit.id) { // Don't add base unit again\n        // Check if there's a conversion between base unit and this unit\n        const hasConversion = unitConversions.some(conv => \n          (conv.from_unit === baseUnit.id && conv.to_unit === unit.id) ||\n          (conv.to_unit === baseUnit.id && conv.from_unit === unit.id)\n        );\n        if (hasConversion) {\n          availableUnits.push(unit);\n          console.log('Added compatible unit:', unit);\n        } else {\n          console.log('No conversion found for unit:', unit);\n        }\n      }\n    });\n    \n    console.log('Available display units:', availableUnits);\n    return availableUnits;\n  };\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : value\n    });\n  };\n\n  const handleDisplayUnitChange = (unitId) => {\n    alert(`Display unit changed to: ${unitId}`);\n    const unit = allUnits.find(u => u.id === parseInt(unitId));\n    setSelectedDisplayUnit(unit);\n    \n    console.log('=== DISPLAY UNIT CHANGE ===');\n    console.log('Selected unit:', unit);\n    console.log('Current formData:', formData);\n    \n    // Update form data to show converted values\n    if (unit && formData.base_unit) {\n      const baseUnitId = parseInt(formData.base_unit);\n      const displayUnitId = unit.id;\n      \n      console.log('Converting from base unit', baseUnitId, 'to display unit', displayUnitId);\n      console.log('Current values:', {\n        stock: formData.stock_quantity,\n        price: formData.price,\n        minStock: formData.min_stock_level,\n        maxStock: formData.max_stock_level\n      });\n      \n      // Convert quantities\n      const convertedStock = convertQuantity(\n        parseFloat(formData.stock_quantity || 0), \n        baseUnitId, \n        displayUnitId\n      );\n      const convertedMinStock = convertQuantity(\n        parseFloat(formData.min_stock_level || 0), \n        baseUnitId, \n        displayUnitId\n      );\n      const convertedMaxStock = convertQuantity(\n        parseFloat(formData.max_stock_level || 0), \n        baseUnitId, \n        displayUnitId\n      );\n      \n      // Convert prices\n      const convertedPrice = convertPrice(\n        parseFloat(formData.price || 0), \n        baseUnitId, \n        displayUnitId\n      );\n      const convertedCostPrice = convertPrice(\n        parseFloat(formData.cost_price || 0), \n        baseUnitId, \n        displayUnitId\n      );\n      \n      console.log('Converted values:', {\n        stock: convertedStock,\n        price: convertedPrice,\n        minStock: convertedMinStock,\n        maxStock: convertedMaxStock\n      });\n      \n      // Update form data with converted values\n      const newFormData = {\n        ...formData,\n        stock_quantity: convertedStock.toFixed(2),\n        min_stock_level: convertedMinStock.toFixed(2),\n        max_stock_level: convertedMaxStock.toFixed(2),\n        price: convertedPrice.toFixed(2),\n        cost_price: convertedCostPrice.toFixed(2)\n      };\n      \n      console.log('New formData:', newFormData);\n      setFormData(newFormData);\n      console.log('=== END DISPLAY UNIT CHANGE ===');\n    }\n  };\n\n  const addCompatibleUnit = async (unitId) => {\n    if (!product) return;\n    \n    // Check if the unit is already the base unit\n    if (parseInt(unitId) === parseInt(formData.base_unit)) {\n      alert('Cannot add the base unit as a compatible unit.');\n      return;\n    }\n    \n    // Check if the unit is already added\n    const alreadyAdded = compatibleUnits.some(cu => cu.unit === parseInt(unitId));\n    if (alreadyAdded) {\n      alert('This unit is already added as a compatible unit.');\n      return;\n    }\n    \n    try {\n      const response = await api.post(`/products/${product.id}/units/`, {\n        unit: parseInt(unitId),\n        is_default: false,\n        is_active: true\n      });\n      \n      setCompatibleUnits([...compatibleUnits, response.data]);\n      setShowUnitSelector(false);\n    } catch (err) {\n      console.error('Failed to add compatible unit:', err);\n      alert(`Failed to add compatible unit: ${err.response?.data?.detail || err.message}`);\n    }\n  };\n\n  const removeCompatibleUnit = async (productUnitId) => {\n    if (!product) return;\n    \n    try {\n      await api.delete(`/products/${product.id}/units/${productUnitId}/`);\n      setCompatibleUnits(compatibleUnits.filter(cu => cu.id !== productUnitId));\n    } catch (err) {\n      console.error('Failed to remove compatible unit:', err);\n    }\n  };\n\n  const setDefaultUnit = async (productUnitId) => {\n    if (!product) return;\n    \n    try {\n      // First, set all units to non-default\n      for (const cu of compatibleUnits) {\n        if (cu.is_default) {\n          await api.put(`/products/${product.id}/units/${cu.id}/`, {\n            ...cu,\n            is_default: false\n          });\n        }\n      }\n      \n      // Then set the selected unit as default\n      const unitToUpdate = compatibleUnits.find(cu => cu.id === productUnitId);\n      if (unitToUpdate) {\n        await api.put(`/products/${product.id}/units/${productUnitId}/`, {\n          ...unitToUpdate,\n          is_default: true\n        });\n        \n        // Update local state\n        setCompatibleUnits(compatibleUnits.map(cu => ({\n          ...cu,\n          is_default: cu.id === productUnitId\n        })));\n      }\n    } catch (err) {\n      console.error('Failed to set default unit:', err);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      // Convert values back to base unit if a display unit is selected\n      let finalFormData = { ...formData };\n      \n      if (selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit)) {\n        const baseUnitId = parseInt(formData.base_unit);\n        const displayUnitId = selectedDisplayUnit.id;\n        \n        // Convert back to base unit\n        finalFormData = {\n          ...formData,\n          stock_quantity: convertToBaseUnit(\n            parseFloat(formData.stock_quantity || 0), \n            displayUnitId, \n            baseUnitId\n          ).toString(),\n          min_stock_level: convertToBaseUnit(\n            parseFloat(formData.min_stock_level || 0), \n            displayUnitId, \n            baseUnitId\n          ).toString(),\n          max_stock_level: convertToBaseUnit(\n            parseFloat(formData.max_stock_level || 0), \n            displayUnitId, \n            baseUnitId\n          ).toString(),\n          price: convertToBaseUnit(\n            parseFloat(formData.price || 0), \n            displayUnitId, \n            baseUnitId\n          ).toString(),\n          cost_price: convertToBaseUnit(\n            parseFloat(formData.cost_price || 0), \n            displayUnitId, \n            baseUnitId\n          ).toString()\n        };\n      }\n\n      // Prepare data for submission\n      const submitData = {\n        ...finalFormData,\n        base_unit: finalFormData.base_unit ? parseInt(finalFormData.base_unit) : null\n      };\n\n      if (product) {\n        await api.put(`/products/${product.id}/`, submitData);\n      } else {\n        await api.post('/products/', submitData);\n      }\n      onSave();\n    } catch (err) {\n      setError(err.response?.data?.detail || 'Failed to save product');\n      console.error('Save error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-overlay\">\n      <div className=\"modal\">\n        <div className=\"modal-header\">\n          <h2>{product ? 'Edit Product' : 'Add Product'}</h2>\n          <button className=\"modal-close\" onClick={onClose}></button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"modal-form\">\n          {error && (\n            <div className=\"error-message\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Product Name *</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>SKU *</label>\n              <input\n                type=\"text\"\n                name=\"sku\"\n                value={formData.sku}\n                onChange={handleChange}\n                required\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Description</label>\n            <textarea\n              name=\"description\"\n              value={formData.description}\n              onChange={handleChange}\n              rows=\"3\"\n            />\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Category *</label>\n              <select\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                required\n              >\n                <option value=\"\">Select Category</option>\n                {categories.map(category => (\n                  <option key={category.id} value={category.id}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"form-group\">\n              <label>Tax Class</label>\n              <select\n                name=\"tax_class\"\n                value={formData.tax_class}\n                onChange={handleChange}\n              >\n                <option value=\"\">No Tax Class</option>\n                {taxClasses.map(taxClass => (\n                  <option key={taxClass.id} value={taxClass.id}>\n                    {taxClass.name} ({taxClass.tax_rate}%)\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Base Unit</label>\n              <select\n                name=\"base_unit\"\n                value={formData.base_unit}\n                onChange={handleChange}\n                required\n              >\n                <option value=\"\">Select Base Unit</option>\n                {units.map(unit => (\n                  <option key={unit.id} value={unit.id}>\n                    {unit.name} ({unit.symbol})\n                  </option>\n                ))}\n              </select>\n            </div>\n            \n            {/* Display Unit Selector - TEMPORARILY ALWAYS SHOW FOR DEBUGGING */}\n            {formData.base_unit && (\n              <div className=\"form-group\">\n                <label>Display Unit</label>\n                <select\n                  value={selectedDisplayUnit?.id || ''}\n                  onChange={(e) => handleDisplayUnitChange(e.target.value)}\n                >\n                  {getAvailableDisplayUnits().map(unit => (\n                    <option key={unit.id} value={unit.id}>\n                      {unit.name} ({unit.symbol})\n                    </option>\n                  ))}\n                </select>\n                <small className=\"form-help\">\n                  Select a unit to view quantities and prices in that unit\n                </small>\n              </div>\n            )}\n          </div>\n\n          {/* Compatible Units Section - Only show when editing existing product */}\n          {product && (\n            <div className=\"form-row\">\n              <div className=\"form-group\">\n                <label>Compatible Units</label>\n                <p className=\"compatible-units-note\">\n                  Only units that can be converted to/from the base unit can be added as compatible units.\n                </p>\n                <div className=\"compatible-units-section\">\n                  {compatibleUnits.length > 0 ? (\n                    <div className=\"compatible-units-list\">\n                      {compatibleUnits.map(compatibleUnit => (\n                        <div key={compatibleUnit.id} className=\"compatible-unit-item\">\n                          <div className=\"unit-info\">\n                            <span className=\"unit-name\">\n                              {compatibleUnit.unit_name} ({compatibleUnit.unit_symbol})\n                            </span>\n                            {compatibleUnit.is_default && (\n                              <span className=\"default-badge\">Default</span>\n                            )}\n                          </div>\n                          <div className=\"unit-actions\">\n                            {!compatibleUnit.is_default && (\n                              <Button\n                                size=\"small\"\n                                variant=\"outline\"\n                                onClick={() => setDefaultUnit(compatibleUnit.id)}\n                              >\n                                Set Default\n                              </Button>\n                            )}\n                            <Button\n                              size=\"small\"\n                              variant=\"danger\"\n                              onClick={() => removeCompatibleUnit(compatibleUnit.id)}\n                            >\n                              Remove\n                            </Button>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"no-units-message\">No compatible units added yet.</p>\n                  )}\n                  \n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowUnitSelector(true)}\n                    className=\"add-unit-button\"\n                    disabled={!formData.base_unit || convertibleUnits.filter(unit => {\n                      const isAlreadyAdded = compatibleUnits.some(cu => cu.unit === unit.id);\n                      const isBaseUnit = unit.id === parseInt(formData.base_unit);\n                      return !isAlreadyAdded && !isBaseUnit;\n                    }).length === 0}\n                  >\n                    + Add Compatible Unit\n                    {!formData.base_unit && \" (Select base unit first)\"}\n                    {formData.base_unit && convertibleUnits.filter(unit => {\n                      const isAlreadyAdded = compatibleUnits.some(cu => cu.unit === unit.id);\n                      const isBaseUnit = unit.id === parseInt(formData.base_unit);\n                      return !isAlreadyAdded && !isBaseUnit;\n                    }).length === 0 && \" (No convertible units)\"}\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Price * {selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit) && `(per ${selectedDisplayUnit.name})`}</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                name=\"price\"\n                value={formData.price}\n                onChange={handleChange}\n                required\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Cost Price {selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit) && `(per ${selectedDisplayUnit.name})`}</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                name=\"cost_price\"\n                value={formData.cost_price}\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group\">\n              <label>Stock Quantity {selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit) && `(${selectedDisplayUnit.name})`}</label>\n              <input\n                type=\"number\"\n                name=\"stock_quantity\"\n                value={formData.stock_quantity}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Min Stock Level {selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit) && `(${selectedDisplayUnit.name})`}</label>\n              <input\n                type=\"number\"\n                name=\"min_stock_level\"\n                value={formData.min_stock_level}\n                onChange={handleChange}\n              />\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label>Max Stock Level {selectedDisplayUnit && selectedDisplayUnit.id !== parseInt(formData.base_unit) && `(${selectedDisplayUnit.name})`}</label>\n            <input\n              type=\"number\"\n              name=\"max_stock_level\"\n              value={formData.max_stock_level}\n              onChange={handleChange}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label>\n              <input\n                type=\"checkbox\"\n                name=\"is_active\"\n                checked={formData.is_active}\n                onChange={handleChange}\n              />\n              Active\n            </label>\n          </div>\n\n          <div className=\"modal-actions\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" loading={loading}>\n              {product ? 'Update' : 'Create'}\n            </Button>\n          </div>\n        </form>\n      </div>\n\n      {/* Unit Selector Modal */}\n      {showUnitSelector && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content unit-selector-modal\">\n            <div className=\"modal-header\">\n              <h3>Add Compatible Unit</h3>\n              <button \n                className=\"modal-close\" \n                onClick={() => setShowUnitSelector(false)}\n              >\n                \n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <p>Select a unit to add as compatible for this product:</p>\n              <p className=\"unit-selector-note\">\n                Only units that can be converted to/from the base unit are shown.\n              </p>\n              <div className=\"unit-selector-list\">\n                {convertibleUnits\n                  .filter(unit => {\n                    const isAlreadyAdded = compatibleUnits.some(cu => cu.unit === unit.id);\n                    const isBaseUnit = unit.id === parseInt(formData.base_unit);\n                    return !isAlreadyAdded && !isBaseUnit;\n                  })\n                  .map(unit => (\n                    <div \n                      key={unit.id} \n                      className=\"unit-selector-item\"\n                      onClick={() => addCompatibleUnit(unit.id)}\n                    >\n                      <div className=\"unit-info\">\n                        <span className=\"unit-name\">{unit.name}</span>\n                        <span className=\"unit-symbol\">({unit.symbol})</span>\n                        {unit.is_base_unit && (\n                          <span className=\"base-unit-badge\">Base Unit</span>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                }\n                {convertibleUnits.filter(unit => \n                  !compatibleUnits.some(cu => cu.unit === unit.id) && unit.id !== parseInt(formData.base_unit)\n                ).length === 0 && (\n                  <p className=\"no-units-available\">\n                    {formData.base_unit \n                      ? \"No convertible units available for the selected base unit.\" \n                      : \"Please select a base unit first.\"\n                    }\n                  </p>\n                )}\n              </div>\n            </div>\n            <div className=\"modal-actions\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={() => setShowUnitSelector(false)}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Inventory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}