{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import Button from'./Button';import'./Navbar.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Navbar=()=>{const{user,logout,isAuthenticated,isSales}=useAuth();const navigate=useNavigate();const[isMenuOpen,setIsMenuOpen]=useState(false);const[activeDropdown,setActiveDropdown]=useState(null);const navbarRef=useRef(null);const handleLogout=()=>{logout();navigate('/login');};const toggleMenu=()=>{setIsMenuOpen(!isMenuOpen);};const toggleDropdown=category=>{setActiveDropdown(activeDropdown===category?null:category);};// Close dropdowns when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(navbarRef.current&&!navbarRef.current.contains(event.target)){setActiveDropdown(null);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);const navigationCategories={sales:{title:'Sales',icon:'💰',items:[{name:'Point of Sale',path:'/pos',icon:'🛒'},{name:'Sales Management',path:'/sales-management',icon:'📊',adminOnly:true}]},purchases:{title:'Purchases',icon:'📦',items:[{name:'Purchase Orders',path:'/purchase-orders',icon:'📋'},{name:'Suppliers',path:'/suppliers',icon:'🏢'}],salesHidden:true// Hide entire purchases section for sales users\n},inventory:{title:'Inventory',icon:'📦',items:[{name:'Inventory Management',path:'/inventory',icon:'📦'}],salesHidden:true// Hide entire inventory section for sales users\n},administration:{title:'Administration',icon:'⚙️',items:[{name:'Users',path:'/users',icon:'👥',adminOnly:true},{name:'Tax Management',path:'/tax-management',icon:'📊',adminOnly:true},{name:'System Management',path:'/system-management',icon:'🔧',adminOnly:true},{name:'Printer Settings',path:'/printer-settings',icon:'🖨️',adminOnly:true},{name:'Stock Movement',path:'/stock-movement',icon:'📦',adminOnly:true},{name:'Reports',path:'/reports',icon:'📈',adminOnly:true}],salesHidden:true// Hide entire administration section for sales users\n}};return/*#__PURE__*/_jsx(\"nav\",{className:\"navbar\",ref:navbarRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Beverage Manager\"})}),isAuthenticated&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-menu \".concat(isMenuOpen?'active':''),children:[/*#__PURE__*/_jsxs(Link,{to:\"/dashboard\",className:\"navbar-link dashboard-link\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"nav-icon\",children:\"\\uD83C\\uDFE0\"}),\"Dashboard\"]}),Object.entries(navigationCategories).map(_ref=>{let[key,category]=_ref;// Hide entire category for sales users if marked as salesHidden\nif(isSales&&category.salesHidden){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-dropdown\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"navbar-dropdown-toggle\",onClick:()=>toggleDropdown(key),children:[/*#__PURE__*/_jsx(\"span\",{className:\"nav-icon\",children:category.icon}),category.title,/*#__PURE__*/_jsx(\"span\",{className:\"dropdown-arrow \".concat(activeDropdown===key?'active':''),children:\"\\u25BC\"})]}),activeDropdown===key&&/*#__PURE__*/_jsx(\"div\",{className:\"navbar-dropdown-menu\",children:category.items.map((item,index)=>{// Check if user has permission for this item\nif(item.adminOnly&&!((user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager')){return null;}if(item.adminOnly&&item.name==='Reports'&&(user===null||user===void 0?void 0:user.role)!=='admin'){return null;}return/*#__PURE__*/_jsxs(Link,{to:item.path,className:\"navbar-dropdown-link\",onClick:()=>setActiveDropdown(null),children:[/*#__PURE__*/_jsx(\"span\",{className:\"nav-icon\",children:item.icon}),item.name]},index);})})]},key);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:user===null||user===void 0?void 0:user.username}),/*#__PURE__*/_jsx(\"span\",{className:\"user-role\",children:user===null||user===void 0?void 0:user.role})]}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:handleLogout,children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"navbar-toggle\",onClick:toggleMenu,\"aria-label\":\"Toggle menu\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]})]})});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","useAuth","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","user","logout","isAuthenticated","isSales","navigate","isMenuOpen","setIsMenuOpen","activeDropdown","setActiveDropdown","navbarRef","handleLogout","toggleMenu","toggleDropdown","category","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","navigationCategories","sales","title","icon","items","name","path","adminOnly","purchases","salesHidden","inventory","administration","className","ref","children","to","concat","Object","entries","map","_ref","key","onClick","item","index","role","username","variant","size"],"sources":["/home/el-ifran/WareHouse_Manager/beverage_management_system/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport Button from './Button';\nimport './Navbar.css';\n\nconst Navbar = () => {\n  const { user, logout, isAuthenticated, isSales } = useAuth();\n  const navigate = useNavigate();\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [activeDropdown, setActiveDropdown] = useState(null);\n  const navbarRef = useRef(null);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login');\n  };\n\n  const toggleMenu = () => {\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  const toggleDropdown = (category) => {\n    setActiveDropdown(activeDropdown === category ? null : category);\n  };\n\n  // Close dropdowns when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (navbarRef.current && !navbarRef.current.contains(event.target)) {\n        setActiveDropdown(null);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const navigationCategories = {\n    sales: {\n      title: 'Sales',\n      icon: '💰',\n      items: [\n        { name: 'Point of Sale', path: '/pos', icon: '🛒' },\n        { name: 'Sales Management', path: '/sales-management', icon: '📊', adminOnly: true }\n      ]\n    },\n    purchases: {\n      title: 'Purchases',\n      icon: '📦',\n      items: [\n        { name: 'Purchase Orders', path: '/purchase-orders', icon: '📋' },\n        { name: 'Suppliers', path: '/suppliers', icon: '🏢' }\n      ],\n      salesHidden: true // Hide entire purchases section for sales users\n    },\n    inventory: {\n      title: 'Inventory',\n      icon: '📦',\n      items: [\n        { name: 'Inventory Management', path: '/inventory', icon: '📦' }\n      ],\n      salesHidden: true // Hide entire inventory section for sales users\n    },\n    administration: {\n      title: 'Administration',\n      icon: '⚙️',\n      items: [\n        { name: 'Users', path: '/users', icon: '👥', adminOnly: true },\n        { name: 'Tax Management', path: '/tax-management', icon: '📊', adminOnly: true },\n        { name: 'System Management', path: '/system-management', icon: '🔧', adminOnly: true },\n        { name: 'Printer Settings', path: '/printer-settings', icon: '🖨️', adminOnly: true },\n        { name: 'Stock Movement', path: '/stock-movement', icon: '📦', adminOnly: true },\n        { name: 'Reports', path: '/reports', icon: '📈', adminOnly: true }\n      ],\n      salesHidden: true // Hide entire administration section for sales users\n    }\n  };\n\n  return (\n    <nav className=\"navbar\" ref={navbarRef}>\n      <div className=\"navbar-container\">\n        <Link to=\"/\" className=\"navbar-brand\">\n          <h1>Beverage Manager</h1>\n        </Link>\n\n        {isAuthenticated && (\n          <>\n            <div className={`navbar-menu ${isMenuOpen ? 'active' : ''}`}>\n              <Link to=\"/dashboard\" className=\"navbar-link dashboard-link\">\n                <span className=\"nav-icon\">🏠</span>\n                Dashboard\n              </Link>\n              \n              {Object.entries(navigationCategories).map(([key, category]) => {\n                // Hide entire category for sales users if marked as salesHidden\n                if (isSales && category.salesHidden) {\n                  return null;\n                }\n                \n                return (\n                  <div key={key} className=\"navbar-dropdown\">\n                    <button \n                      className=\"navbar-dropdown-toggle\"\n                      onClick={() => toggleDropdown(key)}\n                    >\n                      <span className=\"nav-icon\">{category.icon}</span>\n                      {category.title}\n                      <span className={`dropdown-arrow ${activeDropdown === key ? 'active' : ''}`}>▼</span>\n                    </button>\n                    \n                    {activeDropdown === key && (\n                      <div className=\"navbar-dropdown-menu\">\n                        {category.items.map((item, index) => {\n                          // Check if user has permission for this item\n                          if (item.adminOnly && !(user?.role === 'admin' || user?.role === 'manager')) {\n                            return null;\n                          }\n                          if (item.adminOnly && item.name === 'Reports' && user?.role !== 'admin') {\n                            return null;\n                          }\n                          \n                          return (\n                            <Link \n                              key={index}\n                              to={item.path} \n                              className=\"navbar-dropdown-link\"\n                              onClick={() => setActiveDropdown(null)}\n                            >\n                              <span className=\"nav-icon\">{item.icon}</span>\n                              {item.name}\n                            </Link>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n\n            <div className=\"navbar-user\">\n              <div className=\"user-info\">\n                <span className=\"user-name\">{user?.username}</span>\n                <span className=\"user-role\">{user?.role}</span>\n              </div>\n              <Button \n                variant=\"outline\" \n                size=\"small\" \n                onClick={handleLogout}\n              >\n                Logout\n              </Button>\n            </div>\n\n            <button \n              className=\"navbar-toggle\"\n              onClick={toggleMenu}\n              aria-label=\"Toggle menu\"\n            >\n              <span></span>\n              <span></span>\n              <span></span>\n            </button>\n          </>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtB,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAEC,IAAI,CAAEC,MAAM,CAAEC,eAAe,CAAEC,OAAQ,CAAC,CAAGZ,OAAO,CAAC,CAAC,CAC5D,KAAM,CAAAa,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACe,UAAU,CAAEC,aAAa,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACqB,cAAc,CAAEC,iBAAiB,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAC1D,KAAM,CAAAuB,SAAS,CAAGrB,MAAM,CAAC,IAAI,CAAC,CAE9B,KAAM,CAAAsB,YAAY,CAAGA,CAAA,GAAM,CACzBT,MAAM,CAAC,CAAC,CACRG,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,KAAM,CAAAO,UAAU,CAAGA,CAAA,GAAM,CACvBL,aAAa,CAAC,CAACD,UAAU,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAO,cAAc,CAAIC,QAAQ,EAAK,CACnCL,iBAAiB,CAACD,cAAc,GAAKM,QAAQ,CAAG,IAAI,CAAGA,QAAQ,CAAC,CAClE,CAAC,CAED;AACA1B,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2B,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIN,SAAS,CAACO,OAAO,EAAI,CAACP,SAAS,CAACO,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAClEV,iBAAiB,CAAC,IAAI,CAAC,CACzB,CACF,CAAC,CAEDW,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEN,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACXK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEP,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,oBAAoB,CAAG,CAC3BC,KAAK,CAAE,CACLC,KAAK,CAAE,OAAO,CACdC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,CACL,CAAEC,IAAI,CAAE,eAAe,CAAEC,IAAI,CAAE,MAAM,CAAEH,IAAI,CAAE,IAAK,CAAC,CACnD,CAAEE,IAAI,CAAE,kBAAkB,CAAEC,IAAI,CAAE,mBAAmB,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CAExF,CAAC,CACDC,SAAS,CAAE,CACTN,KAAK,CAAE,WAAW,CAClBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,CACL,CAAEC,IAAI,CAAE,iBAAiB,CAAEC,IAAI,CAAE,kBAAkB,CAAEH,IAAI,CAAE,IAAK,CAAC,CACjE,CAAEE,IAAI,CAAE,WAAW,CAAEC,IAAI,CAAE,YAAY,CAAEH,IAAI,CAAE,IAAK,CAAC,CACtD,CACDM,WAAW,CAAE,IAAK;AACpB,CAAC,CACDC,SAAS,CAAE,CACTR,KAAK,CAAE,WAAW,CAClBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,CACL,CAAEC,IAAI,CAAE,sBAAsB,CAAEC,IAAI,CAAE,YAAY,CAAEH,IAAI,CAAE,IAAK,CAAC,CACjE,CACDM,WAAW,CAAE,IAAK;AACpB,CAAC,CACDE,cAAc,CAAE,CACdT,KAAK,CAAE,gBAAgB,CACvBC,IAAI,CAAE,IAAI,CACVC,KAAK,CAAE,CACL,CAAEC,IAAI,CAAE,OAAO,CAAEC,IAAI,CAAE,QAAQ,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CAC9D,CAAEF,IAAI,CAAE,gBAAgB,CAAEC,IAAI,CAAE,iBAAiB,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CAChF,CAAEF,IAAI,CAAE,mBAAmB,CAAEC,IAAI,CAAE,oBAAoB,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CACtF,CAAEF,IAAI,CAAE,kBAAkB,CAAEC,IAAI,CAAE,mBAAmB,CAAEH,IAAI,CAAE,KAAK,CAAEI,SAAS,CAAE,IAAK,CAAC,CACrF,CAAEF,IAAI,CAAE,gBAAgB,CAAEC,IAAI,CAAE,iBAAiB,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CAChF,CAAEF,IAAI,CAAE,SAAS,CAAEC,IAAI,CAAE,UAAU,CAAEH,IAAI,CAAE,IAAI,CAAEI,SAAS,CAAE,IAAK,CAAC,CACnE,CACDE,WAAW,CAAE,IAAK;AACpB,CACF,CAAC,CAED,mBACErC,IAAA,QAAKwC,SAAS,CAAC,QAAQ,CAACC,GAAG,CAAE1B,SAAU,CAAA2B,QAAA,cACrCxC,KAAA,QAAKsC,SAAS,CAAC,kBAAkB,CAAAE,QAAA,eAC/B1C,IAAA,CAACL,IAAI,EAACgD,EAAE,CAAC,GAAG,CAACH,SAAS,CAAC,cAAc,CAAAE,QAAA,cACnC1C,IAAA,OAAA0C,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACrB,CAAC,CAENlC,eAAe,eACdN,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACExC,KAAA,QAAKsC,SAAS,gBAAAI,MAAA,CAAiBjC,UAAU,CAAG,QAAQ,CAAG,EAAE,CAAG,CAAA+B,QAAA,eAC1DxC,KAAA,CAACP,IAAI,EAACgD,EAAE,CAAC,YAAY,CAACH,SAAS,CAAC,4BAA4B,CAAAE,QAAA,eAC1D1C,IAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAE,QAAA,CAAC,cAAE,CAAM,CAAC,YAEtC,EAAM,CAAC,CAENG,MAAM,CAACC,OAAO,CAAClB,oBAAoB,CAAC,CAACmB,GAAG,CAACC,IAAA,EAAqB,IAApB,CAACC,GAAG,CAAE9B,QAAQ,CAAC,CAAA6B,IAAA,CACxD;AACA,GAAIvC,OAAO,EAAIU,QAAQ,CAACkB,WAAW,CAAE,CACnC,MAAO,KAAI,CACb,CAEA,mBACEnC,KAAA,QAAesC,SAAS,CAAC,iBAAiB,CAAAE,QAAA,eACxCxC,KAAA,WACEsC,SAAS,CAAC,wBAAwB,CAClCU,OAAO,CAAEA,CAAA,GAAMhC,cAAc,CAAC+B,GAAG,CAAE,CAAAP,QAAA,eAEnC1C,IAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAE,QAAA,CAAEvB,QAAQ,CAACY,IAAI,CAAO,CAAC,CAChDZ,QAAQ,CAACW,KAAK,cACf9B,IAAA,SAAMwC,SAAS,mBAAAI,MAAA,CAAoB/B,cAAc,GAAKoC,GAAG,CAAG,QAAQ,CAAG,EAAE,CAAG,CAAAP,QAAA,CAAC,QAAC,CAAM,CAAC,EAC/E,CAAC,CAER7B,cAAc,GAAKoC,GAAG,eACrBjD,IAAA,QAAKwC,SAAS,CAAC,sBAAsB,CAAAE,QAAA,CAClCvB,QAAQ,CAACa,KAAK,CAACe,GAAG,CAAC,CAACI,IAAI,CAAEC,KAAK,GAAK,CACnC;AACA,GAAID,IAAI,CAAChB,SAAS,EAAI,EAAE,CAAA7B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE+C,IAAI,IAAK,OAAO,EAAI,CAAA/C,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE+C,IAAI,IAAK,SAAS,CAAC,CAAE,CAC3E,MAAO,KAAI,CACb,CACA,GAAIF,IAAI,CAAChB,SAAS,EAAIgB,IAAI,CAAClB,IAAI,GAAK,SAAS,EAAI,CAAA3B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE+C,IAAI,IAAK,OAAO,CAAE,CACvE,MAAO,KAAI,CACb,CAEA,mBACEnD,KAAA,CAACP,IAAI,EAEHgD,EAAE,CAAEQ,IAAI,CAACjB,IAAK,CACdM,SAAS,CAAC,sBAAsB,CAChCU,OAAO,CAAEA,CAAA,GAAMpC,iBAAiB,CAAC,IAAI,CAAE,CAAA4B,QAAA,eAEvC1C,IAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAE,QAAA,CAAES,IAAI,CAACpB,IAAI,CAAO,CAAC,CAC5CoB,IAAI,CAAClB,IAAI,GANLmB,KAOD,CAAC,CAEX,CAAC,CAAC,CACC,CACN,GAlCOH,GAmCL,CAAC,CAEV,CAAC,CAAC,EACC,CAAC,cAEN/C,KAAA,QAAKsC,SAAS,CAAC,aAAa,CAAAE,QAAA,eAC1BxC,KAAA,QAAKsC,SAAS,CAAC,WAAW,CAAAE,QAAA,eACxB1C,IAAA,SAAMwC,SAAS,CAAC,WAAW,CAAAE,QAAA,CAAEpC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEgD,QAAQ,CAAO,CAAC,cACnDtD,IAAA,SAAMwC,SAAS,CAAC,WAAW,CAAAE,QAAA,CAAEpC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE+C,IAAI,CAAO,CAAC,EAC5C,CAAC,cACNrD,IAAA,CAACF,MAAM,EACLyD,OAAO,CAAC,SAAS,CACjBC,IAAI,CAAC,OAAO,CACZN,OAAO,CAAElC,YAAa,CAAA0B,QAAA,CACvB,QAED,CAAQ,CAAC,EACN,CAAC,cAENxC,KAAA,WACEsC,SAAS,CAAC,eAAe,CACzBU,OAAO,CAAEjC,UAAW,CACpB,aAAW,aAAa,CAAAyB,QAAA,eAExB1C,IAAA,UAAY,CAAC,cACbA,IAAA,UAAY,CAAC,cACbA,IAAA,UAAY,CAAC,EACP,CAAC,EACT,CACH,EACE,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAK,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}