{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-admin-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{useAuth}from'../contexts/AuthContext';import{useApi}from'../hooks/useApi';import Button from'../components/Button';import Table from'../components/Table';import'./SystemManagement.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SystemManagement=()=>{const{t}=useTranslation();const{user}=useAuth();const api=useApi();// State for different management sections\nconst[activeTab,setActiveTab]=useState('taxes');const[loading,setLoading]=useState(true);const[error,setError]=useState('');// Tax Classes State\nconst[taxClasses,setTaxClasses]=useState([]);const[showTaxModal,setShowTaxModal]=useState(false);const[editingTaxClass,setEditingTaxClass]=useState(null);const[taxFormData,setTaxFormData]=useState({name:'',description:'',tax_rate:'',is_active:true});// Categories State\nconst[categories,setCategories]=useState([]);const[showCategoryModal,setShowCategoryModal]=useState(false);const[editingCategory,setEditingCategory]=useState(null);const[categoryFormData,setCategoryFormData]=useState({name:'',description:'',is_active:true});// Units State\nconst[units,setUnits]=useState([]);const[filteredUnits,setFilteredUnits]=useState([]);const[unitSearchTerm,setUnitSearchTerm]=useState('');const[showUnitModal,setShowUnitModal]=useState(false);const[editingUnit,setEditingUnit]=useState(null);const[unitFormData,setUnitFormData]=useState({name:'',symbol:'',is_base_unit:false,is_active:true});// Unit Conversions State\nconst[unitConversions,setUnitConversions]=useState([]);const[filteredConversions,setFilteredConversions]=useState([]);const[conversionSearchTerm,setConversionSearchTerm]=useState('');const[showConversionModal,setShowConversionModal]=useState(false);const[editingConversion,setEditingConversion]=useState(null);const[conversionFormData,setConversionFormData]=useState({from_unit:'',to_unit:'',conversion_factor:'',is_active:true});// Packagings State\nconst[packagings,setPackagings]=useState([]);const[showPackagingModal,setShowPackagingModal]=useState(false);const[editingPackaging,setEditingPackaging]=useState(null);const[packagingFormData,setPackagingFormData]=useState({name:'',price:'',description:'',is_active:true});// Check if user has permission to manage\nconst canManage=(user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager';useEffect(()=>{if(canManage){fetchAllData();}},[canManage]);// eslint-disable-line react-hooks/exhaustive-deps\n// Filter conversions based on search term\nuseEffect(()=>{if(!conversionSearchTerm.trim()){setFilteredConversions(unitConversions);}else{const filtered=unitConversions.filter(conversion=>{const searchLower=conversionSearchTerm.toLowerCase();return conversion.from_unit_name&&conversion.from_unit_name.toLowerCase().includes(searchLower)||conversion.from_unit_symbol&&conversion.from_unit_symbol.toLowerCase().includes(searchLower)||conversion.to_unit_name&&conversion.to_unit_name.toLowerCase().includes(searchLower)||conversion.to_unit_symbol&&conversion.to_unit_symbol.toLowerCase().includes(searchLower)||conversion.conversion_factor.toString().includes(searchLower);});setFilteredConversions(filtered);}},[unitConversions,conversionSearchTerm]);// Filter units based on search term\nuseEffect(()=>{if(!unitSearchTerm.trim()){setFilteredUnits(units);}else{const filtered=units.filter(unit=>{const searchLower=unitSearchTerm.toLowerCase();return unit.name&&unit.name.toLowerCase().includes(searchLower)||unit.symbol&&unit.symbol.toLowerCase().includes(searchLower)||unit.is_base_unit&&'base unit'.includes(searchLower)||unit.is_active&&'active'.includes(searchLower)||!unit.is_active&&'inactive'.includes(searchLower);});setFilteredUnits(filtered);}},[units,unitSearchTerm]);const fetchAllData=async()=>{setLoading(true);try{await Promise.all([fetchTaxClasses(),fetchCategories(),fetchUnits(),fetchUnitConversions(),fetchPackagings()]);}catch(err){setError('Failed to load data');}finally{setLoading(false);}};// Tax Classes Functions\nconst fetchTaxClasses=async()=>{try{const response=await api.get('/api/products/tax-classes/');setTaxClasses(response.data.results||response.data);}catch(err){console.error('Tax classes error:',err);}};const validateTaxClass=data=>{const errors=[];// Check if name is provided\nif(!data.name||data.name.trim()===''){errors.push('Tax class name is required');}// Check if tax rate is provided and valid\nif(!data.tax_rate||data.tax_rate===''){errors.push('Tax rate is required');}else{const rate=parseFloat(data.tax_rate);if(isNaN(rate)){errors.push('Tax rate must be a valid number');}else if(rate<0){errors.push('Tax rate cannot be negative');}else if(rate>100){errors.push('Tax rate cannot exceed 100%');}}// Check for duplicate name (only for new tax classes)\nif(!editingTaxClass){const existingTaxClass=taxClasses.find(taxClass=>taxClass.name.toLowerCase()===data.name.toLowerCase());if(existingTaxClass){errors.push('A tax class with this name already exists');}}return errors;};const handleTaxSubmit=async e=>{e.preventDefault();setError('');try{// Validate the tax class data\nconst validationErrors=validateTaxClass(taxFormData);if(validationErrors.length>0){setError(validationErrors.join('. '));return;}if(editingTaxClass){await api.put(\"/api/products/tax-classes/\".concat(editingTaxClass.id,\"/\"),taxFormData);}else{await api.post('/api/products/tax-classes/',taxFormData);}setShowTaxModal(false);setEditingTaxClass(null);setTaxFormData({name:'',description:'',tax_rate:'',is_active:true});fetchTaxClasses();}catch(err){var _err$response;// Handle specific backend errors\nconst errorData=(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data;let errorMessage='Failed to save tax class';if(errorData){if(errorData.detail){errorMessage=errorData.detail;}else if(errorData.non_field_errors){errorMessage=errorData.non_field_errors.join('. ');}else if(errorData.name){errorMessage=\"Name: \".concat(errorData.name.join('. '));}else if(errorData.tax_rate){errorMessage=\"Tax rate: \".concat(errorData.tax_rate.join('. '));}else{// Try to extract error from any field\nconst firstError=Object.values(errorData)[0];if(Array.isArray(firstError)){errorMessage=firstError.join('. ');}else if(typeof firstError==='string'){errorMessage=firstError;}}}setError(errorMessage);}};// Categories Functions\nconst fetchCategories=async()=>{try{const response=await api.get('/api/products/categories/');setCategories(response.data.results||response.data);}catch(err){console.error('Categories error:',err);}};const validateCategory=data=>{const errors=[];// Check if name is provided\nif(!data.name||data.name.trim()===''){errors.push('Category name is required');}// Check for duplicate name (only for new categories)\nif(!editingCategory){const existingCategory=categories.find(category=>category.name.toLowerCase()===data.name.toLowerCase());if(existingCategory){errors.push('A category with this name already exists');}}return errors;};const handleCategorySubmit=async e=>{e.preventDefault();setError('');try{// Validate the category data\nconst validationErrors=validateCategory(categoryFormData);if(validationErrors.length>0){setError(validationErrors.join('. '));return;}if(editingCategory){await api.put(\"/api/products/categories/\".concat(editingCategory.id,\"/\"),categoryFormData);}else{await api.post('/api/products/categories/',categoryFormData);}setShowCategoryModal(false);setEditingCategory(null);setCategoryFormData({name:'',description:'',is_active:true});fetchCategories();}catch(err){var _err$response2;// Handle specific backend errors\nconst errorData=(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data;let errorMessage='Failed to save category';if(errorData){if(errorData.detail){errorMessage=errorData.detail;}else if(errorData.non_field_errors){errorMessage=errorData.non_field_errors.join('. ');}else if(errorData.name){errorMessage=\"Name: \".concat(errorData.name.join('. '));}else{// Try to extract error from any field\nconst firstError=Object.values(errorData)[0];if(Array.isArray(firstError)){errorMessage=firstError.join('. ');}else if(typeof firstError==='string'){errorMessage=firstError;}}}setError(errorMessage);}};// Units Functions\nconst fetchUnits=async()=>{try{let allUnits=[];let nextUrl='/api/products/units/';// Fetch all pages of units to ensure we get all base units (including inactive ones)\nwhile(nextUrl){const response=await api.get(nextUrl);const data=response.data;if(data.results){// Paginated response\nallUnits=[...allUnits,...data.results];nextUrl=data.next;}else{// Non-paginated response\nallUnits=data;nextUrl=null;}}setUnits(allUnits);}catch(err){console.error('Units error:',err);}};const validateUnit=data=>{const errors=[];// Check if name is provided\nif(!data.name||data.name.trim()===''){errors.push('Unit name is required');}// Check if symbol is provided\nif(!data.symbol||data.symbol.trim()===''){errors.push('Unit symbol is required');}// Check for duplicate name (only for new units)\nif(!editingUnit){const existingUnit=units.find(unit=>unit.name.toLowerCase()===data.name.toLowerCase());if(existingUnit){errors.push('A unit with this name already exists');}}// Check for duplicate symbol (only for new units)\nif(!editingUnit){const existingSymbol=units.find(unit=>unit.symbol.toLowerCase()===data.symbol.toLowerCase());if(existingSymbol){errors.push('A unit with this symbol already exists');}}// Check if trying to set multiple base units\nif(data.is_base_unit&&!editingUnit){const existingBaseUnit=units.find(unit=>unit.is_base_unit);if(existingBaseUnit){errors.push('Only one base unit is allowed. Please uncheck the existing base unit first.');}}return errors;};const handleUnitSubmit=async e=>{e.preventDefault();setError('');try{// Validate the unit data\nconst validationErrors=validateUnit(unitFormData);if(validationErrors.length>0){setError(validationErrors.join('. '));return;}if(editingUnit){await api.put(\"/api/products/units/\".concat(editingUnit.id,\"/\"),unitFormData);}else{await api.post('/api/products/units/',unitFormData);}setShowUnitModal(false);setEditingUnit(null);setUnitFormData({name:'',symbol:'',is_base_unit:false,is_active:true});fetchUnits();}catch(err){var _err$response3;// Handle specific backend errors\nconst errorData=(_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.data;let errorMessage='Failed to save unit';if(errorData){if(errorData.detail){errorMessage=errorData.detail;}else if(errorData.non_field_errors){errorMessage=errorData.non_field_errors.join('. ');}else if(errorData.name){errorMessage=\"Name: \".concat(errorData.name.join('. '));}else if(errorData.symbol){errorMessage=\"Symbol: \".concat(errorData.symbol.join('. '));}else{// Try to extract error from any field\nconst firstError=Object.values(errorData)[0];if(Array.isArray(firstError)){errorMessage=firstError.join('. ');}else if(typeof firstError==='string'){errorMessage=firstError;}}}setError(errorMessage);}};// Unit Conversions Functions\nconst fetchUnitConversions=async()=>{try{let allConversions=[];let nextUrl='/api/products/unit-conversions/';// Fetch all pages of unit conversions\nwhile(nextUrl){const response=await api.get(nextUrl);const data=response.data;if(data.results){// Paginated response\nallConversions=[...allConversions,...data.results];nextUrl=data.next;}else{// Non-paginated response\nallConversions=data;nextUrl=null;}}setUnitConversions(allConversions);}catch(err){console.error('Unit conversions error:',err);}};const validateConversion=data=>{const errors=[];// Check if from_unit and to_unit are the same\nif(data.from_unit===data.to_unit){errors.push('From unit and To unit cannot be the same');}// Check if conversion factor is valid\nif(data.conversion_factor<=0){errors.push('Conversion factor must be greater than 0');}// Check if conversion factor is reasonable (not too large or too small)\nif(data.conversion_factor>10000){errors.push('Conversion factor is too large (max: 10,000)');}if(data.conversion_factor<0.0001){errors.push('Conversion factor is too small (min: 0.0001)');}// Find the selected units\nconst fromUnit=units.find(unit=>unit.id===parseInt(data.from_unit));const toUnit=units.find(unit=>unit.id===parseInt(data.to_unit));// Check that at least one unit is a base unit\nif(fromUnit&&toUnit&&!fromUnit.is_base_unit&&!toUnit.is_base_unit){errors.push('At least one of the units must be a base unit');}// Check for existing conversion (only for new conversions)\nif(!editingConversion){const existingConversion=unitConversions.find(conv=>conv.from_unit===data.from_unit&&conv.to_unit===data.to_unit||conv.from_unit===data.to_unit&&conv.to_unit===data.from_unit);if(existingConversion){errors.push('A conversion between these units already exists');}}// Check for circular conversions\nconst hasCircularConversion=unitConversions.some(conv=>{if(editingConversion&&conv.id===editingConversion.id)return false;// Check if this would create a circular conversion\nreturn conv.from_unit===data.to_unit&&conv.to_unit===data.from_unit;});if(hasCircularConversion){errors.push('This would create a circular conversion (reverse conversion already exists)');}// Check that non-base units have only one conversion from base unit\nif(fromUnit&&toUnit){// If from_unit is not a base unit, check if it already has a conversion from a base unit\nif(!fromUnit.is_base_unit){const existingBaseConversion=unitConversions.find(conv=>{if(editingConversion&&conv.id===editingConversion.id)return false;const convFromUnit=units.find(unit=>unit.id===conv.from_unit);return convFromUnit&&convFromUnit.is_base_unit&&conv.to_unit===fromUnit.id;});if(existingBaseConversion){errors.push(\"\".concat(fromUnit.name,\" already has a conversion from a base unit\"));}}// If to_unit is not a base unit, check if it already has a conversion from a base unit\nif(!toUnit.is_base_unit){const existingBaseConversion=unitConversions.find(conv=>{if(editingConversion&&conv.id===editingConversion.id)return false;const convFromUnit=units.find(unit=>unit.id===conv.from_unit);return convFromUnit&&convFromUnit.is_base_unit&&conv.to_unit===toUnit.id;});if(existingBaseConversion){errors.push(\"\".concat(toUnit.name,\" already has a conversion from a base unit\"));}}}return errors;};const handleConversionSubmit=async e=>{e.preventDefault();setError('');try{const data=_objectSpread(_objectSpread({},conversionFormData),{},{from_unit:parseInt(conversionFormData.from_unit),to_unit:parseInt(conversionFormData.to_unit),conversion_factor:parseFloat(conversionFormData.conversion_factor)});// Validate the conversion data\nconst validationErrors=validateConversion(data);if(validationErrors.length>0){setError(validationErrors.join('. '));return;}if(editingConversion){await api.put(\"/api/products/unit-conversions/\".concat(editingConversion.id,\"/\"),data);}else{await api.post('/api/products/unit-conversions/',data);}setShowConversionModal(false);setEditingConversion(null);setConversionFormData({from_unit:'',to_unit:'',conversion_factor:'',is_active:true});fetchUnitConversions();}catch(err){var _err$response4;// Handle specific backend errors\nconst errorData=(_err$response4=err.response)===null||_err$response4===void 0?void 0:_err$response4.data;let errorMessage='Failed to save unit conversion';if(errorData){if(errorData.detail){errorMessage=errorData.detail;}else if(errorData.non_field_errors){errorMessage=errorData.non_field_errors.join('. ');}else if(errorData.from_unit){errorMessage=\"From unit: \".concat(errorData.from_unit.join('. '));}else if(errorData.to_unit){errorMessage=\"To unit: \".concat(errorData.to_unit.join('. '));}else if(errorData.conversion_factor){errorMessage=\"Conversion factor: \".concat(errorData.conversion_factor.join('. '));}else{// Try to extract error from any field\nconst firstError=Object.values(errorData)[0];if(Array.isArray(firstError)){errorMessage=firstError.join('. ');}else if(typeof firstError==='string'){errorMessage=firstError;}}}setError(errorMessage);}};// Packagings Functions\nconst fetchPackagings=async()=>{try{const response=await api.get('/api/products/packagings/');setPackagings(response.data.results||response.data);}catch(err){console.error('Packagings error:',err);}};const validatePackaging=data=>{const errors=[];// Check if name is provided\nif(!data.name||data.name.trim()===''){errors.push('Packaging name is required');}// Check if price is provided and valid\nif(!data.price||data.price===''){errors.push('Packaging price is required');}else{const price=parseFloat(data.price);if(isNaN(price)){errors.push('Packaging price must be a valid number');}else if(price<=0){errors.push('Packaging price must be greater than 0');}}// Check for duplicate name (only for new packagings)\nif(!editingPackaging){const existingPackaging=packagings.find(packaging=>packaging.name.toLowerCase()===data.name.toLowerCase());if(existingPackaging){errors.push('A packaging with this name already exists');}}return errors;};const handlePackagingSubmit=async e=>{e.preventDefault();setError('');try{// Validate the packaging data\nconst validationErrors=validatePackaging(packagingFormData);if(validationErrors.length>0){setError(validationErrors.join('. '));return;}const data=_objectSpread(_objectSpread({},packagingFormData),{},{price:parseFloat(packagingFormData.price)});if(editingPackaging){await api.put(\"/api/products/packagings/\".concat(editingPackaging.id,\"/\"),data);}else{await api.post('/api/products/packagings/',data);}setShowPackagingModal(false);setEditingPackaging(null);setPackagingFormData({name:'',price:'',description:'',is_active:true});fetchPackagings();}catch(err){var _err$response5;// Handle specific backend errors\nconst errorData=(_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.data;let errorMessage='Failed to save packaging';if(errorData){if(errorData.detail){errorMessage=errorData.detail;}else if(errorData.non_field_errors){errorMessage=errorData.non_field_errors.join('. ');}else if(errorData.name){errorMessage=\"Name: \".concat(errorData.name.join('. '));}else if(errorData.price){errorMessage=\"Price: \".concat(errorData.price.join('. '));}else{// Try to extract error from any field\nconst firstError=Object.values(errorData)[0];if(Array.isArray(firstError)){errorMessage=firstError.join('. ');}else if(typeof firstError==='string'){errorMessage=firstError;}}}setError(errorMessage);}};// Delete Functions\nconst handleDelete=async(type,item)=>{if(!window.confirm(\"Are you sure you want to delete \\\"\".concat(item.name,\"\\\"?\"))){return;}try{const endpoints={tax:\"/api/products/tax-classes/\".concat(item.id,\"/\"),category:\"/api/products/categories/\".concat(item.id,\"/\"),unit:\"/api/products/units/\".concat(item.id,\"/\"),conversion:\"/api/products/unit-conversions/\".concat(item.id,\"/\"),packaging:\"/api/products/packagings/\".concat(item.id,\"/\")};await api.delete(endpoints[type]);switch(type){case'tax':fetchTaxClasses();break;case'category':fetchCategories();break;case'unit':fetchUnits();break;case'conversion':fetchUnitConversions();break;case'packaging':fetchPackagings();break;default:console.warn('Unknown delete type:',type);break;}}catch(err){setError(\"Failed to delete \".concat(type));}};// Table Columns\nconst taxColumns=[{key:'name',label:'Name'},{key:'description',label:'Description'},{key:'tax_rate',label:'Tax Rate (%)',render:value=>\"\".concat(value,\"%\")},{key:'products_count',label:'Products'},{key:'is_active',label:'Status',render:value=>value?'Active':'Inactive'},{key:'actions',label:'Actions',render:(_,item)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>{setEditingTaxClass(item);setTaxFormData({name:item.name,description:item.description,tax_rate:item.tax_rate.toString(),is_active:item.is_active});setShowTaxModal(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDelete('tax',item),children:\"Delete\"})]})}];const categoryColumns=[{key:'name',label:'Name'},{key:'description',label:'Description'},{key:'products_count',label:'Products'},{key:'is_active',label:'Status',render:value=>value?'Active':'Inactive'},{key:'actions',label:'Actions',render:(_,item)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>{setEditingCategory(item);setCategoryFormData({name:item.name,description:item.description,is_active:item.is_active});setShowCategoryModal(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDelete('category',item),children:\"Delete\"})]})}];const unitColumns=[{key:'name',label:'Name'},{key:'symbol',label:'Symbol'},{key:'is_base_unit',label:'Base Unit',render:value=>value?'Yes':'No'},{key:'products_count',label:'Products'},{key:'is_active',label:'Status',render:value=>value?'Active':'Inactive'},{key:'actions',label:'Actions',render:(_,item)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>{setEditingUnit(item);setUnitFormData({name:item.name,symbol:item.symbol,is_base_unit:item.is_base_unit,is_active:item.is_active});setShowUnitModal(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDelete('unit',item),children:\"Delete\"})]})}];const conversionColumns=[{key:'from_unit_name',label:'From Unit',render:(value,item)=>item.from_unit_name?\"\".concat(item.from_unit_name,\" (\").concat(item.from_unit_symbol,\")\"):'N/A'},{key:'to_unit_name',label:'To Unit',render:(value,item)=>item.to_unit_name?\"\".concat(item.to_unit_name,\" (\").concat(item.to_unit_symbol,\")\"):'N/A'},{key:'conversion_factor',label:'Conversion Factor'},{key:'is_active',label:'Status',render:value=>value?'Active':'Inactive'},{key:'actions',label:'Actions',render:(_,item)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>{setEditingConversion(item);setConversionFormData({from_unit:item.from_unit||'',to_unit:item.to_unit||'',conversion_factor:item.conversion_factor.toString(),is_active:item.is_active});setShowConversionModal(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDelete('conversion',item),children:\"Delete\"})]})}];const packagingColumns=[{key:'name',label:'Name'},{key:'price',label:'Price (MGA)',render:value=>\"\".concat(parseFloat(value).toFixed(2),\" MGA\")},{key:'description',label:'Description'},{key:'products_count',label:'Products'},{key:'is_active',label:'Status',render:value=>value?'Active':'Inactive'},{key:'actions',label:'Actions',render:(_,item)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"outline\",onClick:()=>{setEditingPackaging(item);setPackagingFormData({name:item.name,price:item.price.toString(),description:item.description||'',is_active:item.is_active});setShowPackagingModal(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDelete('packaging',item),children:\"Delete\"})]})}];if(!canManage){return/*#__PURE__*/_jsx(\"div\",{className:\"system-management\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"access-denied\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You don't have permission to manage system settings. Only managers and administrators can access this page.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"system-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"system-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('titles.system_management')}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage taxes, categories, units, unit conversions, and packagings\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"system-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='taxes'?'active':''),onClick:()=>setActiveTab('taxes'),children:\"Tax Classes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='categories'?'active':''),onClick:()=>setActiveTab('categories'),children:\"Categories\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='units'?'active':''),onClick:()=>setActiveTab('units'),children:\"Units\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='conversions'?'active':''),onClick:()=>setActiveTab('conversions'),children:\"Unit Conversions\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tab-button \".concat(activeTab==='packagings'?'active':''),onClick:()=>setActiveTab('packagings'),children:\"Packagings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"system-content\",children:[activeTab==='taxes'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tax Classes\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setEditingTaxClass(null);setTaxFormData({name:'',description:'',tax_rate:'',is_active:true});setShowTaxModal(true);},children:\"Add New Tax Class\"})]}),/*#__PURE__*/_jsx(Table,{data:taxClasses,columns:taxColumns,loading:loading,emptyMessage:\"No tax classes found\"})]}),activeTab==='categories'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Product Categories\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setEditingCategory(null);setCategoryFormData({name:'',description:'',is_active:true});setShowCategoryModal(true);},children:\"Add New Category\"})]}),/*#__PURE__*/_jsx(Table,{data:categories,columns:categoryColumns,loading:loading,emptyMessage:\"No categories found\"})]}),activeTab==='units'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Units\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search units...\",value:unitSearchTerm,onChange:e=>setUnitSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setEditingUnit(null);setUnitFormData({name:'',symbol:'',is_base_unit:false,is_active:true});setShowUnitModal(true);},children:\"Add New Unit\"})]})]}),/*#__PURE__*/_jsx(Table,{data:filteredUnits,columns:unitColumns,loading:loading,emptyMessage:unitSearchTerm?\"No units found matching your search\":\"No units found\"})]}),activeTab==='conversions'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Unit Conversions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search conversions...\",value:conversionSearchTerm,onChange:e=>setConversionSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setEditingConversion(null);setConversionFormData({from_unit:'',to_unit:'',conversion_factor:'',is_active:true});setShowConversionModal(true);},children:\"Add New Conversion\"})]})]}),/*#__PURE__*/_jsx(Table,{data:filteredConversions,columns:conversionColumns,loading:loading,emptyMessage:conversionSearchTerm?\"No conversions found matching your search\":\"No unit conversions found\"})]}),activeTab==='packagings'&&/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Packagings\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setEditingPackaging(null);setPackagingFormData({name:'',price:'',description:'',is_active:true});setShowPackagingModal(true);},children:\"Add New Packaging\"})]}),/*#__PURE__*/_jsx(Table,{data:packagings,columns:packagingColumns,loading:loading,emptyMessage:\"No packagings found\"})]})]}),showTaxModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowTaxModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingTaxClass?'Edit Tax Class':'Add New Tax Class'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowTaxModal(false),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleTaxSubmit,className:\"system-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tax_name\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"tax_name\",value:taxFormData.name,onChange:e=>setTaxFormData(_objectSpread(_objectSpread({},taxFormData),{},{name:e.target.value})),required:true,placeholder:\"e.g., Standard Rate\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tax_description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"tax_description\",value:taxFormData.description,onChange:e=>setTaxFormData(_objectSpread(_objectSpread({},taxFormData),{},{description:e.target.value})),placeholder:\"Brief description of this tax class\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tax_rate\",children:\"Tax Rate (%) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"tax_rate\",value:taxFormData.tax_rate,onChange:e=>setTaxFormData(_objectSpread(_objectSpread({},taxFormData),{},{tax_rate:e.target.value})),required:true,min:\"0\",max:\"100\",step:\"0.01\",placeholder:\"18.00\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:taxFormData.is_active,onChange:e=>setTaxFormData(_objectSpread(_objectSpread({},taxFormData),{},{is_active:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowTaxModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",children:[editingTaxClass?'Update':'Create',\" Tax Class\"]})]})]})]})}),showCategoryModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowCategoryModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingCategory?'Edit Category':'Add New Category'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowCategoryModal(false),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCategorySubmit,className:\"system-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category_name\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"category_name\",value:categoryFormData.name,onChange:e=>setCategoryFormData(_objectSpread(_objectSpread({},categoryFormData),{},{name:e.target.value})),required:true,placeholder:\"e.g., Beverages\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category_description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"category_description\",value:categoryFormData.description,onChange:e=>setCategoryFormData(_objectSpread(_objectSpread({},categoryFormData),{},{description:e.target.value})),placeholder:\"Brief description of this category\",rows:\"3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:categoryFormData.is_active,onChange:e=>setCategoryFormData(_objectSpread(_objectSpread({},categoryFormData),{},{is_active:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowCategoryModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",children:[editingCategory?'Update':'Create',\" Category\"]})]})]})]})}),showUnitModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowUnitModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingUnit?'Edit Unit':'Add New Unit'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowUnitModal(false),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUnitSubmit,className:\"system-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unit_name\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"unit_name\",value:unitFormData.name,onChange:e=>setUnitFormData(_objectSpread(_objectSpread({},unitFormData),{},{name:e.target.value})),required:true,placeholder:\"e.g., Kilogram\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"unit_symbol\",children:\"Symbol *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"unit_symbol\",value:unitFormData.symbol,onChange:e=>setUnitFormData(_objectSpread(_objectSpread({},unitFormData),{},{symbol:e.target.value})),required:true,placeholder:\"e.g., kg\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:unitFormData.is_base_unit,onChange:e=>setUnitFormData(_objectSpread(_objectSpread({},unitFormData),{},{is_base_unit:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Base Unit\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:unitFormData.is_active,onChange:e=>setUnitFormData(_objectSpread(_objectSpread({},unitFormData),{},{is_active:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowUnitModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",children:[editingUnit?'Update':'Create',\" Unit\"]})]})]})]})}),showConversionModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowConversionModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingConversion?'Edit Unit Conversion':'Add New Unit Conversion'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowConversionModal(false),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleConversionSubmit,className:\"system-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"from_unit\",children:\"From Unit *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"from_unit\",value:conversionFormData.from_unit,onChange:e=>setConversionFormData(_objectSpread(_objectSpread({},conversionFormData),{},{from_unit:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select From Unit\"}),units.sort((a,b)=>{// Sort base units first, then by name\nif(a.is_base_unit&&!b.is_base_unit)return-1;if(!a.is_base_unit&&b.is_base_unit)return 1;return a.name.localeCompare(b.name);}).map(unit=>/*#__PURE__*/_jsxs(\"option\",{value:unit.id,disabled:!unit.is_active,children:[unit.name,\" (\",unit.symbol,\")\",unit.is_base_unit?' - BASE UNIT':'',!unit.is_active?' - INACTIVE':'']},unit.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"to_unit\",children:\"To Unit *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"to_unit\",value:conversionFormData.to_unit,onChange:e=>setConversionFormData(_objectSpread(_objectSpread({},conversionFormData),{},{to_unit:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select To Unit\"}),units.sort((a,b)=>{// Sort base units first, then by name\nif(a.is_base_unit&&!b.is_base_unit)return-1;if(!a.is_base_unit&&b.is_base_unit)return 1;return a.name.localeCompare(b.name);}).map(unit=>/*#__PURE__*/_jsxs(\"option\",{value:unit.id,disabled:!unit.is_active,children:[unit.name,\" (\",unit.symbol,\")\",unit.is_base_unit?' - BASE UNIT':'',!unit.is_active?' - INACTIVE':'']},unit.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"conversion_factor\",children:\"Conversion Factor *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"conversion_factor\",value:conversionFormData.conversion_factor,onChange:e=>setConversionFormData(_objectSpread(_objectSpread({},conversionFormData),{},{conversion_factor:e.target.value})),required:true,min:\"0.001\",step:\"0.001\",placeholder:\"e.g., 20 (for 1 carton = 20 pieces)\"}),/*#__PURE__*/_jsx(\"small\",{children:\"How many \\\"to units\\\" equal 1 \\\"from unit\\\"\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:conversionFormData.is_active,onChange:e=>setConversionFormData(_objectSpread(_objectSpread({},conversionFormData),{},{is_active:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowConversionModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",children:[editingConversion?'Update':'Create',\" Conversion\"]})]})]})]})}),showPackagingModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowPackagingModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingPackaging?'Edit Packaging':'Add New Packaging'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowPackagingModal(false),children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePackagingSubmit,className:\"system-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"packaging_name\",children:\"Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"packaging_name\",value:packagingFormData.name,onChange:e=>setPackagingFormData(_objectSpread(_objectSpread({},packagingFormData),{},{name:e.target.value})),required:true,placeholder:\"e.g., Bottle, Can, Box\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"packaging_price\",children:\"Price (MGA) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"packaging_price\",value:packagingFormData.price,onChange:e=>setPackagingFormData(_objectSpread(_objectSpread({},packagingFormData),{},{price:e.target.value})),required:true,min:\"0.01\",step:\"0.01\",placeholder:\"e.g., 500.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"packaging_description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"packaging_description\",value:packagingFormData.description,onChange:e=>setPackagingFormData(_objectSpread(_objectSpread({},packagingFormData),{},{description:e.target.value})),placeholder:\"Brief description of this packaging type\",rows:\"3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:packagingFormData.is_active,onChange:e=>setPackagingFormData(_objectSpread(_objectSpread({},packagingFormData),{},{is_active:e.target.checked}))}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),\"Active\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline\",onClick:()=>setShowPackagingModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",children:[editingPackaging?'Update':'Create',\" Packaging\"]})]})]})]})})]});};export default SystemManagement;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useAuth","useApi","Button","Table","jsx","_jsx","jsxs","_jsxs","SystemManagement","t","user","api","activeTab","setActiveTab","loading","setLoading","error","setError","taxClasses","setTaxClasses","showTaxModal","setShowTaxModal","editingTaxClass","setEditingTaxClass","taxFormData","setTaxFormData","name","description","tax_rate","is_active","categories","setCategories","showCategoryModal","setShowCategoryModal","editingCategory","setEditingCategory","categoryFormData","setCategoryFormData","units","setUnits","filteredUnits","setFilteredUnits","unitSearchTerm","setUnitSearchTerm","showUnitModal","setShowUnitModal","editingUnit","setEditingUnit","unitFormData","setUnitFormData","symbol","is_base_unit","unitConversions","setUnitConversions","filteredConversions","setFilteredConversions","conversionSearchTerm","setConversionSearchTerm","showConversionModal","setShowConversionModal","editingConversion","setEditingConversion","conversionFormData","setConversionFormData","from_unit","to_unit","conversion_factor","packagings","setPackagings","showPackagingModal","setShowPackagingModal","editingPackaging","setEditingPackaging","packagingFormData","setPackagingFormData","price","canManage","role","fetchAllData","trim","filtered","filter","conversion","searchLower","toLowerCase","from_unit_name","includes","from_unit_symbol","to_unit_name","to_unit_symbol","toString","unit","Promise","all","fetchTaxClasses","fetchCategories","fetchUnits","fetchUnitConversions","fetchPackagings","err","response","get","data","results","console","validateTaxClass","errors","push","rate","parseFloat","isNaN","existingTaxClass","find","taxClass","handleTaxSubmit","e","preventDefault","validationErrors","length","join","put","concat","id","post","_err$response","errorData","errorMessage","detail","non_field_errors","firstError","Object","values","Array","isArray","validateCategory","existingCategory","category","handleCategorySubmit","_err$response2","allUnits","nextUrl","next","validateUnit","existingUnit","existingSymbol","existingBaseUnit","handleUnitSubmit","_err$response3","allConversions","validateConversion","fromUnit","parseInt","toUnit","existingConversion","conv","hasCircularConversion","some","existingBaseConversion","convFromUnit","handleConversionSubmit","_objectSpread","_err$response4","validatePackaging","existingPackaging","packaging","handlePackagingSubmit","_err$response5","handleDelete","type","item","window","confirm","endpoints","tax","delete","warn","taxColumns","key","label","render","value","_","className","children","size","variant","onClick","categoryColumns","unitColumns","conversionColumns","packagingColumns","toFixed","columns","emptyMessage","placeholder","onChange","target","stopPropagation","viewBox","fill","d","onSubmit","htmlFor","required","rows","min","max","step","checked","sort","a","b","localeCompare","map","disabled"],"sources":["/home/el-ifran/WareHouse_Manager/elif-admin-app/beverage_management_system/src/pages/SystemManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useApi } from '../hooks/useApi';\nimport Button from '../components/Button';\nimport Table from '../components/Table';\nimport './SystemManagement.css';\n\nconst SystemManagement = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const api = useApi();\n  \n  // State for different management sections\n  const [activeTab, setActiveTab] = useState('taxes');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  \n  // Tax Classes State\n  const [taxClasses, setTaxClasses] = useState([]);\n  const [showTaxModal, setShowTaxModal] = useState(false);\n  const [editingTaxClass, setEditingTaxClass] = useState(null);\n  const [taxFormData, setTaxFormData] = useState({\n    name: '',\n    description: '',\n    tax_rate: '',\n    is_active: true\n  });\n  \n  // Categories State\n  const [categories, setCategories] = useState([]);\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [editingCategory, setEditingCategory] = useState(null);\n  const [categoryFormData, setCategoryFormData] = useState({\n    name: '',\n    description: '',\n    is_active: true\n  });\n  \n  // Units State\n  const [units, setUnits] = useState([]);\n  const [filteredUnits, setFilteredUnits] = useState([]);\n  const [unitSearchTerm, setUnitSearchTerm] = useState('');\n  const [showUnitModal, setShowUnitModal] = useState(false);\n  const [editingUnit, setEditingUnit] = useState(null);\n  const [unitFormData, setUnitFormData] = useState({\n    name: '',\n    symbol: '',\n    is_base_unit: false,\n    is_active: true\n  });\n  \n  // Unit Conversions State\n  const [unitConversions, setUnitConversions] = useState([]);\n  const [filteredConversions, setFilteredConversions] = useState([]);\n  const [conversionSearchTerm, setConversionSearchTerm] = useState('');\n  const [showConversionModal, setShowConversionModal] = useState(false);\n  const [editingConversion, setEditingConversion] = useState(null);\n  const [conversionFormData, setConversionFormData] = useState({\n    from_unit: '',\n    to_unit: '',\n    conversion_factor: '',\n    is_active: true\n  });\n\n  // Packagings State\n  const [packagings, setPackagings] = useState([]);\n  const [showPackagingModal, setShowPackagingModal] = useState(false);\n  const [editingPackaging, setEditingPackaging] = useState(null);\n  const [packagingFormData, setPackagingFormData] = useState({\n    name: '',\n    price: '',\n    description: '',\n    is_active: true\n  });\n\n  // Check if user has permission to manage\n  const canManage = user?.role === 'admin' || user?.role === 'manager';\n\n  useEffect(() => {\n    if (canManage) {\n      fetchAllData();\n    }\n  }, [canManage]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Filter conversions based on search term\n  useEffect(() => {\n    if (!conversionSearchTerm.trim()) {\n      setFilteredConversions(unitConversions);\n    } else {\n      const filtered = unitConversions.filter(conversion => {\n        const searchLower = conversionSearchTerm.toLowerCase();\n        return (\n          (conversion.from_unit_name && conversion.from_unit_name.toLowerCase().includes(searchLower)) ||\n          (conversion.from_unit_symbol && conversion.from_unit_symbol.toLowerCase().includes(searchLower)) ||\n          (conversion.to_unit_name && conversion.to_unit_name.toLowerCase().includes(searchLower)) ||\n          (conversion.to_unit_symbol && conversion.to_unit_symbol.toLowerCase().includes(searchLower)) ||\n          conversion.conversion_factor.toString().includes(searchLower)\n        );\n      });\n      setFilteredConversions(filtered);\n    }\n  }, [unitConversions, conversionSearchTerm]);\n\n  // Filter units based on search term\n  useEffect(() => {\n    if (!unitSearchTerm.trim()) {\n      setFilteredUnits(units);\n    } else {\n      const filtered = units.filter(unit => {\n        const searchLower = unitSearchTerm.toLowerCase();\n        return (\n          (unit.name && unit.name.toLowerCase().includes(searchLower)) ||\n          (unit.symbol && unit.symbol.toLowerCase().includes(searchLower)) ||\n          (unit.is_base_unit && 'base unit'.includes(searchLower)) ||\n          (unit.is_active && 'active'.includes(searchLower)) ||\n          (!unit.is_active && 'inactive'.includes(searchLower))\n        );\n      });\n      setFilteredUnits(filtered);\n    }\n  }, [units, unitSearchTerm]);\n\n  const fetchAllData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([\n        fetchTaxClasses(),\n        fetchCategories(),\n        fetchUnits(),\n        fetchUnitConversions(),\n        fetchPackagings()\n      ]);\n    } catch (err) {\n      setError('Failed to load data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Tax Classes Functions\n  const fetchTaxClasses = async () => {\n    try {\n      const response = await api.get('/api/products/tax-classes/');\n      setTaxClasses(response.data.results || response.data);\n    } catch (err) {\n      console.error('Tax classes error:', err);\n    }\n  };\n\n  const validateTaxClass = (data) => {\n    const errors = [];\n\n    // Check if name is provided\n    if (!data.name || data.name.trim() === '') {\n      errors.push('Tax class name is required');\n    }\n\n    // Check if tax rate is provided and valid\n    if (!data.tax_rate || data.tax_rate === '') {\n      errors.push('Tax rate is required');\n    } else {\n      const rate = parseFloat(data.tax_rate);\n      if (isNaN(rate)) {\n        errors.push('Tax rate must be a valid number');\n      } else if (rate < 0) {\n        errors.push('Tax rate cannot be negative');\n      } else if (rate > 100) {\n        errors.push('Tax rate cannot exceed 100%');\n      }\n    }\n\n    // Check for duplicate name (only for new tax classes)\n    if (!editingTaxClass) {\n      const existingTaxClass = taxClasses.find(taxClass => \n        taxClass.name.toLowerCase() === data.name.toLowerCase()\n      );\n      if (existingTaxClass) {\n        errors.push('A tax class with this name already exists');\n      }\n    }\n\n    return errors;\n  };\n\n  const handleTaxSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      // Validate the tax class data\n      const validationErrors = validateTaxClass(taxFormData);\n      if (validationErrors.length > 0) {\n        setError(validationErrors.join('. '));\n        return;\n      }\n\n      if (editingTaxClass) {\n        await api.put(`/api/products/tax-classes/${editingTaxClass.id}/`, taxFormData);\n      } else {\n        await api.post('/api/products/tax-classes/', taxFormData);\n      }\n      \n      setShowTaxModal(false);\n      setEditingTaxClass(null);\n      setTaxFormData({ name: '', description: '', tax_rate: '', is_active: true });\n      fetchTaxClasses();\n    } catch (err) {\n      // Handle specific backend errors\n      const errorData = err.response?.data;\n      let errorMessage = 'Failed to save tax class';\n      \n      if (errorData) {\n        if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors.join('. ');\n        } else if (errorData.name) {\n          errorMessage = `Name: ${errorData.name.join('. ')}`;\n        } else if (errorData.tax_rate) {\n          errorMessage = `Tax rate: ${errorData.tax_rate.join('. ')}`;\n        } else {\n          // Try to extract error from any field\n          const firstError = Object.values(errorData)[0];\n          if (Array.isArray(firstError)) {\n            errorMessage = firstError.join('. ');\n          } else if (typeof firstError === 'string') {\n            errorMessage = firstError;\n          }\n        }\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Categories Functions\n  const fetchCategories = async () => {\n    try {\n      const response = await api.get('/api/products/categories/');\n      setCategories(response.data.results || response.data);\n    } catch (err) {\n      console.error('Categories error:', err);\n    }\n  };\n\n  const validateCategory = (data) => {\n    const errors = [];\n\n    // Check if name is provided\n    if (!data.name || data.name.trim() === '') {\n      errors.push('Category name is required');\n    }\n\n    // Check for duplicate name (only for new categories)\n    if (!editingCategory) {\n      const existingCategory = categories.find(category => \n        category.name.toLowerCase() === data.name.toLowerCase()\n      );\n      if (existingCategory) {\n        errors.push('A category with this name already exists');\n      }\n    }\n\n    return errors;\n  };\n\n  const handleCategorySubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      // Validate the category data\n      const validationErrors = validateCategory(categoryFormData);\n      if (validationErrors.length > 0) {\n        setError(validationErrors.join('. '));\n        return;\n      }\n\n      if (editingCategory) {\n        await api.put(`/api/products/categories/${editingCategory.id}/`, categoryFormData);\n      } else {\n        await api.post('/api/products/categories/', categoryFormData);\n      }\n      \n      setShowCategoryModal(false);\n      setEditingCategory(null);\n      setCategoryFormData({ name: '', description: '', is_active: true });\n      fetchCategories();\n    } catch (err) {\n      // Handle specific backend errors\n      const errorData = err.response?.data;\n      let errorMessage = 'Failed to save category';\n      \n      if (errorData) {\n        if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors.join('. ');\n        } else if (errorData.name) {\n          errorMessage = `Name: ${errorData.name.join('. ')}`;\n        } else {\n          // Try to extract error from any field\n          const firstError = Object.values(errorData)[0];\n          if (Array.isArray(firstError)) {\n            errorMessage = firstError.join('. ');\n          } else if (typeof firstError === 'string') {\n            errorMessage = firstError;\n          }\n        }\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Units Functions\n  const fetchUnits = async () => {\n    try {\n      let allUnits = [];\n      let nextUrl = '/api/products/units/';\n      \n      // Fetch all pages of units to ensure we get all base units (including inactive ones)\n      while (nextUrl) {\n        const response = await api.get(nextUrl);\n        const data = response.data;\n        \n        if (data.results) {\n          // Paginated response\n          allUnits = [...allUnits, ...data.results];\n          nextUrl = data.next;\n        } else {\n          // Non-paginated response\n          allUnits = data;\n          nextUrl = null;\n        }\n      }\n      \n      setUnits(allUnits);\n    } catch (err) {\n      console.error('Units error:', err);\n    }\n  };\n\n  const validateUnit = (data) => {\n    const errors = [];\n\n    // Check if name is provided\n    if (!data.name || data.name.trim() === '') {\n      errors.push('Unit name is required');\n    }\n\n    // Check if symbol is provided\n    if (!data.symbol || data.symbol.trim() === '') {\n      errors.push('Unit symbol is required');\n    }\n\n    // Check for duplicate name (only for new units)\n    if (!editingUnit) {\n      const existingUnit = units.find(unit => \n        unit.name.toLowerCase() === data.name.toLowerCase()\n      );\n      if (existingUnit) {\n        errors.push('A unit with this name already exists');\n      }\n    }\n\n    // Check for duplicate symbol (only for new units)\n    if (!editingUnit) {\n      const existingSymbol = units.find(unit => \n        unit.symbol.toLowerCase() === data.symbol.toLowerCase()\n      );\n      if (existingSymbol) {\n        errors.push('A unit with this symbol already exists');\n      }\n    }\n\n    // Check if trying to set multiple base units\n    if (data.is_base_unit && !editingUnit) {\n      const existingBaseUnit = units.find(unit => unit.is_base_unit);\n      if (existingBaseUnit) {\n        errors.push('Only one base unit is allowed. Please uncheck the existing base unit first.');\n      }\n    }\n\n    return errors;\n  };\n\n  const handleUnitSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      // Validate the unit data\n      const validationErrors = validateUnit(unitFormData);\n      if (validationErrors.length > 0) {\n        setError(validationErrors.join('. '));\n        return;\n      }\n\n      if (editingUnit) {\n        await api.put(`/api/products/units/${editingUnit.id}/`, unitFormData);\n      } else {\n        await api.post('/api/products/units/', unitFormData);\n      }\n      \n      setShowUnitModal(false);\n      setEditingUnit(null);\n      setUnitFormData({ name: '', symbol: '', is_base_unit: false, is_active: true });\n      fetchUnits();\n    } catch (err) {\n      // Handle specific backend errors\n      const errorData = err.response?.data;\n      let errorMessage = 'Failed to save unit';\n      \n      if (errorData) {\n        if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors.join('. ');\n        } else if (errorData.name) {\n          errorMessage = `Name: ${errorData.name.join('. ')}`;\n        } else if (errorData.symbol) {\n          errorMessage = `Symbol: ${errorData.symbol.join('. ')}`;\n        } else {\n          // Try to extract error from any field\n          const firstError = Object.values(errorData)[0];\n          if (Array.isArray(firstError)) {\n            errorMessage = firstError.join('. ');\n          } else if (typeof firstError === 'string') {\n            errorMessage = firstError;\n          }\n        }\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Unit Conversions Functions\n  const fetchUnitConversions = async () => {\n    try {\n      let allConversions = [];\n      let nextUrl = '/api/products/unit-conversions/';\n      \n      // Fetch all pages of unit conversions\n      while (nextUrl) {\n        const response = await api.get(nextUrl);\n        const data = response.data;\n        \n        if (data.results) {\n          // Paginated response\n          allConversions = [...allConversions, ...data.results];\n          nextUrl = data.next;\n        } else {\n          // Non-paginated response\n          allConversions = data;\n          nextUrl = null;\n        }\n      }\n      \n      setUnitConversions(allConversions);\n    } catch (err) {\n      console.error('Unit conversions error:', err);\n    }\n  };\n\n  const validateConversion = (data) => {\n    const errors = [];\n\n    // Check if from_unit and to_unit are the same\n    if (data.from_unit === data.to_unit) {\n      errors.push('From unit and To unit cannot be the same');\n    }\n\n    // Check if conversion factor is valid\n    if (data.conversion_factor <= 0) {\n      errors.push('Conversion factor must be greater than 0');\n    }\n\n    // Check if conversion factor is reasonable (not too large or too small)\n    if (data.conversion_factor > 10000) {\n      errors.push('Conversion factor is too large (max: 10,000)');\n    }\n\n    if (data.conversion_factor < 0.0001) {\n      errors.push('Conversion factor is too small (min: 0.0001)');\n    }\n\n    // Find the selected units\n    const fromUnit = units.find(unit => unit.id === parseInt(data.from_unit));\n    const toUnit = units.find(unit => unit.id === parseInt(data.to_unit));\n\n    // Check that at least one unit is a base unit\n    if (fromUnit && toUnit && !fromUnit.is_base_unit && !toUnit.is_base_unit) {\n      errors.push('At least one of the units must be a base unit');\n    }\n\n    // Check for existing conversion (only for new conversions)\n    if (!editingConversion) {\n      const existingConversion = unitConversions.find(conv => \n        (conv.from_unit === data.from_unit && conv.to_unit === data.to_unit) ||\n        (conv.from_unit === data.to_unit && conv.to_unit === data.from_unit)\n      );\n      \n      if (existingConversion) {\n        errors.push('A conversion between these units already exists');\n      }\n    }\n\n    // Check for circular conversions\n    const hasCircularConversion = unitConversions.some(conv => {\n      if (editingConversion && conv.id === editingConversion.id) return false;\n      \n      // Check if this would create a circular conversion\n      return (conv.from_unit === data.to_unit && conv.to_unit === data.from_unit);\n    });\n\n    if (hasCircularConversion) {\n      errors.push('This would create a circular conversion (reverse conversion already exists)');\n    }\n\n    // Check that non-base units have only one conversion from base unit\n    if (fromUnit && toUnit) {\n      // If from_unit is not a base unit, check if it already has a conversion from a base unit\n      if (!fromUnit.is_base_unit) {\n        const existingBaseConversion = unitConversions.find(conv => {\n          if (editingConversion && conv.id === editingConversion.id) return false;\n          const convFromUnit = units.find(unit => unit.id === conv.from_unit);\n          return convFromUnit && convFromUnit.is_base_unit && conv.to_unit === fromUnit.id;\n        });\n        \n        if (existingBaseConversion) {\n          errors.push(`${fromUnit.name} already has a conversion from a base unit`);\n        }\n      }\n\n      // If to_unit is not a base unit, check if it already has a conversion from a base unit\n      if (!toUnit.is_base_unit) {\n        const existingBaseConversion = unitConversions.find(conv => {\n          if (editingConversion && conv.id === editingConversion.id) return false;\n          const convFromUnit = units.find(unit => unit.id === conv.from_unit);\n          return convFromUnit && convFromUnit.is_base_unit && conv.to_unit === toUnit.id;\n        });\n        \n        if (existingBaseConversion) {\n          errors.push(`${toUnit.name} already has a conversion from a base unit`);\n        }\n      }\n    }\n\n    return errors;\n  };\n\n  const handleConversionSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      const data = {\n        ...conversionFormData,\n        from_unit: parseInt(conversionFormData.from_unit),\n        to_unit: parseInt(conversionFormData.to_unit),\n        conversion_factor: parseFloat(conversionFormData.conversion_factor)\n      };\n\n      // Validate the conversion data\n      const validationErrors = validateConversion(data);\n      if (validationErrors.length > 0) {\n        setError(validationErrors.join('. '));\n        return;\n      }\n\n      if (editingConversion) {\n        await api.put(`/api/products/unit-conversions/${editingConversion.id}/`, data);\n      } else {\n        await api.post('/api/products/unit-conversions/', data);\n      }\n      \n      setShowConversionModal(false);\n      setEditingConversion(null);\n      setConversionFormData({ from_unit: '', to_unit: '', conversion_factor: '', is_active: true });\n      fetchUnitConversions();\n    } catch (err) {\n      // Handle specific backend errors\n      const errorData = err.response?.data;\n      let errorMessage = 'Failed to save unit conversion';\n      \n      if (errorData) {\n        if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors.join('. ');\n        } else if (errorData.from_unit) {\n          errorMessage = `From unit: ${errorData.from_unit.join('. ')}`;\n        } else if (errorData.to_unit) {\n          errorMessage = `To unit: ${errorData.to_unit.join('. ')}`;\n        } else if (errorData.conversion_factor) {\n          errorMessage = `Conversion factor: ${errorData.conversion_factor.join('. ')}`;\n        } else {\n          // Try to extract error from any field\n          const firstError = Object.values(errorData)[0];\n          if (Array.isArray(firstError)) {\n            errorMessage = firstError.join('. ');\n          } else if (typeof firstError === 'string') {\n            errorMessage = firstError;\n          }\n        }\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Packagings Functions\n  const fetchPackagings = async () => {\n    try {\n      const response = await api.get('/api/products/packagings/');\n      setPackagings(response.data.results || response.data);\n    } catch (err) {\n      console.error('Packagings error:', err);\n    }\n  };\n\n  const validatePackaging = (data) => {\n    const errors = [];\n\n    // Check if name is provided\n    if (!data.name || data.name.trim() === '') {\n      errors.push('Packaging name is required');\n    }\n\n    // Check if price is provided and valid\n    if (!data.price || data.price === '') {\n      errors.push('Packaging price is required');\n    } else {\n      const price = parseFloat(data.price);\n      if (isNaN(price)) {\n        errors.push('Packaging price must be a valid number');\n      } else if (price <= 0) {\n        errors.push('Packaging price must be greater than 0');\n      }\n    }\n\n    // Check for duplicate name (only for new packagings)\n    if (!editingPackaging) {\n      const existingPackaging = packagings.find(packaging => \n        packaging.name.toLowerCase() === data.name.toLowerCase()\n      );\n      if (existingPackaging) {\n        errors.push('A packaging with this name already exists');\n      }\n    }\n\n    return errors;\n  };\n\n  const handlePackagingSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      // Validate the packaging data\n      const validationErrors = validatePackaging(packagingFormData);\n      if (validationErrors.length > 0) {\n        setError(validationErrors.join('. '));\n        return;\n      }\n\n      const data = {\n        ...packagingFormData,\n        price: parseFloat(packagingFormData.price)\n      };\n\n      if (editingPackaging) {\n        await api.put(`/api/products/packagings/${editingPackaging.id}/`, data);\n      } else {\n        await api.post('/api/products/packagings/', data);\n      }\n      \n      setShowPackagingModal(false);\n      setEditingPackaging(null);\n      setPackagingFormData({ name: '', price: '', description: '', is_active: true });\n      fetchPackagings();\n    } catch (err) {\n      // Handle specific backend errors\n      const errorData = err.response?.data;\n      let errorMessage = 'Failed to save packaging';\n      \n      if (errorData) {\n        if (errorData.detail) {\n          errorMessage = errorData.detail;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors.join('. ');\n        } else if (errorData.name) {\n          errorMessage = `Name: ${errorData.name.join('. ')}`;\n        } else if (errorData.price) {\n          errorMessage = `Price: ${errorData.price.join('. ')}`;\n        } else {\n          // Try to extract error from any field\n          const firstError = Object.values(errorData)[0];\n          if (Array.isArray(firstError)) {\n            errorMessage = firstError.join('. ');\n          } else if (typeof firstError === 'string') {\n            errorMessage = firstError;\n          }\n        }\n      }\n      \n      setError(errorMessage);\n    }\n  };\n\n  // Delete Functions\n  const handleDelete = async (type, item) => {\n    if (!window.confirm(`Are you sure you want to delete \"${item.name}\"?`)) {\n      return;\n    }\n\n    try {\n      const endpoints = {\n        tax: `/api/products/tax-classes/${item.id}/`,\n        category: `/api/products/categories/${item.id}/`,\n        unit: `/api/products/units/${item.id}/`,\n        conversion: `/api/products/unit-conversions/${item.id}/`,\n        packaging: `/api/products/packagings/${item.id}/`\n      };\n      \n      await api.delete(endpoints[type]);\n      \n      switch (type) {\n        case 'tax':\n          fetchTaxClasses();\n          break;\n        case 'category':\n          fetchCategories();\n          break;\n        case 'unit':\n          fetchUnits();\n          break;\n        case 'conversion':\n          fetchUnitConversions();\n          break;\n        case 'packaging':\n          fetchPackagings();\n          break;\n        default:\n          console.warn('Unknown delete type:', type);\n          break;\n      }\n    } catch (err) {\n      setError(`Failed to delete ${type}`);\n    }\n  };\n\n  // Table Columns\n  const taxColumns = [\n    { key: 'name', label: 'Name' },\n    { key: 'description', label: 'Description' },\n    { key: 'tax_rate', label: 'Tax Rate (%)', render: (value) => `${value}%` },\n    { key: 'products_count', label: 'Products' },\n    { key: 'is_active', label: 'Status', render: (value) => value ? 'Active' : 'Inactive' },\n    { \n      key: 'actions', \n      label: 'Actions', \n      render: (_, item) => (\n        <div className=\"action-buttons\">\n          <Button size=\"small\" variant=\"outline\" onClick={() => {\n            setEditingTaxClass(item);\n            setTaxFormData({\n              name: item.name,\n              description: item.description,\n              tax_rate: item.tax_rate.toString(),\n              is_active: item.is_active\n            });\n            setShowTaxModal(true);\n          }}>\n            Edit\n          </Button>\n          <Button size=\"small\" variant=\"danger\" onClick={() => handleDelete('tax', item)}>\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  const categoryColumns = [\n    { key: 'name', label: 'Name' },\n    { key: 'description', label: 'Description' },\n    { key: 'products_count', label: 'Products' },\n    { key: 'is_active', label: 'Status', render: (value) => value ? 'Active' : 'Inactive' },\n    { \n      key: 'actions', \n      label: 'Actions', \n      render: (_, item) => (\n        <div className=\"action-buttons\">\n          <Button size=\"small\" variant=\"outline\" onClick={() => {\n            setEditingCategory(item);\n            setCategoryFormData({\n              name: item.name,\n              description: item.description,\n              is_active: item.is_active\n            });\n            setShowCategoryModal(true);\n          }}>\n            Edit\n          </Button>\n          <Button size=\"small\" variant=\"danger\" onClick={() => handleDelete('category', item)}>\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  const unitColumns = [\n    { key: 'name', label: 'Name' },\n    { key: 'symbol', label: 'Symbol' },\n    { key: 'is_base_unit', label: 'Base Unit', render: (value) => value ? 'Yes' : 'No' },\n    { key: 'products_count', label: 'Products' },\n    { key: 'is_active', label: 'Status', render: (value) => value ? 'Active' : 'Inactive' },\n    { \n      key: 'actions', \n      label: 'Actions', \n      render: (_, item) => (\n        <div className=\"action-buttons\">\n          <Button size=\"small\" variant=\"outline\" onClick={() => {\n            setEditingUnit(item);\n            setUnitFormData({\n              name: item.name,\n              symbol: item.symbol,\n              is_base_unit: item.is_base_unit,\n              is_active: item.is_active\n            });\n            setShowUnitModal(true);\n          }}>\n            Edit\n          </Button>\n          <Button size=\"small\" variant=\"danger\" onClick={() => handleDelete('unit', item)}>\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  const conversionColumns = [\n    { \n      key: 'from_unit_name', \n      label: 'From Unit', \n      render: (value, item) => item.from_unit_name ? `${item.from_unit_name} (${item.from_unit_symbol})` : 'N/A' \n    },\n    { \n      key: 'to_unit_name', \n      label: 'To Unit', \n      render: (value, item) => item.to_unit_name ? `${item.to_unit_name} (${item.to_unit_symbol})` : 'N/A' \n    },\n    { key: 'conversion_factor', label: 'Conversion Factor' },\n    { key: 'is_active', label: 'Status', render: (value) => value ? 'Active' : 'Inactive' },\n    { \n      key: 'actions', \n      label: 'Actions', \n      render: (_, item) => (\n        <div className=\"action-buttons\">\n          <Button size=\"small\" variant=\"outline\" onClick={() => {\n            setEditingConversion(item);\n            setConversionFormData({\n              from_unit: item.from_unit || '',\n              to_unit: item.to_unit || '',\n              conversion_factor: item.conversion_factor.toString(),\n              is_active: item.is_active\n            });\n            setShowConversionModal(true);\n          }}>\n            Edit\n          </Button>\n          <Button size=\"small\" variant=\"danger\" onClick={() => handleDelete('conversion', item)}>\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  const packagingColumns = [\n    { key: 'name', label: 'Name' },\n    { key: 'price', label: 'Price (MGA)', render: (value) => `${parseFloat(value).toFixed(2)} MGA` },\n    { key: 'description', label: 'Description' },\n    { key: 'products_count', label: 'Products' },\n    { key: 'is_active', label: 'Status', render: (value) => value ? 'Active' : 'Inactive' },\n    { \n      key: 'actions', \n      label: 'Actions', \n      render: (_, item) => (\n        <div className=\"action-buttons\">\n          <Button size=\"small\" variant=\"outline\" onClick={() => {\n            setEditingPackaging(item);\n            setPackagingFormData({\n              name: item.name,\n              price: item.price.toString(),\n              description: item.description || '',\n              is_active: item.is_active\n            });\n            setShowPackagingModal(true);\n          }}>\n            Edit\n          </Button>\n          <Button size=\"small\" variant=\"danger\" onClick={() => handleDelete('packaging', item)}>\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  if (!canManage) {\n    return (\n      <div className=\"system-management\">\n        <div className=\"access-denied\">\n          <h2>Access Denied</h2>\n          <p>You don't have permission to manage system settings. Only managers and administrators can access this page.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"system-management\">\n      <div className=\"system-header\">\n        <h1>{t('titles.system_management')}</h1>\n        <p>Manage taxes, categories, units, unit conversions, and packagings</p>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"system-tabs\">\n        <button \n          className={`tab-button ${activeTab === 'taxes' ? 'active' : ''}`}\n          onClick={() => setActiveTab('taxes')}\n        >\n          Tax Classes\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'categories' ? 'active' : ''}`}\n          onClick={() => setActiveTab('categories')}\n        >\n          Categories\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'units' ? 'active' : ''}`}\n          onClick={() => setActiveTab('units')}\n        >\n          Units\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'conversions' ? 'active' : ''}`}\n          onClick={() => setActiveTab('conversions')}\n        >\n          Unit Conversions\n        </button>\n        <button \n          className={`tab-button ${activeTab === 'packagings' ? 'active' : ''}`}\n          onClick={() => setActiveTab('packagings')}\n        >\n          Packagings\n        </button>\n      </div>\n\n      <div className=\"system-content\">\n        {activeTab === 'taxes' && (\n          <div className=\"tab-content\">\n            <div className=\"content-header\">\n              <h2>Tax Classes</h2>\n              <Button onClick={() => {\n                setEditingTaxClass(null);\n                setTaxFormData({ name: '', description: '', tax_rate: '', is_active: true });\n                setShowTaxModal(true);\n              }}>\n                Add New Tax Class\n              </Button>\n            </div>\n            <Table\n              data={taxClasses}\n              columns={taxColumns}\n              loading={loading}\n              emptyMessage=\"No tax classes found\"\n            />\n          </div>\n        )}\n\n        {activeTab === 'categories' && (\n          <div className=\"tab-content\">\n            <div className=\"content-header\">\n              <h2>Product Categories</h2>\n              <Button onClick={() => {\n                setEditingCategory(null);\n                setCategoryFormData({ name: '', description: '', is_active: true });\n                setShowCategoryModal(true);\n              }}>\n                Add New Category\n              </Button>\n            </div>\n            <Table\n              data={categories}\n              columns={categoryColumns}\n              loading={loading}\n              emptyMessage=\"No categories found\"\n            />\n          </div>\n        )}\n\n        {activeTab === 'units' && (\n          <div className=\"tab-content\">\n            <div className=\"content-header\">\n              <h2>Units</h2>\n              <div className=\"header-actions\">\n                <div className=\"search-container\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search units...\"\n                    value={unitSearchTerm}\n                    onChange={(e) => setUnitSearchTerm(e.target.value)}\n                    className=\"search-input\"\n                  />\n                  <span className=\"search-icon\"></span>\n                </div>\n                <Button onClick={() => {\n                  setEditingUnit(null);\n                  setUnitFormData({ name: '', symbol: '', is_base_unit: false, is_active: true });\n                  setShowUnitModal(true);\n                }}>\n                  Add New Unit\n                </Button>\n              </div>\n            </div>\n            <Table\n              data={filteredUnits}\n              columns={unitColumns}\n              loading={loading}\n              emptyMessage={unitSearchTerm ? \"No units found matching your search\" : \"No units found\"}\n            />\n          </div>\n        )}\n\n        {activeTab === 'conversions' && (\n          <div className=\"tab-content\">\n            <div className=\"content-header\">\n              <h2>Unit Conversions</h2>\n              <div className=\"header-actions\">\n                <div className=\"search-container\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Search conversions...\"\n                    value={conversionSearchTerm}\n                    onChange={(e) => setConversionSearchTerm(e.target.value)}\n                    className=\"search-input\"\n                  />\n                  <span className=\"search-icon\"></span>\n                </div>\n                <Button onClick={() => {\n                  setEditingConversion(null);\n                  setConversionFormData({ from_unit: '', to_unit: '', conversion_factor: '', is_active: true });\n                  setShowConversionModal(true);\n                }}>\n                  Add New Conversion\n                </Button>\n              </div>\n            </div>\n            <Table\n              data={filteredConversions}\n              columns={conversionColumns}\n              loading={loading}\n              emptyMessage={conversionSearchTerm ? \"No conversions found matching your search\" : \"No unit conversions found\"}\n            />\n          </div>\n        )}\n\n        {activeTab === 'packagings' && (\n          <div className=\"tab-content\">\n            <div className=\"content-header\">\n              <h2>Packagings</h2>\n              <Button onClick={() => {\n                setEditingPackaging(null);\n                setPackagingFormData({ name: '', price: '', description: '', is_active: true });\n                setShowPackagingModal(true);\n              }}>\n                Add New Packaging\n              </Button>\n            </div>\n            <Table\n              data={packagings}\n              columns={packagingColumns}\n              loading={loading}\n              emptyMessage=\"No packagings found\"\n            />\n          </div>\n        )}\n      </div>\n\n      {/* Tax Class Modal */}\n      {showTaxModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowTaxModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingTaxClass ? 'Edit Tax Class' : 'Add New Tax Class'}</h2>\n              <button className=\"modal-close\" onClick={() => setShowTaxModal(false)}>\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handleTaxSubmit} className=\"system-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"tax_name\">Name *</label>\n                <input\n                  type=\"text\"\n                  id=\"tax_name\"\n                  value={taxFormData.name}\n                  onChange={(e) => setTaxFormData({ ...taxFormData, name: e.target.value })}\n                  required\n                  placeholder=\"e.g., Standard Rate\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"tax_description\">Description</label>\n                <textarea\n                  id=\"tax_description\"\n                  value={taxFormData.description}\n                  onChange={(e) => setTaxFormData({ ...taxFormData, description: e.target.value })}\n                  placeholder=\"Brief description of this tax class\"\n                  rows=\"3\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"tax_rate\">Tax Rate (%) *</label>\n                <input\n                  type=\"number\"\n                  id=\"tax_rate\"\n                  value={taxFormData.tax_rate}\n                  onChange={(e) => setTaxFormData({ ...taxFormData, tax_rate: e.target.value })}\n                  required\n                  min=\"0\"\n                  max=\"100\"\n                  step=\"0.01\"\n                  placeholder=\"18.00\"\n                />\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={taxFormData.is_active}\n                    onChange={(e) => setTaxFormData({ ...taxFormData, is_active: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Active\n                </label>\n              </div>\n\n              <div className=\"form-actions\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowTaxModal(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\">\n                  {editingTaxClass ? 'Update' : 'Create'} Tax Class\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Category Modal */}\n      {showCategoryModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingCategory ? 'Edit Category' : 'Add New Category'}</h2>\n              <button className=\"modal-close\" onClick={() => setShowCategoryModal(false)}>\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handleCategorySubmit} className=\"system-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"category_name\">Name *</label>\n                <input\n                  type=\"text\"\n                  id=\"category_name\"\n                  value={categoryFormData.name}\n                  onChange={(e) => setCategoryFormData({ ...categoryFormData, name: e.target.value })}\n                  required\n                  placeholder=\"e.g., Beverages\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"category_description\">Description</label>\n                <textarea\n                  id=\"category_description\"\n                  value={categoryFormData.description}\n                  onChange={(e) => setCategoryFormData({ ...categoryFormData, description: e.target.value })}\n                  placeholder=\"Brief description of this category\"\n                  rows=\"3\"\n                />\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={categoryFormData.is_active}\n                    onChange={(e) => setCategoryFormData({ ...categoryFormData, is_active: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Active\n                </label>\n              </div>\n\n              <div className=\"form-actions\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowCategoryModal(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\">\n                  {editingCategory ? 'Update' : 'Create'} Category\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Unit Modal */}\n      {showUnitModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowUnitModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingUnit ? 'Edit Unit' : 'Add New Unit'}</h2>\n              <button className=\"modal-close\" onClick={() => setShowUnitModal(false)}>\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handleUnitSubmit} className=\"system-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"unit_name\">Name *</label>\n                <input\n                  type=\"text\"\n                  id=\"unit_name\"\n                  value={unitFormData.name}\n                  onChange={(e) => setUnitFormData({ ...unitFormData, name: e.target.value })}\n                  required\n                  placeholder=\"e.g., Kilogram\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"unit_symbol\">Symbol *</label>\n                <input\n                  type=\"text\"\n                  id=\"unit_symbol\"\n                  value={unitFormData.symbol}\n                  onChange={(e) => setUnitFormData({ ...unitFormData, symbol: e.target.value })}\n                  required\n                  placeholder=\"e.g., kg\"\n                />\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={unitFormData.is_base_unit}\n                    onChange={(e) => setUnitFormData({ ...unitFormData, is_base_unit: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Base Unit\n                </label>\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={unitFormData.is_active}\n                    onChange={(e) => setUnitFormData({ ...unitFormData, is_active: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Active\n                </label>\n              </div>\n\n              <div className=\"form-actions\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowUnitModal(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\">\n                  {editingUnit ? 'Update' : 'Create'} Unit\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Unit Conversion Modal */}\n      {showConversionModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowConversionModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingConversion ? 'Edit Unit Conversion' : 'Add New Unit Conversion'}</h2>\n              <button className=\"modal-close\" onClick={() => setShowConversionModal(false)}>\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handleConversionSubmit} className=\"system-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"from_unit\">From Unit *</label>\n                <select\n                  id=\"from_unit\"\n                  value={conversionFormData.from_unit}\n                  onChange={(e) => setConversionFormData({ ...conversionFormData, from_unit: e.target.value })}\n                  required\n                >\n                  <option value=\"\">Select From Unit</option>\n                  {units\n                    .sort((a, b) => {\n                      // Sort base units first, then by name\n                      if (a.is_base_unit && !b.is_base_unit) return -1;\n                      if (!a.is_base_unit && b.is_base_unit) return 1;\n                      return a.name.localeCompare(b.name);\n                    })\n                    .map(unit => (\n                      <option key={unit.id} value={unit.id} disabled={!unit.is_active}>\n                        {unit.name} ({unit.symbol}){unit.is_base_unit ? ' - BASE UNIT' : ''}{!unit.is_active ? ' - INACTIVE' : ''}\n                      </option>\n                    ))}\n                </select>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"to_unit\">To Unit *</label>\n                <select\n                  id=\"to_unit\"\n                  value={conversionFormData.to_unit}\n                  onChange={(e) => setConversionFormData({ ...conversionFormData, to_unit: e.target.value })}\n                  required\n                >\n                  <option value=\"\">Select To Unit</option>\n                  {units\n                    .sort((a, b) => {\n                      // Sort base units first, then by name\n                      if (a.is_base_unit && !b.is_base_unit) return -1;\n                      if (!a.is_base_unit && b.is_base_unit) return 1;\n                      return a.name.localeCompare(b.name);\n                    })\n                    .map(unit => (\n                      <option key={unit.id} value={unit.id} disabled={!unit.is_active}>\n                        {unit.name} ({unit.symbol}){unit.is_base_unit ? ' - BASE UNIT' : ''}{!unit.is_active ? ' - INACTIVE' : ''}\n                      </option>\n                    ))}\n                </select>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"conversion_factor\">Conversion Factor *</label>\n                <input\n                  type=\"number\"\n                  id=\"conversion_factor\"\n                  value={conversionFormData.conversion_factor}\n                  onChange={(e) => setConversionFormData({ ...conversionFormData, conversion_factor: e.target.value })}\n                  required\n                  min=\"0.001\"\n                  step=\"0.001\"\n                  placeholder=\"e.g., 20 (for 1 carton = 20 pieces)\"\n                />\n                <small>How many \"to units\" equal 1 \"from unit\"</small>\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={conversionFormData.is_active}\n                    onChange={(e) => setConversionFormData({ ...conversionFormData, is_active: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Active\n                </label>\n              </div>\n\n              <div className=\"form-actions\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowConversionModal(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\">\n                  {editingConversion ? 'Update' : 'Create'} Conversion\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Packaging Modal */}\n      {showPackagingModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowPackagingModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingPackaging ? 'Edit Packaging' : 'Add New Packaging'}</h2>\n              <button className=\"modal-close\" onClick={() => setShowPackagingModal(false)}>\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handlePackagingSubmit} className=\"system-form\">\n              <div className=\"form-group\">\n                <label htmlFor=\"packaging_name\">Name *</label>\n                <input\n                  type=\"text\"\n                  id=\"packaging_name\"\n                  value={packagingFormData.name}\n                  onChange={(e) => setPackagingFormData({ ...packagingFormData, name: e.target.value })}\n                  required\n                  placeholder=\"e.g., Bottle, Can, Box\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"packaging_price\">Price (MGA) *</label>\n                <input\n                  type=\"number\"\n                  id=\"packaging_price\"\n                  value={packagingFormData.price}\n                  onChange={(e) => setPackagingFormData({ ...packagingFormData, price: e.target.value })}\n                  required\n                  min=\"0.01\"\n                  step=\"0.01\"\n                  placeholder=\"e.g., 500.00\"\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"packaging_description\">Description</label>\n                <textarea\n                  id=\"packaging_description\"\n                  value={packagingFormData.description}\n                  onChange={(e) => setPackagingFormData({ ...packagingFormData, description: e.target.value })}\n                  placeholder=\"Brief description of this packaging type\"\n                  rows=\"3\"\n                />\n              </div>\n\n              <div className=\"form-group checkbox-group\">\n                <label className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={packagingFormData.is_active}\n                    onChange={(e) => setPackagingFormData({ ...packagingFormData, is_active: e.target.checked })}\n                  />\n                  <span className=\"checkmark\"></span>\n                  Active\n                </label>\n              </div>\n\n              <div className=\"form-actions\">\n                <Button type=\"button\" variant=\"outline\" onClick={() => setShowPackagingModal(false)}>\n                  Cancel\n                </Button>\n                <Button type=\"submit\">\n                  {editingPackaging ? 'Update' : 'Create'} Packaging\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SystemManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}