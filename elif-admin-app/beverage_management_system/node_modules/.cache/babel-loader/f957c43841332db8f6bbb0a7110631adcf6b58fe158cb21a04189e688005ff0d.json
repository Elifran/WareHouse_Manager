{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-admin-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import SaleDetailModal from'../components/SaleDetailModal';import PrintButton from'../components/PrintButton';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{var _dashboardData$sales,_dashboardData$sales2,_dashboardData$sales3,_dashboardData$orders,_dashboardData$orders2,_dashboardData$orders3,_dashboardData$invent,_dashboardData$users,_dashboardData$suppli,_dashboardData$invent2,_dashboardData$invent3,_dashboardData$invent4,_dashboardData$invent5,_dashboardData$chart_,_dashboardData$recent,_dashboardData$recent2,_dashboardData$top_pr;const{t}=useTranslation();const{user}=useAuth();const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedPeriod,setSelectedPeriod]=useState('month');const[selectedSale,setSelectedSale]=useState(null);const[showSaleModal,setShowSaleModal]=useState(false);const[saleDetailLoading,setSaleDetailLoading]=useState(false);// Check if user is sales team (limited access)\nconst isSalesTeam=(user===null||user===void 0?void 0:user.role)==='sales';useEffect(()=>{fetchDashboardData();},[selectedPeriod,isSalesTeam]);// eslint-disable-line react-hooks/exhaustive-deps\nconst fetchDashboardData=async()=>{try{setLoading(true);// For Admin app, fetch comprehensive data including sales, orders, inventory, and users\nconst[salesResponse,purchaseOrdersResponse,productsResponse,usersResponse,suppliersResponse]=await Promise.all([api.get('/api/sales/'),api.get('/api/purchases/purchase-orders/'),api.get('/api/products/'),api.get('/api/core/users/'),api.get('/api/purchases/suppliers/')]);// Calculate comprehensive metrics - handle paginated responses\nconst salesData=salesResponse.data.results||salesResponse.data;const ordersData=purchaseOrdersResponse.data.results||purchaseOrdersResponse.data;const productsData=productsResponse.data.results||productsResponse.data;const usersData=usersResponse.data.results||usersResponse.data;const suppliersData=suppliersResponse.data.results||suppliersResponse.data;const totalSales=Array.isArray(salesData)?salesData.length:0;const totalOrders=Array.isArray(ordersData)?ordersData.length:0;const totalProducts=Array.isArray(productsData)?productsData.length:0;const totalUsers=Array.isArray(usersData)?usersData.length:0;const totalSuppliers=Array.isArray(suppliersData)?suppliersData.length:0;// Calculate total sales value\nconst totalSalesValue=Array.isArray(salesData)?salesData.reduce((sum,sale)=>{return sum+(parseFloat(sale.total_amount)||0);},0):0;// Calculate total order value\nconst totalOrderValue=Array.isArray(ordersData)?ordersData.reduce((sum,order)=>{return sum+(parseFloat(order.total_amount)||0);},0):0;setDashboardData({sales:{total_sales:totalSales,total_value:totalSalesValue},orders:{total_orders:totalOrders,total_value:totalOrderValue},inventory:{total_products:totalProducts},users:{total_users:totalUsers},suppliers:{total_suppliers:totalSuppliers}});}catch(err){setError(t('dashboard.failed_to_load'));console.error('Dashboard error:',err);}finally{setLoading(false);}};const handlePeriodChange=period=>{// Only allow period changes for non-sales users\nif(!isSalesTeam){setSelectedPeriod(period);}};const handleSaleClick=async sale=>{try{setSaleDetailLoading(true);setShowSaleModal(true);// Check if sale has an ID\nconst saleId=sale.id||sale.sale_id;if(!saleId){throw new Error(t('errors.not_found'));}// Fetch detailed sale information\nconst response=await api.get(\"/api/sales/\".concat(saleId,\"/\"));setSelectedSale(response.data);}catch(err){console.error('Failed to fetch sale details:',err);setError(\"Failed to load sale details: \".concat(err.message));setShowSaleModal(false);}finally{setSaleDetailLoading(false);}};const handleCloseSaleModal=()=>{setShowSaleModal(false);setSelectedSale(null);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.loading')})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.error')}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchDashboardData,children:t('common.retry')})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('dashboard.title')}),/*#__PURE__*/_jsx(\"p\",{children:t('dashboard.welcome',{username:user===null||user===void 0?void 0:user.username})}),isSalesTeam&&/*#__PURE__*/_jsx(\"p\",{className:\"role-indicator\",children:t('dashboard.sales_team_view')})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"period-selector\",children:[/*#__PURE__*/_jsx(\"label\",{children:t('dashboard.time_period')}),/*#__PURE__*/_jsxs(\"select\",{value:selectedPeriod,onChange:e=>handlePeriodChange(e.target.value),className:\"period-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:t('dashboard.daily')}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:t('dashboard.weekly')}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",children:t('dashboard.monthly')})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon sales\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Sales\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales=dashboardData.sales)===null||_dashboardData$sales===void 0?void 0:_dashboardData$sales.total_sales)||0}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales2=dashboardData.sales)===null||_dashboardData$sales2===void 0?void 0:(_dashboardData$sales3=_dashboardData$sales2.total_value)===null||_dashboardData$sales3===void 0?void 0:_dashboardData$sales3.toFixed(2))||'0.00',\" MGA Total Value\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon orders\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 7h-1V6a4 4 0 0 0-8 0v1H9a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM12 4a2 2 0 0 1 2 2v1h-4V6a2 2 0 0 1 2-2zm6 15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Orders\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$orders=dashboardData.orders)===null||_dashboardData$orders===void 0?void 0:_dashboardData$orders.total_orders)||0}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$orders2=dashboardData.orders)===null||_dashboardData$orders2===void 0?void 0:(_dashboardData$orders3=_dashboardData$orders2.total_value)===null||_dashboardData$orders3===void 0?void 0:_dashboardData$orders3.toFixed(2))||'0.00',\" MGA Total Value\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon inventory\",children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M12 2L2 7L12 12L22 7L12 2Z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M2 17L12 22L22 17\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M2 12L12 17L22 12\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Products\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent=dashboardData.inventory)===null||_dashboardData$invent===void 0?void 0:_dashboardData$invent.total_products)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:\"Active Products\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon users\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12 12 10.2 12 8 13.8 4 16 4M16 14C20.4 14 24 15.8 24 18V20H8V18C8 15.8 11.6 14 16 14M8 4C10.2 4 12 5.8 12 8S10.2 12 8 12 4 10.2 4 8 5.8 4 8 4M8 14C12.4 14 16 15.8 16 18V20H0V18C0 15.8 3.6 14 8 14Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Users\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$users=dashboardData.users)===null||_dashboardData$users===void 0?void 0:_dashboardData$users.total_users)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:\"System Users\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon suppliers\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Suppliers\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$suppli=dashboardData.suppliers)===null||_dashboardData$suppli===void 0?void 0:_dashboardData$suppli.total_suppliers)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:\"Active Suppliers\"})]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon retail\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M7 4V2c0-.55-.45-1-1-1s-1 .45-1 1v2H3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1H7zM21 4h-2V2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Retail Value\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-value\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent2=dashboardData.inventory)===null||_dashboardData$invent2===void 0?void 0:(_dashboardData$invent3=_dashboardData$invent2.total_retail_value)===null||_dashboardData$invent3===void 0?void 0:_dashboardData$invent3.toFixed(2))||'0.00',\" MGA\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent4=dashboardData.inventory)===null||_dashboardData$invent4===void 0?void 0:_dashboardData$invent4.low_stock_count)||0,\" low stock\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon alert\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Out of Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent5=dashboardData.inventory)===null||_dashboardData$invent5===void 0?void 0:_dashboardData$invent5.out_of_stock_count)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:\"products need restocking\"})]})]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.sales_trend')}),/*#__PURE__*/_jsx(\"div\",{className:\"sales-chart\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$chart_=dashboardData.chart_data)===null||_dashboardData$chart_===void 0?void 0:_dashboardData$chart_.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-bars\",children:dashboardData.chart_data.map((day,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chart-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bar-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar sales-bar\",style:{height:\"\".concat(Math.max(5,day.sales/Math.max(...dashboardData.chart_data.map(d=>d.sales))*100),\"%\")},title:\"\".concat(t('dashboard.sales'),\": \").concat(day.sales.toFixed(2),\" MGA\")}),/*#__PURE__*/_jsx(\"div\",{className:\"bar cost-bar\",style:{height:\"\".concat(Math.max(5,day.cost/Math.max(...dashboardData.chart_data.map(d=>d.sales))*100),\"%\")},title:\"\".concat(t('dashboard.cost'),\": \").concat(day.cost.toFixed(2),\" MGA\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:new Date(day.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-values\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"value sales\",children:[day.sales.toFixed(0),\" MGA\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"value cost\",children:[day.cost.toFixed(0),\" MGA\"]})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color sales\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.sales')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color cost\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.cost')})]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:t('dashboard.no_sales_data')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.recent_sales')}),(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$recent=dashboardData.recent_sales)===null||_dashboardData$recent===void 0?void 0:_dashboardData$recent.length)>0&&/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},dashboardData.recent_sales),{},{user_name:(user===null||user===void 0?void 0:user.username)||t('app.unknown_user'),user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:t('titles.sales_management_report'),type:\"sales_history\",printText:t('buttons.print_sales_report'),className:\"print-recent-sales-btn\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"recent-sales\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$recent2=dashboardData.recent_sales)===null||_dashboardData$recent2===void 0?void 0:_dashboardData$recent2.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"sales-list\",children:dashboardData.recent_sales.map((sale,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"sale-item clickable\",onClick:()=>handleSaleClick(sale),title:t('dashboard.click_to_view_details'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sale-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:sale.sale_number}),/*#__PURE__*/_jsx(\"p\",{children:sale.customer_name||t('dashboard.walk_in_customer')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sale-amount\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[sale.total_amount.toFixed(2),\" MGA\"]}),/*#__PURE__*/_jsx(\"small\",{children:new Date(sale.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sale-arrow\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"})})})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:\"No recent sales\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.top_selling_products')}),/*#__PURE__*/_jsx(\"div\",{className:\"top-products\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$top_pr=dashboardData.top_products)===null||_dashboardData$top_pr===void 0?void 0:_dashboardData$top_pr.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"products-list\",children:dashboardData.top_products.map((product,index)=>{var _product$total_cost,_product$profit,_product$profit_margi;return/*#__PURE__*/_jsxs(\"div\",{className:\"product-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:product.product__name}),/*#__PURE__*/_jsx(\"p\",{children:product.product__sku})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.sold'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[product.total_sold,\" \",product.unit_symbol||'piece']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.revenue'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[product.total_revenue.toFixed(2),\" MGA\"]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.cost'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[((_product$total_cost=product.total_cost)===null||_product$total_cost===void 0?void 0:_product$total_cost.toFixed(2))||'0.00',\" MGA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.profit'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value profit\",children:[((_product$profit=product.profit)===null||_product$profit===void 0?void 0:_product$profit.toFixed(2))||'0.00',\" MGA\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.margin'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value margin\",children:[((_product$profit_margi=product.profit_margin)===null||_product$profit_margi===void 0?void 0:_product$profit_margi.toFixed(1))||'0.0',\"%\"]})]})]})]})]},index);})}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:\"No sales data available\"})})]}),showSaleModal&&/*#__PURE__*/_jsx(SaleDetailModal,{sale:selectedSale,onClose:handleCloseSaleModal,loading:saleDetailLoading})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useAuth","api","SaleDetailModal","PrintButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_dashboardData$sales","_dashboardData$sales2","_dashboardData$sales3","_dashboardData$orders","_dashboardData$orders2","_dashboardData$orders3","_dashboardData$invent","_dashboardData$users","_dashboardData$suppli","_dashboardData$invent2","_dashboardData$invent3","_dashboardData$invent4","_dashboardData$invent5","_dashboardData$chart_","_dashboardData$recent","_dashboardData$recent2","_dashboardData$top_pr","t","user","dashboardData","setDashboardData","loading","setLoading","error","setError","selectedPeriod","setSelectedPeriod","selectedSale","setSelectedSale","showSaleModal","setShowSaleModal","saleDetailLoading","setSaleDetailLoading","isSalesTeam","role","fetchDashboardData","salesResponse","purchaseOrdersResponse","productsResponse","usersResponse","suppliersResponse","Promise","all","get","salesData","data","results","ordersData","productsData","usersData","suppliersData","totalSales","Array","isArray","length","totalOrders","totalProducts","totalUsers","totalSuppliers","totalSalesValue","reduce","sum","sale","parseFloat","total_amount","totalOrderValue","order","sales","total_sales","total_value","orders","total_orders","inventory","total_products","users","total_users","suppliers","total_suppliers","err","console","handlePeriodChange","period","handleSaleClick","saleId","id","sale_id","Error","response","concat","message","handleCloseSaleModal","className","children","onClick","username","value","onChange","e","target","viewBox","fill","d","toFixed","total_retail_value","low_stock_count","out_of_stock_count","chart_data","map","day","index","style","height","Math","max","title","cost","Date","date","toLocaleDateString","month","recent_sales","_objectSpread","user_name","user_id","print_timestamp","toISOString","print_id","now","random","toString","substr","type","printText","sale_number","customer_name","created_at","top_products","product","_product$total_cost","_product$profit","_product$profit_margi","product__name","product__sku","total_sold","unit_symbol","total_revenue","total_cost","profit","profit_margin","onClose"],"sources":["/home/el-ifran/WareHouse_Manager/elif-admin-app/beverage_management_system/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../services/api';\nimport SaleDetailModal from '../components/SaleDetailModal';\nimport PrintButton from '../components/PrintButton';\nimport './Dashboard.css';\n\nconst Dashboard = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('month');\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [showSaleModal, setShowSaleModal] = useState(false);\n  const [saleDetailLoading, setSaleDetailLoading] = useState(false);\n\n  // Check if user is sales team (limited access)\n  const isSalesTeam = user?.role === 'sales';\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [selectedPeriod, isSalesTeam]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchDashboardData = async () => {\n    try {\n      setLoading(true);\n      // For Admin app, fetch comprehensive data including sales, orders, inventory, and users\n      const [salesResponse, purchaseOrdersResponse, productsResponse, usersResponse, suppliersResponse] = await Promise.all([\n        api.get('/api/sales/'),\n        api.get('/api/purchases/purchase-orders/'),\n        api.get('/api/products/'),\n        api.get('/api/core/users/'),\n        api.get('/api/purchases/suppliers/')\n      ]);\n      \n      // Calculate comprehensive metrics - handle paginated responses\n      const salesData = salesResponse.data.results || salesResponse.data;\n      const ordersData = purchaseOrdersResponse.data.results || purchaseOrdersResponse.data;\n      const productsData = productsResponse.data.results || productsResponse.data;\n      const usersData = usersResponse.data.results || usersResponse.data;\n      const suppliersData = suppliersResponse.data.results || suppliersResponse.data;\n      \n      const totalSales = Array.isArray(salesData) ? salesData.length : 0;\n      const totalOrders = Array.isArray(ordersData) ? ordersData.length : 0;\n      const totalProducts = Array.isArray(productsData) ? productsData.length : 0;\n      const totalUsers = Array.isArray(usersData) ? usersData.length : 0;\n      const totalSuppliers = Array.isArray(suppliersData) ? suppliersData.length : 0;\n      \n      // Calculate total sales value\n      const totalSalesValue = Array.isArray(salesData) ? salesData.reduce((sum, sale) => {\n        return sum + (parseFloat(sale.total_amount) || 0);\n      }, 0) : 0;\n      \n      // Calculate total order value\n      const totalOrderValue = Array.isArray(ordersData) ? ordersData.reduce((sum, order) => {\n        return sum + (parseFloat(order.total_amount) || 0);\n      }, 0) : 0;\n      \n      setDashboardData({\n        sales: {\n          total_sales: totalSales,\n          total_value: totalSalesValue\n        },\n        orders: {\n          total_orders: totalOrders,\n          total_value: totalOrderValue\n        },\n        inventory: {\n          total_products: totalProducts\n        },\n        users: {\n          total_users: totalUsers\n        },\n        suppliers: {\n          total_suppliers: totalSuppliers\n        }\n      });\n    } catch (err) {\n      setError(t('dashboard.failed_to_load'));\n      console.error('Dashboard error:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePeriodChange = (period) => {\n    // Only allow period changes for non-sales users\n    if (!isSalesTeam) {\n      setSelectedPeriod(period);\n    }\n  };\n\n  const handleSaleClick = async (sale) => {\n    try {\n      setSaleDetailLoading(true);\n      setShowSaleModal(true);\n      \n      // Check if sale has an ID\n      const saleId = sale.id || sale.sale_id;\n      if (!saleId) {\n        throw new Error(t('errors.not_found'));\n      }\n      \n      // Fetch detailed sale information\n      const response = await api.get(`/api/sales/${saleId}/`);\n      setSelectedSale(response.data);\n    } catch (err) {\n      console.error('Failed to fetch sale details:', err);\n      setError(`Failed to load sale details: ${err.message}`);\n      setShowSaleModal(false);\n    } finally {\n      setSaleDetailLoading(false);\n    }\n  };\n\n  const handleCloseSaleModal = () => {\n    setShowSaleModal(false);\n    setSelectedSale(null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"dashboard-loading\">\n          <div className=\"spinner\"></div>\n          <span>{t('dashboard.loading')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"dashboard-error\">\n          <h2>{t('dashboard.error')}</h2>\n          <p>{error}</p>\n          <button onClick={fetchDashboardData}>{t('common.retry')}</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard-header\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1>{t('dashboard.title')}</h1>\n            <p>{t('dashboard.welcome', { username: user?.username })}</p>\n            {isSalesTeam && (\n              <p className=\"role-indicator\">{t('dashboard.sales_team_view')}</p>\n            )}\n          </div>\n          {!isSalesTeam && (\n            <div className=\"period-selector\">\n              <label>{t('dashboard.time_period')}</label>\n              <select \n                value={selectedPeriod} \n                onChange={(e) => handlePeriodChange(e.target.value)}\n                className=\"period-select\"\n              >\n                <option value=\"daily\">{t('dashboard.daily')}</option>\n                <option value=\"weekly\">{t('dashboard.weekly')}</option>\n                <option value=\"month\">{t('dashboard.monthly')}</option>\n              </select>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"dashboard-grid\">\n        {/* Sales Summary Card */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon sales\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Total Sales</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.sales?.total_sales || 0}\n            </p>\n            <p className=\"metric-label\">\n              {dashboardData?.sales?.total_value?.toFixed(2) || '0.00'} MGA Total Value\n            </p>\n          </div>\n        </div>\n\n        {/* Orders Summary Card */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon orders\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M19 7h-1V6a4 4 0 0 0-8 0v1H9a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM12 4a2 2 0 0 1 2 2v1h-4V6a2 2 0 0 1 2-2zm6 15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Total Orders</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.orders?.total_orders || 0}\n            </p>\n            <p className=\"metric-label\">\n              {dashboardData?.orders?.total_value?.toFixed(2) || '0.00'} MGA Total Value\n            </p>\n          </div>\n        </div>\n\n        {/* Inventory Summary Card */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon inventory\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M12 2L2 7L12 12L22 7L12 2Z\"/>\n              <path d=\"M2 17L12 22L22 17\"/>\n              <path d=\"M2 12L12 17L22 12\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Total Products</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.inventory?.total_products || 0}\n            </p>\n            <p className=\"metric-label\">\n              Active Products\n            </p>\n          </div>\n        </div>\n\n        {/* Users Summary Card */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon users\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12 12 10.2 12 8 13.8 4 16 4M16 14C20.4 14 24 15.8 24 18V20H8V18C8 15.8 11.6 14 16 14M8 4C10.2 4 12 5.8 12 8S10.2 12 8 12 4 10.2 4 8 5.8 4 8 4M8 14C12.4 14 16 15.8 16 18V20H0V18C0 15.8 3.6 14 8 14Z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Total Users</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.users?.total_users || 0}\n            </p>\n            <p className=\"metric-label\">\n              System Users\n            </p>\n          </div>\n        </div>\n\n        {/* Suppliers Summary Card */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon suppliers\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Total Suppliers</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.suppliers?.total_suppliers || 0}\n            </p>\n            <p className=\"metric-label\">\n              Active Suppliers\n            </p>\n          </div>\n        </div>\n\n\n        {!isSalesTeam && (\n          <div className=\"metric-card\">\n            <div className=\"metric-icon retail\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M7 4V2c0-.55-.45-1-1-1s-1 .45-1 1v2H3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1H7zM21 4h-2V2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1z\"/>\n              </svg>\n            </div>\n            <div className=\"metric-content\">\n              <h3>Retail Value</h3>\n              <p className=\"metric-value\">\n                {dashboardData?.inventory?.total_retail_value?.toFixed(2) || '0.00'} MGA\n              </p>\n              <p className=\"metric-label\">\n                {dashboardData?.inventory?.low_stock_count || 0} low stock\n              </p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"metric-card\">\n          <div className=\"metric-icon alert\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Out of Stock</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.inventory?.out_of_stock_count || 0}\n            </p>\n            <p className=\"metric-label\">products need restocking</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Sales Chart - Only for Admin/Manager */}\n      {!isSalesTeam && (\n        <div className=\"dashboard-section\">\n          <h2>{t('dashboard.sales_trend')}</h2>\n          <div className=\"sales-chart\">\n            {dashboardData?.chart_data?.length > 0 ? (\n              <div className=\"chart-container\">\n                <div className=\"chart-bars\">\n                  {dashboardData.chart_data.map((day, index) => (\n                    <div key={index} className=\"chart-bar\">\n                      <div className=\"bar-group\">\n                        <div \n                          className=\"bar sales-bar\" \n                          style={{ height: `${Math.max(5, (day.sales / Math.max(...dashboardData.chart_data.map(d => d.sales))) * 100)}%` }}\n                          title={`${t('dashboard.sales')}: ${day.sales.toFixed(2)} MGA`}\n                        ></div>\n                        <div \n                          className=\"bar cost-bar\" \n                          style={{ height: `${Math.max(5, (day.cost / Math.max(...dashboardData.chart_data.map(d => d.sales))) * 100)}%` }}\n                          title={`${t('dashboard.cost')}: ${day.cost.toFixed(2)} MGA`}\n                        ></div>\n                      </div>\n                      <div className=\"bar-label\">\n                        {new Date(day.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n                      </div>\n                      <div className=\"bar-values\">\n                        <div className=\"value sales\">{day.sales.toFixed(0)} MGA</div>\n                        <div className=\"value cost\">{day.cost.toFixed(0)} MGA</div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"chart-legend\">\n                  <div className=\"legend-item\">\n                    <div className=\"legend-color sales\"></div>\n                    <span>{t('dashboard.sales')}</span>\n                  </div>\n                  <div className=\"legend-item\">\n                    <div className=\"legend-color cost\"></div>\n                    <span>{t('dashboard.cost')}</span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <p className=\"no-data\">{t('dashboard.no_sales_data')}</p>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Recent Sales */}\n      <div className=\"dashboard-section\">\n        <div className=\"section-header\">\n          <h2>{t('dashboard.recent_sales')}</h2>\n          {dashboardData?.recent_sales?.length > 0 && (\n            <PrintButton\n              data={{\n                ...dashboardData.recent_sales,\n                user_name: user?.username || t('app.unknown_user'),\n                user_id: user?.id || 'unknown',\n                print_timestamp: new Date().toISOString(),\n                print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n              }}\n              title={t('titles.sales_management_report')}\n              type=\"sales_history\"\n              printText={t('buttons.print_sales_report')}\n              className=\"print-recent-sales-btn\"\n            />\n          )}\n        </div>\n        <div className=\"recent-sales\">\n          {dashboardData?.recent_sales?.length > 0 ? (\n            <div className=\"sales-list\">\n              {dashboardData.recent_sales.map((sale, index) => (\n                <div \n                  key={index} \n                  className=\"sale-item clickable\"\n                  onClick={() => handleSaleClick(sale)}\n                  title={t('dashboard.click_to_view_details')}\n                >\n                  <div className=\"sale-info\">\n                    <h4>{sale.sale_number}</h4>\n                    <p>{sale.customer_name || t('dashboard.walk_in_customer')}</p>\n                  </div>\n                  <div className=\"sale-amount\">\n                    <span>{sale.total_amount.toFixed(2)} MGA</span>\n                    <small>{new Date(sale.created_at).toLocaleDateString()}</small>\n                  </div>\n                  <div className=\"sale-arrow\">\n                    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"/>\n                    </svg>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"no-data\">No recent sales</p>\n          )}\n        </div>\n      </div>\n\n      {/* Top Products */}\n      <div className=\"dashboard-section\">\n        <h2>{t('dashboard.top_selling_products')}</h2>\n        <div className=\"top-products\">\n          {dashboardData?.top_products?.length > 0 ? (\n            <div className=\"products-list\">\n              {dashboardData.top_products.map((product, index) => (\n                <div key={index} className=\"product-item\">\n                  <div className=\"product-info\">\n                    <h4>{product.product__name}</h4>\n                    <p>{product.product__sku}</p>\n                  </div>\n                  <div className=\"product-stats\">\n                    <div className=\"stat-row\">\n                      <span className=\"stat-label\">{t('dashboard.sold')}:</span>\n                      <span className=\"stat-value\">{product.total_sold} {product.unit_symbol || 'piece'}</span>\n                    </div>\n                    <div className=\"stat-row\">\n                      <span className=\"stat-label\">{t('dashboard.revenue')}:</span>\n                      <span className=\"stat-value\">{product.total_revenue.toFixed(2)} MGA</span>\n                    </div>\n                    {!isSalesTeam && (\n                      <>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.cost')}:</span>\n                          <span className=\"stat-value\">{product.total_cost?.toFixed(2) || '0.00'} MGA</span>\n                        </div>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.profit')}:</span>\n                          <span className=\"stat-value profit\">{product.profit?.toFixed(2) || '0.00'} MGA</span>\n                        </div>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.margin')}:</span>\n                          <span className=\"stat-value margin\">{product.profit_margin?.toFixed(1) || '0.0'}%</span>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"no-data\">No sales data available</p>\n          )}\n        </div>\n      </div>\n\n      {/* Sale Detail Modal */}\n      {showSaleModal && (\n        <SaleDetailModal\n          sale={selectedSale}\n          onClose={handleCloseSaleModal}\n          loading={saleDetailLoading}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}