{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import api from'../services/api';import{useAuth}from'../contexts/AuthContext';import Table from'../components/Table';import Button from'../components/Button';import PrintButton from'../components/PrintButton';import'./SalesManagement.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SalesManagement=()=>{const{user}=useAuth();const[sales,setSales]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showDeleteModal,setShowDeleteModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[selectedSale,setSelectedSale]=useState(null);const[loadingSale,setLoadingSale]=useState(false);const[deleteFilters,setDeleteFilters]=useState({customer_name:'',start_date:'',end_date:'',status:'completed'});const[editFormData,setEditFormData]=useState({items:[]});const[products,setProducts]=useState([]);const[filters,setFilters]=useState({status:'',customer_name:'',start_date:'',end_date:''});const fetchSales=useCallback(async()=>{try{setLoading(true);setError('');const params=new URLSearchParams();if(filters.status)params.append('status',filters.status);if(filters.customer_name)params.append('search',filters.customer_name);if(filters.start_date)params.append('created_at__date__gte',filters.start_date);if(filters.end_date)params.append('created_at__date__lte',filters.end_date);const response=await api.get(\"/sales/?\".concat(params.toString()));setSales(response.data.results||response.data);}catch(err){var _err$response,_err$response$data;setError('Failed to fetch sales: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message));console.error('Sales fetch error:',err);}finally{setLoading(false);}},[filters]);useEffect(()=>{fetchSales();fetchProducts();},[fetchSales]);const fetchProducts=async()=>{try{const response=await api.get('/products/?is_active=true');setProducts(response.data.results||response.data);}catch(err){console.error('Products fetch error:',err);}};const handleDeleteSales=async()=>{try{setError('');const response=await api.delete('/sales/delete/',{data:deleteFilters});alert(\"Successfully deleted \".concat(response.data.deleted_count,\" sales\"));setShowDeleteModal(false);setDeleteFilters({customer_name:'',start_date:'',end_date:'',status:'completed'});fetchSales();fetchProducts();// Refresh products to update stock quantities\n}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to delete sales');console.error('Delete sales error:',err);}};const handleEditSale=async()=>{try{setError('');await api.put(\"/sales/\".concat(selectedSale.id,\"/edit/\"),editFormData);alert('Sale updated successfully');setShowEditModal(false);setSelectedSale(null);setEditFormData({items:[]});fetchSales();fetchProducts();// Refresh products to update stock quantities\n}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||'Failed to update sale');console.error('Edit sale error:',err);}};const handleFilterChange=e=>{const{name,value}=e.target;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleDeleteFilterChange=e=>{const{name,value}=e.target;setDeleteFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const clearFilters=()=>{setFilters({status:'',customer_name:'',start_date:'',end_date:''});};const openEditModal=async sale=>{try{setLoadingSale(true);setError('');// Fetch full sale data including items\nconst response=await api.get(\"/sales/\".concat(sale.id,\"/\"));const fullSale=response.data;setSelectedSale(fullSale);setEditFormData({items:fullSale.items.map(item=>{var _item$unit;return{product:item.product,quantity:item.quantity,unit:((_item$unit=item.unit)===null||_item$unit===void 0?void 0:_item$unit.id)||item.unit||'',unit_price:item.unit_price};})});setShowEditModal(true);}catch(err){setError('Failed to load sale details');console.error('Sale fetch error:',err);}finally{setLoadingSale(false);}};const addEditItem=()=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:[...prev.items,{product:'',quantity:1,unit:'',unit_price:0}]}));};const removeEditItem=index=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:prev.items.filter((_,i)=>i!==index)}));};const updateEditItem=(index,field,value)=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:prev.items.map((item,i)=>i===index?_objectSpread(_objectSpread({},item),{},{[field]:value}):item)}));};const getProductPrice=productId=>{const product=products.find(p=>p.id===parseInt(productId));return product?product.price:0;};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getStatusBadge=status=>{const statusClasses={pending:'status-pending',completed:'status-completed',cancelled:'status-cancelled',returned:'status-returned'};return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusClasses[status]||''),children:status});};// Check if user has permission to manage sales\nconst canManageSales=(user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager';if(!canManageSales){return/*#__PURE__*/_jsx(\"div\",{className:\"sales-management\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"access-denied\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You don't have permission to manage sales.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"sales-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sales Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},sales),{},{user_name:(user===null||user===void 0?void 0:user.username)||'Unknown User',user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:\"Sales Management Report\",type:\"sales_history\",printText:\"Print Sales Report\",className:\"print-sales-report-btn\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>setShowDeleteModal(true),children:\"Delete Sales\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(''),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:filters.status,onChange:handleFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"returned\",children:\"Returned\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",value:filters.customer_name,onChange:handleFilterChange,placeholder:\"Search by customer name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:filters.start_date,onChange:handleFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:filters.end_date,onChange:handleFilterChange})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-actions\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:clearFilters,children:\"Clear Filters\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-section\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading sales...\"}):/*#__PURE__*/_jsx(Table,{data:sales,columns:[{key:'sale_number',header:'Sale Number',render:(value,row)=>/*#__PURE__*/_jsx(\"span\",{className:\"sale-number\",children:value})},{key:'customer_name',header:'Customer',render:value=>value||'N/A'},{key:'status',header:'Status',render:value=>getStatusBadge(value)},{key:'items',header:'Items',render:(items,row)=>{if(!items||items.length===0){return/*#__PURE__*/_jsx(\"span\",{className:\"no-items\",children:\"No items\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"sale-items\",children:[items.slice(0,2).map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"sale-item-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-name\",children:item.product_name}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-details\",children:[item.quantity,\" \",item.unit_symbol||'pcs',\" \\xD7 \",formatCurrency(item.unit_price)]})]},index)),items.length>2&&/*#__PURE__*/_jsxs(\"div\",{className:\"more-items\",children:[\"+\",items.length-2,\" more items\"]})]});}},{key:'total_amount',header:'Total Amount',render:value=>formatCurrency(value)},{key:'created_at',header:'Date',render:value=>formatDate(value)},{key:'sold_by_name',header:'Sold By',render:value=>value||'N/A'},{key:'actions',header:'Actions',render:(_,row)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},row),{},{user_name:(user===null||user===void 0?void 0:user.username)||'Unknown User',user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:\"Sale Receipt\",type:\"sale\",printText:\"Print\",className:\"print-sale-btn\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"small\",onClick:()=>openEditModal(row),loading:loadingSale,disabled:loadingSale,children:\"Edit\"})]})}]})}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Delete Sales\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowDeleteModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Select criteria to delete sales:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer Name (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",value:deleteFilters.customer_name,onChange:handleDeleteFilterChange,placeholder:\"Leave empty to delete all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:deleteFilters.start_date,onChange:handleDeleteFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:deleteFilters.end_date,onChange:handleDeleteFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:deleteFilters.status,onChange:handleDeleteFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"returned\",children:\"Returned\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDeleteModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteSales,children:\"Delete Sales\"})]})]})]})}),showEditModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Edit Sale: \",(selectedSale===null||selectedSale===void 0?void 0:selectedSale.sale_number)||'Loading...']}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowEditModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:loadingSale?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading sale details...\"}):selectedSale?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"edit-sale-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",selectedSale.customer_name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",formatDate(selectedSale.created_at)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",getStatusBadge(selectedSale.status)]})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Sale Items\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-items\",children:[editFormData.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.product,onChange:e=>{updateEditItem(index,'product',e.target.value);updateEditItem(index,'unit_price',getProductPrice(e.target.value));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Product\"}),products.map(product=>/*#__PURE__*/_jsxs(\"option\",{value:product.id,children:[product.name,\" - \",formatCurrency(product.price)]},product.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:item.quantity,onChange:e=>updateEditItem(index,'quantity',parseInt(e.target.value)||1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.unit,onChange:e=>{const unitId=e.target.value;updateEditItem(index,'unit',unitId);// Auto-set unit price based on selected unit's price\nif(unitId){var _selectedProduct$avai;const selectedProduct=products.find(p=>p.id===parseInt(item.product));const selectedUnit=selectedProduct===null||selectedProduct===void 0?void 0:(_selectedProduct$avai=selectedProduct.available_units)===null||_selectedProduct$avai===void 0?void 0:_selectedProduct$avai.find(u=>u.id===parseInt(unitId));if(selectedUnit&&selectedUnit.price){updateEditItem(index,'unit_price',selectedUnit.price.toFixed(2));}}},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Unit\"}),(_selectedProduct$avai2=>{const selectedProduct=products.find(p=>p.id===parseInt(item.product));return(selectedProduct===null||selectedProduct===void 0?void 0:(_selectedProduct$avai2=selectedProduct.available_units)===null||_selectedProduct$avai2===void 0?void 0:_selectedProduct$avai2.map(unit=>{var _unit$price;return/*#__PURE__*/_jsxs(\"option\",{value:unit.id,children:[unit.name,\" (\",unit.symbol,\") - \",((_unit$price=unit.price)===null||_unit$price===void 0?void 0:_unit$price.toFixed(2))||'N/A',\" MGA\"]},unit.id);}))||[];})()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",step:\"0.01\",value:item.unit_price,onChange:e=>updateEditItem(index,'unit_price',parseFloat(e.target.value)||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatCurrency(item.quantity*item.unit_price),readOnly:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"small\",onClick:()=>removeEditItem(index),children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:addEditItem,children:\"Add Item\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowEditModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleEditSale,children:\"Update Sale\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Failed to load sale details\"})})]})})]});};export default SalesManagement;","map":{"version":3,"names":["React","useState","useEffect","useCallback","api","useAuth","Table","Button","PrintButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SalesManagement","user","sales","setSales","loading","setLoading","error","setError","showDeleteModal","setShowDeleteModal","showEditModal","setShowEditModal","selectedSale","setSelectedSale","loadingSale","setLoadingSale","deleteFilters","setDeleteFilters","customer_name","start_date","end_date","status","editFormData","setEditFormData","items","products","setProducts","filters","setFilters","fetchSales","params","URLSearchParams","append","response","get","concat","toString","data","results","err","_err$response","_err$response$data","message","console","fetchProducts","handleDeleteSales","delete","alert","deleted_count","_err$response2","_err$response2$data","handleEditSale","put","id","_err$response3","_err$response3$data","handleFilterChange","e","name","value","target","prev","_objectSpread","handleDeleteFilterChange","clearFilters","openEditModal","sale","fullSale","map","item","_item$unit","product","quantity","unit","unit_price","addEditItem","removeEditItem","index","filter","_","i","updateEditItem","field","getProductPrice","productId","find","p","parseInt","price","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDate","dateString","Date","toLocaleDateString","getStatusBadge","statusClasses","pending","completed","cancelled","returned","className","children","canManageSales","role","user_name","username","user_id","print_timestamp","toISOString","print_id","now","Math","random","substr","title","type","printText","variant","onClick","onChange","placeholder","columns","key","header","render","row","length","slice","product_name","unit_symbol","size","disabled","sale_number","created_at","min","unitId","_selectedProduct$avai","selectedProduct","selectedUnit","available_units","u","toFixed","_selectedProduct$avai2","_unit$price","symbol","step","parseFloat","readOnly"],"sources":["/home/el-ifran/WareHouse_Manager/beverage_management_system/src/pages/SalesManagement.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport Table from '../components/Table';\nimport Button from '../components/Button';\nimport PrintButton from '../components/PrintButton';\nimport './SalesManagement.css';\n\nconst SalesManagement = () => {\n  const { user } = useAuth();\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [loadingSale, setLoadingSale] = useState(false);\n  const [deleteFilters, setDeleteFilters] = useState({\n    customer_name: '',\n    start_date: '',\n    end_date: '',\n    status: 'completed'\n  });\n  const [editFormData, setEditFormData] = useState({\n    items: []\n  });\n  const [products, setProducts] = useState([]);\n  const [filters, setFilters] = useState({\n    status: '',\n    customer_name: '',\n    start_date: '',\n    end_date: ''\n  });\n\n  const fetchSales = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const params = new URLSearchParams();\n      \n      if (filters.status) params.append('status', filters.status);\n      if (filters.customer_name) params.append('search', filters.customer_name);\n      if (filters.start_date) params.append('created_at__date__gte', filters.start_date);\n      if (filters.end_date) params.append('created_at__date__lte', filters.end_date);\n      \n      const response = await api.get(`/sales/?${params.toString()}`);\n      setSales(response.data.results || response.data);\n    } catch (err) {\n      setError('Failed to fetch sales: ' + (err.response?.data?.error || err.message));\n      console.error('Sales fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters]);\n\n  useEffect(() => {\n    fetchSales();\n    fetchProducts();\n  }, [fetchSales]);\n\n  const fetchProducts = async () => {\n    try {\n      const response = await api.get('/products/?is_active=true');\n      setProducts(response.data.results || response.data);\n    } catch (err) {\n      console.error('Products fetch error:', err);\n    }\n  };\n\n  const handleDeleteSales = async () => {\n    try {\n      setError('');\n      const response = await api.delete('/sales/delete/', {\n        data: deleteFilters\n      });\n      \n      alert(`Successfully deleted ${response.data.deleted_count} sales`);\n      setShowDeleteModal(false);\n      setDeleteFilters({\n        customer_name: '',\n        start_date: '',\n        end_date: '',\n        status: 'completed'\n      });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to delete sales');\n      console.error('Delete sales error:', err);\n    }\n  };\n\n  const handleEditSale = async () => {\n    try {\n      setError('');\n      await api.put(`/sales/${selectedSale.id}/edit/`, editFormData);\n      alert('Sale updated successfully');\n      setShowEditModal(false);\n      setSelectedSale(null);\n      setEditFormData({ items: [] });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to update sale');\n      console.error('Edit sale error:', err);\n    }\n  };\n\n  const handleFilterChange = (e) => {\n    const { name, value } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleDeleteFilterChange = (e) => {\n    const { name, value } = e.target;\n    setDeleteFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      status: '',\n      customer_name: '',\n      start_date: '',\n      end_date: ''\n    });\n  };\n\n  const openEditModal = async (sale) => {\n    try {\n      setLoadingSale(true);\n      setError('');\n      \n      // Fetch full sale data including items\n      const response = await api.get(`/sales/${sale.id}/`);\n      const fullSale = response.data;\n      \n      setSelectedSale(fullSale);\n      setEditFormData({\n        items: fullSale.items.map(item => ({\n          product: item.product,\n          quantity: item.quantity,\n          unit: item.unit?.id || item.unit || '',\n          unit_price: item.unit_price\n        }))\n      });\n      setShowEditModal(true);\n    } catch (err) {\n      setError('Failed to load sale details');\n      console.error('Sale fetch error:', err);\n    } finally {\n      setLoadingSale(false);\n    }\n  };\n\n  const addEditItem = () => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: [...prev.items, { product: '', quantity: 1, unit: '', unit_price: 0 }]\n    }));\n  };\n\n  const removeEditItem = (index) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updateEditItem = (index, field, value) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.map((item, i) => \n        i === index ? { ...item, [field]: value } : item\n      )\n    }));\n  };\n\n  const getProductPrice = (productId) => {\n    const product = products.find(p => p.id === parseInt(productId));\n    return product ? product.price : 0;\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getStatusBadge = (status) => {\n    const statusClasses = {\n      pending: 'status-pending',\n      completed: 'status-completed',\n      cancelled: 'status-cancelled',\n      returned: 'status-returned'\n    };\n    return <span className={`status-badge ${statusClasses[status] || ''}`}>{status}</span>;\n  };\n\n  // Check if user has permission to manage sales\n  const canManageSales = user?.role === 'admin' || user?.role === 'manager';\n\n  if (!canManageSales) {\n    return (\n      <div className=\"sales-management\">\n        <div className=\"access-denied\">\n          <h2>Access Denied</h2>\n          <p>You don't have permission to manage sales.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"sales-management\">\n      <div className=\"page-header\">\n        <h1>Sales Management</h1>\n        <div className=\"header-actions\">\n          <PrintButton\n            data={{\n              ...sales,\n              user_name: user?.username || 'Unknown User',\n              user_id: user?.id || 'unknown',\n              print_timestamp: new Date().toISOString(),\n              print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n            }}\n            title=\"Sales Management Report\"\n            type=\"sales_history\"\n            printText=\"Print Sales Report\"\n            className=\"print-sales-report-btn\"\n          />\n          <Button \n            variant=\"danger\" \n            onClick={() => setShowDeleteModal(true)}\n          >\n            Delete Sales\n          </Button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n          <button onClick={() => setError('')}>&times;</button>\n        </div>\n      )}\n\n      {/* Filters */}\n      <div className=\"filters-section\">\n        <h3>Filters</h3>\n        <div className=\"filters-grid\">\n          <div className=\"form-group\">\n            <label>Status</label>\n            <select\n              name=\"status\"\n              value={filters.status}\n              onChange={handleFilterChange}\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"cancelled\">Cancelled</option>\n              <option value=\"returned\">Returned</option>\n            </select>\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Customer Name</label>\n            <input\n              type=\"text\"\n              name=\"customer_name\"\n              value={filters.customer_name}\n              onChange={handleFilterChange}\n              placeholder=\"Search by customer name\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Start Date</label>\n            <input\n              type=\"date\"\n              name=\"start_date\"\n              value={filters.start_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>End Date</label>\n            <input\n              type=\"date\"\n              name=\"end_date\"\n              value={filters.end_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n        </div>\n        \n        <div className=\"filter-actions\">\n          <Button variant=\"secondary\" onClick={clearFilters}>\n            Clear Filters\n          </Button>\n        </div>\n      </div>\n\n      {/* Sales Table */}\n      <div className=\"table-section\">\n        {loading ? (\n          <div className=\"loading\">Loading sales...</div>\n        ) : (\n          <Table\n            data={sales}\n            columns={[\n              {\n                key: 'sale_number',\n                header: 'Sale Number',\n                render: (value, row) => (\n                  <span className=\"sale-number\">{value}</span>\n                )\n              },\n              {\n                key: 'customer_name',\n                header: 'Customer',\n                render: (value) => value || 'N/A'\n              },\n              {\n                key: 'status',\n                header: 'Status',\n                render: (value) => getStatusBadge(value)\n              },\n              {\n                key: 'items',\n                header: 'Items',\n                render: (items, row) => {\n                  if (!items || items.length === 0) {\n                    return <span className=\"no-items\">No items</span>;\n                  }\n                  return (\n                    <div className=\"sale-items\">\n                      {items.slice(0, 2).map((item, index) => (\n                        <div key={index} className=\"sale-item-row\">\n                          <span className=\"item-name\">{item.product_name}</span>\n                          <span className=\"item-details\">\n                            {item.quantity} {item.unit_symbol || 'pcs'} Ã— {formatCurrency(item.unit_price)}\n                          </span>\n                        </div>\n                      ))}\n                      {items.length > 2 && (\n                        <div className=\"more-items\">+{items.length - 2} more items</div>\n                      )}\n                    </div>\n                  );\n                }\n              },\n              {\n                key: 'total_amount',\n                header: 'Total Amount',\n                render: (value) => formatCurrency(value)\n              },\n              {\n                key: 'created_at',\n                header: 'Date',\n                render: (value) => formatDate(value)\n              },\n              {\n                key: 'sold_by_name',\n                header: 'Sold By',\n                render: (value) => value || 'N/A'\n              },\n              {\n                key: 'actions',\n                header: 'Actions',\n                render: (_, row) => (\n                  <div className=\"action-buttons\">\n                    <PrintButton\n                      data={{\n                        ...row,\n                        user_name: user?.username || 'Unknown User',\n                        user_id: user?.id || 'unknown',\n                        print_timestamp: new Date().toISOString(),\n                        print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n                      }}\n                      title=\"Sale Receipt\"\n                      type=\"sale\"\n                      printText=\"Print\"\n                      className=\"print-sale-btn\"\n                    />\n                    <Button \n                      variant=\"primary\" \n                      size=\"small\"\n                      onClick={() => openEditModal(row)}\n                      loading={loadingSale}\n                      disabled={loadingSale}\n                    >\n                      Edit\n                    </Button>\n                  </div>\n                )\n              }\n            ]}\n          />\n        )}\n      </div>\n\n      {/* Delete Sales Modal */}\n      {showDeleteModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Delete Sales</h2>\n              <button className=\"close-button\" onClick={() => setShowDeleteModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <p>Select criteria to delete sales:</p>\n              \n              <div className=\"form-group\">\n                <label>Customer Name (optional)</label>\n                <input\n                  type=\"text\"\n                  name=\"customer_name\"\n                  value={deleteFilters.customer_name}\n                  onChange={handleDeleteFilterChange}\n                  placeholder=\"Leave empty to delete all\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Start Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"start_date\"\n                  value={deleteFilters.start_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>End Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"end_date\"\n                  value={deleteFilters.end_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Status</label>\n                <select\n                  name=\"status\"\n                  value={deleteFilters.status}\n                  onChange={handleDeleteFilterChange}\n                >\n                  <option value=\"completed\">Completed</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                  <option value=\"returned\">Returned</option>\n                </select>\n              </div>\n              \n              <div className=\"modal-actions\">\n                <Button variant=\"secondary\" onClick={() => setShowDeleteModal(false)}>\n                  Cancel\n                </Button>\n                <Button variant=\"danger\" onClick={handleDeleteSales}>\n                  Delete Sales\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Sale Modal */}\n      {showEditModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content large-modal\">\n            <div className=\"modal-header\">\n              <h2>Edit Sale: {selectedSale?.sale_number || 'Loading...'}</h2>\n              <button className=\"close-button\" onClick={() => setShowEditModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              {loadingSale ? (\n                <div className=\"loading\">Loading sale details...</div>\n              ) : selectedSale ? (\n                <>\n                  <div className=\"edit-sale-info\">\n                    <p><strong>Customer:</strong> {selectedSale.customer_name || 'N/A'}</p>\n                    <p><strong>Date:</strong> {formatDate(selectedSale.created_at)}</p>\n                    <p><strong>Status:</strong> {getStatusBadge(selectedSale.status)}</p>\n                  </div>\n                  \n                  <h3>Sale Items</h3>\n              <div className=\"edit-items\">\n                {editFormData.items.map((item, index) => (\n                  <div key={index} className=\"edit-item\">\n                    <div className=\"form-group\">\n                      <label>Product</label>\n                      <select\n                        value={item.product}\n                        onChange={(e) => {\n                          updateEditItem(index, 'product', e.target.value);\n                          updateEditItem(index, 'unit_price', getProductPrice(e.target.value));\n                        }}\n                      >\n                        <option value=\"\">Select Product</option>\n                        {products.map(product => (\n                          <option key={product.id} value={product.id}>\n                            {product.name} - {formatCurrency(product.price)}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Quantity</label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateEditItem(index, 'quantity', parseInt(e.target.value) || 1)}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Unit</label>\n                      <select\n                        value={item.unit}\n                        onChange={(e) => {\n                          const unitId = e.target.value;\n                          updateEditItem(index, 'unit', unitId);\n                          \n                          // Auto-set unit price based on selected unit's price\n                          if (unitId) {\n                            const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                            const selectedUnit = selectedProduct?.available_units?.find(u => u.id === parseInt(unitId));\n                            if (selectedUnit && selectedUnit.price) {\n                              updateEditItem(index, 'unit_price', selectedUnit.price.toFixed(2));\n                            }\n                          }\n                        }}\n                      >\n                        <option value=\"\">Select Unit</option>\n                        {(() => {\n                          const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                          return selectedProduct?.available_units?.map(unit => (\n                            <option key={unit.id} value={unit.id}>\n                              {unit.name} ({unit.symbol}) - {unit.price?.toFixed(2) || 'N/A'} MGA\n                            </option>\n                          )) || [];\n                        })()}\n                      </select>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Unit Price</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        value={item.unit_price}\n                        onChange={(e) => updateEditItem(index, 'unit_price', parseFloat(e.target.value) || 0)}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Total</label>\n                      <input\n                        type=\"text\"\n                        value={formatCurrency(item.quantity * item.unit_price)}\n                        readOnly\n                      />\n                    </div>\n                    \n                    <Button \n                      variant=\"danger\" \n                      size=\"small\"\n                      onClick={() => removeEditItem(index)}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                ))}\n                \n                <Button variant=\"primary\" onClick={addEditItem}>\n                  Add Item\n                </Button>\n              </div>\n              \n                  <div className=\"modal-actions\">\n                    <Button variant=\"secondary\" onClick={() => setShowEditModal(false)}>\n                      Cancel\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleEditSale}>\n                      Update Sale\n                    </Button>\n                  </div>\n                </>\n              ) : (\n                <div className=\"error-message\">\n                  Failed to load sale details\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SalesManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}