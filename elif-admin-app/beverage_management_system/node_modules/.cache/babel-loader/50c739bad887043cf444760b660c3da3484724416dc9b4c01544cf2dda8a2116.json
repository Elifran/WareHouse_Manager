{"ast":null,"code":"var _jsxFileName = \"/home/el-ifran/WareHouse_Manager/beverage_management_system/src/pages/SalesManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport Table from '../components/Table';\nimport Button from '../components/Button';\nimport PrintButton from '../components/PrintButton';\nimport './SalesManagement.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SalesManagement = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [loadingSale, setLoadingSale] = useState(false);\n  const [deleteFilters, setDeleteFilters] = useState({\n    customer_name: '',\n    start_date: '',\n    end_date: '',\n    status: 'completed'\n  });\n  const [editFormData, setEditFormData] = useState({\n    items: []\n  });\n  const [products, setProducts] = useState([]);\n  const [filters, setFilters] = useState({\n    status: '',\n    customer_name: '',\n    start_date: '',\n    end_date: ''\n  });\n  const fetchSales = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const params = new URLSearchParams();\n      if (filters.status) params.append('status', filters.status);\n      if (filters.customer_name) params.append('search', filters.customer_name);\n      if (filters.start_date) params.append('created_at__date__gte', filters.start_date);\n      if (filters.end_date) params.append('created_at__date__lte', filters.end_date);\n      const response = await api.get(`/sales/?${params.toString()}`);\n      setSales(response.data.results || response.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError('Failed to fetch sales: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n      console.error('Sales fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters]);\n  useEffect(() => {\n    fetchSales();\n    fetchProducts();\n  }, [fetchSales]);\n  const fetchProducts = async () => {\n    try {\n      const response = await api.get('/products/?is_active=true');\n      setProducts(response.data.results || response.data);\n    } catch (err) {\n      console.error('Products fetch error:', err);\n    }\n  };\n  const handleDeleteSales = async () => {\n    try {\n      setError('');\n      const response = await api.delete('/sales/delete/', {\n        data: deleteFilters\n      });\n      alert(`Successfully deleted ${response.data.deleted_count} sales`);\n      setShowDeleteModal(false);\n      setDeleteFilters({\n        customer_name: '',\n        start_date: '',\n        end_date: '',\n        status: 'completed'\n      });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to delete sales');\n      console.error('Delete sales error:', err);\n    }\n  };\n  const handleEditSale = async () => {\n    try {\n      setError('');\n      await api.put(`/sales/${selectedSale.id}/edit/`, editFormData);\n      alert('Sale updated successfully');\n      setShowEditModal(false);\n      setSelectedSale(null);\n      setEditFormData({\n        items: []\n      });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to update sale');\n      console.error('Edit sale error:', err);\n    }\n  };\n  const handleFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleDeleteFilterChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setDeleteFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const clearFilters = () => {\n    setFilters({\n      status: '',\n      customer_name: '',\n      start_date: '',\n      end_date: ''\n    });\n  };\n  const openEditModal = async sale => {\n    try {\n      setLoadingSale(true);\n      setError('');\n\n      // Fetch full sale data including items\n      const response = await api.get(`/sales/${sale.id}/`);\n      const fullSale = response.data;\n      setSelectedSale(fullSale);\n      setEditFormData({\n        items: fullSale.items.map(item => {\n          var _item$unit;\n          return {\n            product: item.product,\n            quantity: item.quantity,\n            unit: ((_item$unit = item.unit) === null || _item$unit === void 0 ? void 0 : _item$unit.id) || item.unit || '',\n            unit_price: item.unit_price\n          };\n        })\n      });\n      setShowEditModal(true);\n    } catch (err) {\n      setError('Failed to load sale details');\n      console.error('Sale fetch error:', err);\n    } finally {\n      setLoadingSale(false);\n    }\n  };\n  const addEditItem = () => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: [...prev.items, {\n        product: '',\n        quantity: 1,\n        unit: '',\n        unit_price: 0\n      }]\n    }));\n  };\n  const removeEditItem = index => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n  const updateEditItem = (index, field, value) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.map((item, i) => i === index ? {\n        ...item,\n        [field]: value\n      } : item)\n    }));\n  };\n  const getProductPrice = productId => {\n    const product = products.find(p => p.id === parseInt(productId));\n    return product ? product.price : 0;\n  };\n  const formatCurrency = amount => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD'\n    }).format(amount);\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleDateString();\n  };\n  const getStatusBadge = status => {\n    const statusClasses = {\n      pending: 'status-pending',\n      completed: 'status-completed',\n      cancelled: 'status-cancelled',\n      returned: 'status-returned'\n    };\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `status-badge ${statusClasses[status] || ''}`,\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 12\n    }, this);\n  };\n\n  // Check if user has permission to manage sales\n  const canManageSales = (user === null || user === void 0 ? void 0 : user.role) === 'admin' || (user === null || user === void 0 ? void 0 : user.role) === 'manager';\n  if (!canManageSales) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sales-management\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"access-denied\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Access Denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You don't have permission to manage sales.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sales-management\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Sales Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(PrintButton, {\n          data: {\n            ...sales,\n            user_name: (user === null || user === void 0 ? void 0 : user.username) || 'Unknown User',\n            user_id: (user === null || user === void 0 ? void 0 : user.id) || 'unknown',\n            print_timestamp: new Date().toISOString(),\n            print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n          },\n          title: \"Sales Management Report\",\n          type: \"sales_history\",\n          printText: \"Print Sales Report\",\n          className: \"print-sales-report-btn\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: () => setShowDeleteModal(true),\n          children: \"Delete Sales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(''),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filters-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Filters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filters-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"status\",\n            value: filters.status,\n            onChange: handleFilterChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All Statuses\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pending\",\n              children: \"Pending\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"completed\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cancelled\",\n              children: \"Cancelled\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"returned\",\n              children: \"Returned\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Customer Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"customer_name\",\n            value: filters.customer_name,\n            onChange: handleFilterChange,\n            placeholder: \"Search by customer name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Start Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"start_date\",\n            value: filters.start_date,\n            onChange: handleFilterChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"End Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"end_date\",\n            value: filters.end_date,\n            onChange: handleFilterChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-actions\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: clearFilters,\n          children: \"Clear Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-section\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading sales...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Table, {\n        data: sales,\n        columns: [{\n          key: 'sale_number',\n          header: 'Sale Number',\n          render: (value, row) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"sale-number\",\n            children: value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 19\n          }, this)\n        }, {\n          key: 'customer_name',\n          header: 'Customer',\n          render: value => value || 'N/A'\n        }, {\n          key: 'status',\n          header: 'Status',\n          render: value => getStatusBadge(value)\n        }, {\n          key: 'items',\n          header: 'Items',\n          render: (items, row) => {\n            if (!items || items.length === 0) {\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"no-items\",\n                children: \"No items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 28\n              }, this);\n            }\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"sale-items\",\n              children: [items.slice(0, 2).map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sale-item-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"item-name\",\n                  children: item.product_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"item-details\",\n                  children: [item.quantity, \" \", item.unit_symbol || 'pcs', \" \\xD7 \", formatCurrency(item.unit_price)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 25\n              }, this)), items.length > 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"more-items\",\n                children: [\"+\", items.length - 2, \" more items\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 21\n            }, this);\n          }\n        }, {\n          key: 'total_amount',\n          header: 'Total Amount',\n          render: value => formatCurrency(value)\n        }, {\n          key: 'created_at',\n          header: 'Date',\n          render: value => formatDate(value)\n        }, {\n          key: 'sold_by_name',\n          header: 'Sold By',\n          render: value => value || 'N/A'\n        }, {\n          key: 'actions',\n          header: 'Actions',\n          render: (_, row) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"action-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(PrintButton, {\n              data: {\n                ...row,\n                user_name: (user === null || user === void 0 ? void 0 : user.username) || 'Unknown User',\n                user_id: (user === null || user === void 0 ? void 0 : user.id) || 'unknown',\n                print_timestamp: new Date().toISOString(),\n                print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n              },\n              title: \"Sale Receipt\",\n              type: \"sale\",\n              printText: \"Print\",\n              className: \"print-sale-btn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              size: \"small\",\n              onClick: () => openEditModal(row),\n              loading: loadingSale,\n              disabled: loadingSale,\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 19\n          }, this)\n        }]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), showDeleteModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Delete Sales\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-button\",\n            onClick: () => setShowDeleteModal(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Select criteria to delete sales:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Customer Name (optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"customer_name\",\n              value: deleteFilters.customer_name,\n              onChange: handleDeleteFilterChange,\n              placeholder: \"Leave empty to delete all\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Start Date (optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"start_date\",\n              value: deleteFilters.start_date,\n              onChange: handleDeleteFilterChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"End Date (optional)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"end_date\",\n              value: deleteFilters.end_date,\n              onChange: handleDeleteFilterChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"status\",\n              value: deleteFilters.status,\n              onChange: handleDeleteFilterChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"completed\",\n                children: \"Completed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 461,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"pending\",\n                children: \"Pending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 462,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cancelled\",\n                children: \"Cancelled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"returned\",\n                children: \"Returned\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 456,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-actions\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: () => setShowDeleteModal(false),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              onClick: handleDeleteSales,\n              children: \"Delete Sales\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }, this), showEditModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content large-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [\"Edit Sale: \", (selectedSale === null || selectedSale === void 0 ? void 0 : selectedSale.sale_number) || 'Loading...']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-button\",\n            onClick: () => setShowEditModal(false),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: loadingSale ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"Loading sale details...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 17\n          }, this) : selectedSale ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-sale-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Customer:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 24\n                }, this), \" \", selectedSale.customer_name || 'N/A']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 24\n                }, this), \" \", formatDate(selectedSale.created_at)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Status:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 24\n                }, this), \" \", getStatusBadge(selectedSale.status)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Sale Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-items\",\n              children: [editFormData.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Product\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: item.product,\n                    onChange: e => {\n                      updateEditItem(index, 'product', e.target.value);\n                      updateEditItem(index, 'unit_price', getProductPrice(e.target.value));\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select Product\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 513,\n                      columnNumber: 25\n                    }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: product.id,\n                      children: [product.name, \" - \", formatCurrency(product.price)]\n                    }, product.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 515,\n                      columnNumber: 27\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Quantity\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"1\",\n                    value: item.quantity,\n                    onChange: e => updateEditItem(index, 'quantity', parseInt(e.target.value) || 1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 524,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Unit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 533,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    value: item.unit,\n                    onChange: e => {\n                      const unitId = e.target.value;\n                      updateEditItem(index, 'unit', unitId);\n\n                      // Auto-set unit price based on selected unit's price\n                      if (unitId) {\n                        var _selectedProduct$avai;\n                        const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                        const selectedUnit = selectedProduct === null || selectedProduct === void 0 ? void 0 : (_selectedProduct$avai = selectedProduct.available_units) === null || _selectedProduct$avai === void 0 ? void 0 : _selectedProduct$avai.find(u => u.id === parseInt(unitId));\n                        if (selectedUnit && selectedUnit.price) {\n                          updateEditItem(index, 'unit_price', selectedUnit.price.toFixed(2));\n                        }\n                      }\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select Unit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 550,\n                      columnNumber: 25\n                    }, this), (_selectedProduct$avai2 => {\n                      const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                      return (selectedProduct === null || selectedProduct === void 0 ? void 0 : (_selectedProduct$avai2 = selectedProduct.available_units) === null || _selectedProduct$avai2 === void 0 ? void 0 : _selectedProduct$avai2.map(unit => {\n                        var _unit$price;\n                        return /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: unit.id,\n                          children: [unit.name, \" (\", unit.symbol, \") - \", ((_unit$price = unit.price) === null || _unit$price === void 0 ? void 0 : _unit$price.toFixed(2)) || 'N/A', \" MGA\"]\n                        }, unit.id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 554,\n                          columnNumber: 29\n                        }, this);\n                      })) || [];\n                    })()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Unit Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    min: \"0\",\n                    step: \"0.01\",\n                    value: item.unit_price,\n                    onChange: e => updateEditItem(index, 'unit_price', parseFloat(e.target.value) || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 574,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: formatCurrency(item.quantity * item.unit_price),\n                    readOnly: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"danger\",\n                  size: \"small\",\n                  onClick: () => removeEditItem(index),\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 19\n              }, this)), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: addEditItem,\n                children: \"Add Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-actions\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                onClick: () => setShowEditModal(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                onClick: handleEditSale,\n                children: \"Update Sale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-message\",\n            children: \"Failed to load sale details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n};\n_s(SalesManagement, \"EMsZWzY/WtaHjZfxWOqJLophqy4=\", false, function () {\n  return [useAuth];\n});\n_c = SalesManagement;\nexport default SalesManagement;\nvar _c;\n$RefreshReg$(_c, \"SalesManagement\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","api","useAuth","Table","Button","PrintButton","jsxDEV","_jsxDEV","Fragment","_Fragment","SalesManagement","_s","user","sales","setSales","loading","setLoading","error","setError","showDeleteModal","setShowDeleteModal","showEditModal","setShowEditModal","selectedSale","setSelectedSale","loadingSale","setLoadingSale","deleteFilters","setDeleteFilters","customer_name","start_date","end_date","status","editFormData","setEditFormData","items","products","setProducts","filters","setFilters","fetchSales","params","URLSearchParams","append","response","get","toString","data","results","err","_err$response","_err$response$data","message","console","fetchProducts","handleDeleteSales","delete","alert","deleted_count","_err$response2","_err$response2$data","handleEditSale","put","id","_err$response3","_err$response3$data","handleFilterChange","e","name","value","target","prev","handleDeleteFilterChange","clearFilters","openEditModal","sale","fullSale","map","item","_item$unit","product","quantity","unit","unit_price","addEditItem","removeEditItem","index","filter","_","i","updateEditItem","field","getProductPrice","productId","find","p","parseInt","price","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDate","dateString","Date","toLocaleDateString","getStatusBadge","statusClasses","pending","completed","cancelled","returned","className","children","fileName","_jsxFileName","lineNumber","columnNumber","canManageSales","role","user_name","username","user_id","print_timestamp","toISOString","print_id","now","Math","random","substr","title","type","printText","variant","onClick","onChange","placeholder","columns","key","header","render","row","length","slice","product_name","unit_symbol","size","disabled","sale_number","created_at","min","unitId","_selectedProduct$avai","selectedProduct","selectedUnit","available_units","u","toFixed","_selectedProduct$avai2","_unit$price","symbol","step","parseFloat","readOnly","_c","$RefreshReg$"],"sources":["/home/el-ifran/WareHouse_Manager/beverage_management_system/src/pages/SalesManagement.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport Table from '../components/Table';\nimport Button from '../components/Button';\nimport PrintButton from '../components/PrintButton';\nimport './SalesManagement.css';\n\nconst SalesManagement = () => {\n  const { user } = useAuth();\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [loadingSale, setLoadingSale] = useState(false);\n  const [deleteFilters, setDeleteFilters] = useState({\n    customer_name: '',\n    start_date: '',\n    end_date: '',\n    status: 'completed'\n  });\n  const [editFormData, setEditFormData] = useState({\n    items: []\n  });\n  const [products, setProducts] = useState([]);\n  const [filters, setFilters] = useState({\n    status: '',\n    customer_name: '',\n    start_date: '',\n    end_date: ''\n  });\n\n  const fetchSales = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError('');\n      const params = new URLSearchParams();\n      \n      if (filters.status) params.append('status', filters.status);\n      if (filters.customer_name) params.append('search', filters.customer_name);\n      if (filters.start_date) params.append('created_at__date__gte', filters.start_date);\n      if (filters.end_date) params.append('created_at__date__lte', filters.end_date);\n      \n      const response = await api.get(`/sales/?${params.toString()}`);\n      setSales(response.data.results || response.data);\n    } catch (err) {\n      setError('Failed to fetch sales: ' + (err.response?.data?.error || err.message));\n      console.error('Sales fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, [filters]);\n\n  useEffect(() => {\n    fetchSales();\n    fetchProducts();\n  }, [fetchSales]);\n\n  const fetchProducts = async () => {\n    try {\n      const response = await api.get('/products/?is_active=true');\n      setProducts(response.data.results || response.data);\n    } catch (err) {\n      console.error('Products fetch error:', err);\n    }\n  };\n\n  const handleDeleteSales = async () => {\n    try {\n      setError('');\n      const response = await api.delete('/sales/delete/', {\n        data: deleteFilters\n      });\n      \n      alert(`Successfully deleted ${response.data.deleted_count} sales`);\n      setShowDeleteModal(false);\n      setDeleteFilters({\n        customer_name: '',\n        start_date: '',\n        end_date: '',\n        status: 'completed'\n      });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to delete sales');\n      console.error('Delete sales error:', err);\n    }\n  };\n\n  const handleEditSale = async () => {\n    try {\n      setError('');\n      await api.put(`/sales/${selectedSale.id}/edit/`, editFormData);\n      alert('Sale updated successfully');\n      setShowEditModal(false);\n      setSelectedSale(null);\n      setEditFormData({ items: [] });\n      fetchSales();\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to update sale');\n      console.error('Edit sale error:', err);\n    }\n  };\n\n  const handleFilterChange = (e) => {\n    const { name, value } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleDeleteFilterChange = (e) => {\n    const { name, value } = e.target;\n    setDeleteFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      status: '',\n      customer_name: '',\n      start_date: '',\n      end_date: ''\n    });\n  };\n\n  const openEditModal = async (sale) => {\n    try {\n      setLoadingSale(true);\n      setError('');\n      \n      // Fetch full sale data including items\n      const response = await api.get(`/sales/${sale.id}/`);\n      const fullSale = response.data;\n      \n      setSelectedSale(fullSale);\n      setEditFormData({\n        items: fullSale.items.map(item => ({\n          product: item.product,\n          quantity: item.quantity,\n          unit: item.unit?.id || item.unit || '',\n          unit_price: item.unit_price\n        }))\n      });\n      setShowEditModal(true);\n    } catch (err) {\n      setError('Failed to load sale details');\n      console.error('Sale fetch error:', err);\n    } finally {\n      setLoadingSale(false);\n    }\n  };\n\n  const addEditItem = () => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: [...prev.items, { product: '', quantity: 1, unit: '', unit_price: 0 }]\n    }));\n  };\n\n  const removeEditItem = (index) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updateEditItem = (index, field, value) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.map((item, i) => \n        i === index ? { ...item, [field]: value } : item\n      )\n    }));\n  };\n\n  const getProductPrice = (productId) => {\n    const product = products.find(p => p.id === parseInt(productId));\n    return product ? product.price : 0;\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getStatusBadge = (status) => {\n    const statusClasses = {\n      pending: 'status-pending',\n      completed: 'status-completed',\n      cancelled: 'status-cancelled',\n      returned: 'status-returned'\n    };\n    return <span className={`status-badge ${statusClasses[status] || ''}`}>{status}</span>;\n  };\n\n  // Check if user has permission to manage sales\n  const canManageSales = user?.role === 'admin' || user?.role === 'manager';\n\n  if (!canManageSales) {\n    return (\n      <div className=\"sales-management\">\n        <div className=\"access-denied\">\n          <h2>Access Denied</h2>\n          <p>You don't have permission to manage sales.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"sales-management\">\n      <div className=\"page-header\">\n        <h1>Sales Management</h1>\n        <div className=\"header-actions\">\n          <PrintButton\n            data={{\n              ...sales,\n              user_name: user?.username || 'Unknown User',\n              user_id: user?.id || 'unknown',\n              print_timestamp: new Date().toISOString(),\n              print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n            }}\n            title=\"Sales Management Report\"\n            type=\"sales_history\"\n            printText=\"Print Sales Report\"\n            className=\"print-sales-report-btn\"\n          />\n          <Button \n            variant=\"danger\" \n            onClick={() => setShowDeleteModal(true)}\n          >\n            Delete Sales\n          </Button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n          <button onClick={() => setError('')}>&times;</button>\n        </div>\n      )}\n\n      {/* Filters */}\n      <div className=\"filters-section\">\n        <h3>Filters</h3>\n        <div className=\"filters-grid\">\n          <div className=\"form-group\">\n            <label>Status</label>\n            <select\n              name=\"status\"\n              value={filters.status}\n              onChange={handleFilterChange}\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"cancelled\">Cancelled</option>\n              <option value=\"returned\">Returned</option>\n            </select>\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Customer Name</label>\n            <input\n              type=\"text\"\n              name=\"customer_name\"\n              value={filters.customer_name}\n              onChange={handleFilterChange}\n              placeholder=\"Search by customer name\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Start Date</label>\n            <input\n              type=\"date\"\n              name=\"start_date\"\n              value={filters.start_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>End Date</label>\n            <input\n              type=\"date\"\n              name=\"end_date\"\n              value={filters.end_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n        </div>\n        \n        <div className=\"filter-actions\">\n          <Button variant=\"secondary\" onClick={clearFilters}>\n            Clear Filters\n          </Button>\n        </div>\n      </div>\n\n      {/* Sales Table */}\n      <div className=\"table-section\">\n        {loading ? (\n          <div className=\"loading\">Loading sales...</div>\n        ) : (\n          <Table\n            data={sales}\n            columns={[\n              {\n                key: 'sale_number',\n                header: 'Sale Number',\n                render: (value, row) => (\n                  <span className=\"sale-number\">{value}</span>\n                )\n              },\n              {\n                key: 'customer_name',\n                header: 'Customer',\n                render: (value) => value || 'N/A'\n              },\n              {\n                key: 'status',\n                header: 'Status',\n                render: (value) => getStatusBadge(value)\n              },\n              {\n                key: 'items',\n                header: 'Items',\n                render: (items, row) => {\n                  if (!items || items.length === 0) {\n                    return <span className=\"no-items\">No items</span>;\n                  }\n                  return (\n                    <div className=\"sale-items\">\n                      {items.slice(0, 2).map((item, index) => (\n                        <div key={index} className=\"sale-item-row\">\n                          <span className=\"item-name\">{item.product_name}</span>\n                          <span className=\"item-details\">\n                            {item.quantity} {item.unit_symbol || 'pcs'}  {formatCurrency(item.unit_price)}\n                          </span>\n                        </div>\n                      ))}\n                      {items.length > 2 && (\n                        <div className=\"more-items\">+{items.length - 2} more items</div>\n                      )}\n                    </div>\n                  );\n                }\n              },\n              {\n                key: 'total_amount',\n                header: 'Total Amount',\n                render: (value) => formatCurrency(value)\n              },\n              {\n                key: 'created_at',\n                header: 'Date',\n                render: (value) => formatDate(value)\n              },\n              {\n                key: 'sold_by_name',\n                header: 'Sold By',\n                render: (value) => value || 'N/A'\n              },\n              {\n                key: 'actions',\n                header: 'Actions',\n                render: (_, row) => (\n                  <div className=\"action-buttons\">\n                    <PrintButton\n                      data={{\n                        ...row,\n                        user_name: user?.username || 'Unknown User',\n                        user_id: user?.id || 'unknown',\n                        print_timestamp: new Date().toISOString(),\n                        print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n                      }}\n                      title=\"Sale Receipt\"\n                      type=\"sale\"\n                      printText=\"Print\"\n                      className=\"print-sale-btn\"\n                    />\n                    <Button \n                      variant=\"primary\" \n                      size=\"small\"\n                      onClick={() => openEditModal(row)}\n                      loading={loadingSale}\n                      disabled={loadingSale}\n                    >\n                      Edit\n                    </Button>\n                  </div>\n                )\n              }\n            ]}\n          />\n        )}\n      </div>\n\n      {/* Delete Sales Modal */}\n      {showDeleteModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Delete Sales</h2>\n              <button className=\"close-button\" onClick={() => setShowDeleteModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <p>Select criteria to delete sales:</p>\n              \n              <div className=\"form-group\">\n                <label>Customer Name (optional)</label>\n                <input\n                  type=\"text\"\n                  name=\"customer_name\"\n                  value={deleteFilters.customer_name}\n                  onChange={handleDeleteFilterChange}\n                  placeholder=\"Leave empty to delete all\"\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Start Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"start_date\"\n                  value={deleteFilters.start_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>End Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"end_date\"\n                  value={deleteFilters.end_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Status</label>\n                <select\n                  name=\"status\"\n                  value={deleteFilters.status}\n                  onChange={handleDeleteFilterChange}\n                >\n                  <option value=\"completed\">Completed</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                  <option value=\"returned\">Returned</option>\n                </select>\n              </div>\n              \n              <div className=\"modal-actions\">\n                <Button variant=\"secondary\" onClick={() => setShowDeleteModal(false)}>\n                  Cancel\n                </Button>\n                <Button variant=\"danger\" onClick={handleDeleteSales}>\n                  Delete Sales\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Sale Modal */}\n      {showEditModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content large-modal\">\n            <div className=\"modal-header\">\n              <h2>Edit Sale: {selectedSale?.sale_number || 'Loading...'}</h2>\n              <button className=\"close-button\" onClick={() => setShowEditModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              {loadingSale ? (\n                <div className=\"loading\">Loading sale details...</div>\n              ) : selectedSale ? (\n                <>\n                  <div className=\"edit-sale-info\">\n                    <p><strong>Customer:</strong> {selectedSale.customer_name || 'N/A'}</p>\n                    <p><strong>Date:</strong> {formatDate(selectedSale.created_at)}</p>\n                    <p><strong>Status:</strong> {getStatusBadge(selectedSale.status)}</p>\n                  </div>\n                  \n                  <h3>Sale Items</h3>\n              <div className=\"edit-items\">\n                {editFormData.items.map((item, index) => (\n                  <div key={index} className=\"edit-item\">\n                    <div className=\"form-group\">\n                      <label>Product</label>\n                      <select\n                        value={item.product}\n                        onChange={(e) => {\n                          updateEditItem(index, 'product', e.target.value);\n                          updateEditItem(index, 'unit_price', getProductPrice(e.target.value));\n                        }}\n                      >\n                        <option value=\"\">Select Product</option>\n                        {products.map(product => (\n                          <option key={product.id} value={product.id}>\n                            {product.name} - {formatCurrency(product.price)}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Quantity</label>\n                      <input\n                        type=\"number\"\n                        min=\"1\"\n                        value={item.quantity}\n                        onChange={(e) => updateEditItem(index, 'quantity', parseInt(e.target.value) || 1)}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Unit</label>\n                      <select\n                        value={item.unit}\n                        onChange={(e) => {\n                          const unitId = e.target.value;\n                          updateEditItem(index, 'unit', unitId);\n                          \n                          // Auto-set unit price based on selected unit's price\n                          if (unitId) {\n                            const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                            const selectedUnit = selectedProduct?.available_units?.find(u => u.id === parseInt(unitId));\n                            if (selectedUnit && selectedUnit.price) {\n                              updateEditItem(index, 'unit_price', selectedUnit.price.toFixed(2));\n                            }\n                          }\n                        }}\n                      >\n                        <option value=\"\">Select Unit</option>\n                        {(() => {\n                          const selectedProduct = products.find(p => p.id === parseInt(item.product));\n                          return selectedProduct?.available_units?.map(unit => (\n                            <option key={unit.id} value={unit.id}>\n                              {unit.name} ({unit.symbol}) - {unit.price?.toFixed(2) || 'N/A'} MGA\n                            </option>\n                          )) || [];\n                        })()}\n                      </select>\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Unit Price</label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        value={item.unit_price}\n                        onChange={(e) => updateEditItem(index, 'unit_price', parseFloat(e.target.value) || 0)}\n                      />\n                    </div>\n                    \n                    <div className=\"form-group\">\n                      <label>Total</label>\n                      <input\n                        type=\"text\"\n                        value={formatCurrency(item.quantity * item.unit_price)}\n                        readOnly\n                      />\n                    </div>\n                    \n                    <Button \n                      variant=\"danger\" \n                      size=\"small\"\n                      onClick={() => removeEditItem(index)}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                ))}\n                \n                <Button variant=\"primary\" onClick={addEditItem}>\n                  Add Item\n                </Button>\n              </div>\n              \n                  <div className=\"modal-actions\">\n                    <Button variant=\"secondary\" onClick={() => setShowEditModal(false)}>\n                      Cancel\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleEditSale}>\n                      Update Sale\n                    </Button>\n                  </div>\n                </>\n              ) : (\n                <div className=\"error-message\">\n                  Failed to load sale details\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SalesManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}