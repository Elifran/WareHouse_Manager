{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{useApi}from'../hooks/useApi';import Button from'../components/Button';import Table from'../components/Table';import SupplierModal from'../components/SupplierModal';import'./Suppliers.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Suppliers=()=>{const{t}=useTranslation();const[suppliers,setSuppliers]=useState([]);const[loading,setLoading]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[editingSupplier,setEditingSupplier]=useState(null);const api=useApi();useEffect(()=>{fetchSuppliers();},[]);const fetchSuppliers=async()=>{try{setLoading(true);const response=await api.get('/api/purchases/suppliers/');setSuppliers(response.data.results||response.data);}catch(error){console.error('Error fetching suppliers:',error);}finally{setLoading(false);}};const handleCreateSupplier=async supplierData=>{try{await api.post('/api/purchases/suppliers/',supplierData);fetchSuppliers();setShowCreateModal(false);}catch(error){console.error('Error creating supplier:',error);}};const handleUpdateSupplier=async supplierData=>{try{await api.put(\"/purchases/suppliers/\".concat(editingSupplier.id,\"/\"),supplierData);fetchSuppliers();setEditingSupplier(null);}catch(error){console.error('Error updating supplier:',error);}};const handleDeleteSupplier=async supplierId=>{if(window.confirm('Are you sure you want to delete this supplier?')){try{await api.delete(\"/purchases/suppliers/\".concat(supplierId,\"/\"));fetchSuppliers();}catch(error){console.error('Error deleting supplier:',error);}}};const supplierColumns=[{key:'name',label:'Supplier Name',render:(value,row)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"supplier-name\",children:value}),row.contact_person&&/*#__PURE__*/_jsx(\"div\",{className:\"contact-person\",children:row.contact_person})]})},{key:'email',label:'Email',render:value=>value||'-'},{key:'phone',label:'Phone',render:value=>value||'-'},{key:'payment_terms',label:'Payment Terms',render:value=>value||'-'},{key:'is_active',label:'Status',render:value=>/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(value?'status-active':'status-inactive'),children:value?'Active':'Inactive'})},{key:'actions',label:'Actions',render:(value,row)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"secondary\",onClick:()=>setEditingSupplier(row),children:\"Edit\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",variant:\"danger\",onClick:()=>handleDeleteSupplier(row.id),children:\"Delete\"})]})}];if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"page-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Loading suppliers...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"suppliers\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('titles.suppliers_management')}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>setShowCreateModal(true),children:\"Add New Supplier\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content-section\",children:/*#__PURE__*/_jsx(Table,{data:suppliers,columns:supplierColumns,emptyMessage:\"No suppliers found\"})}),showCreateModal&&/*#__PURE__*/_jsx(SupplierModal,{onClose:()=>setShowCreateModal(false),onSubmit:handleCreateSupplier}),editingSupplier&&/*#__PURE__*/_jsx(SupplierModal,{supplier:editingSupplier,onClose:()=>setEditingSupplier(null),onSubmit:handleUpdateSupplier})]});};export default Suppliers;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useApi","Button","Table","SupplierModal","jsx","_jsx","jsxs","_jsxs","Suppliers","t","suppliers","setSuppliers","loading","setLoading","showCreateModal","setShowCreateModal","editingSupplier","setEditingSupplier","api","fetchSuppliers","response","get","data","results","error","console","handleCreateSupplier","supplierData","post","handleUpdateSupplier","put","concat","id","handleDeleteSupplier","supplierId","window","confirm","delete","supplierColumns","key","label","render","value","row","children","className","contact_person","size","variant","onClick","columns","emptyMessage","onClose","onSubmit","supplier"],"sources":["/home/el-ifran/WareHouse_Manager/elif-admin-app/beverage_management_system/src/pages/Suppliers.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useApi } from '../hooks/useApi';\nimport Button from '../components/Button';\nimport Table from '../components/Table';\nimport SupplierModal from '../components/SupplierModal';\nimport './Suppliers.css';\n\nconst Suppliers = () => {\n  const { t } = useTranslation();\n  const [suppliers, setSuppliers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [editingSupplier, setEditingSupplier] = useState(null);\n  const api = useApi();\n\n  useEffect(() => {\n    fetchSuppliers();\n  }, []);\n\n  const fetchSuppliers = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/purchases/suppliers/');\n      setSuppliers(response.data.results || response.data);\n    } catch (error) {\n      console.error('Error fetching suppliers:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateSupplier = async (supplierData) => {\n    try {\n      await api.post('/api/purchases/suppliers/', supplierData);\n      fetchSuppliers();\n      setShowCreateModal(false);\n    } catch (error) {\n      console.error('Error creating supplier:', error);\n    }\n  };\n\n  const handleUpdateSupplier = async (supplierData) => {\n    try {\n      await api.put(`/purchases/suppliers/${editingSupplier.id}/`, supplierData);\n      fetchSuppliers();\n      setEditingSupplier(null);\n    } catch (error) {\n      console.error('Error updating supplier:', error);\n    }\n  };\n\n  const handleDeleteSupplier = async (supplierId) => {\n    if (window.confirm('Are you sure you want to delete this supplier?')) {\n      try {\n        await api.delete(`/purchases/suppliers/${supplierId}/`);\n        fetchSuppliers();\n      } catch (error) {\n        console.error('Error deleting supplier:', error);\n      }\n    }\n  };\n\n  const supplierColumns = [\n    {\n      key: 'name',\n      label: 'Supplier Name',\n      render: (value, row) => (\n        <div>\n          <div className=\"supplier-name\">{value}</div>\n          {row.contact_person && (\n            <div className=\"contact-person\">{row.contact_person}</div>\n          )}\n        </div>\n      )\n    },\n    {\n      key: 'email',\n      label: 'Email',\n      render: (value) => value || '-'\n    },\n    {\n      key: 'phone',\n      label: 'Phone',\n      render: (value) => value || '-'\n    },\n    {\n      key: 'payment_terms',\n      label: 'Payment Terms',\n      render: (value) => value || '-'\n    },\n    {\n      key: 'is_active',\n      label: 'Status',\n      render: (value) => (\n        <span className={`status-badge ${value ? 'status-active' : 'status-inactive'}`}>\n          {value ? 'Active' : 'Inactive'}\n        </span>\n      )\n    },\n    {\n      key: 'actions',\n      label: 'Actions',\n      render: (value, row) => (\n        <div className=\"action-buttons\">\n          <Button\n            size=\"small\"\n            variant=\"secondary\"\n            onClick={() => setEditingSupplier(row)}\n          >\n            Edit\n          </Button>\n          <Button\n            size=\"small\"\n            variant=\"danger\"\n            onClick={() => handleDeleteSupplier(row.id)}\n          >\n            Delete\n          </Button>\n        </div>\n      )\n    }\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"page-loading\">\n        <div className=\"spinner\"></div>\n        <span>Loading suppliers...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"suppliers\">\n      <div className=\"page-header\">\n        <h1>{t('titles.suppliers_management')}</h1>\n        <div className=\"header-actions\">\n          <Button\n            variant=\"primary\"\n            onClick={() => setShowCreateModal(true)}\n          >\n            Add New Supplier\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"content-section\">\n        <Table\n          data={suppliers}\n          columns={supplierColumns}\n          emptyMessage=\"No suppliers found\"\n        />\n      </div>\n\n      {showCreateModal && (\n        <SupplierModal\n          onClose={() => setShowCreateModal(false)}\n          onSubmit={handleCreateSupplier}\n        />\n      )}\n\n      {editingSupplier && (\n        <SupplierModal\n          supplier={editingSupplier}\n          onClose={() => setEditingSupplier(null)}\n          onSubmit={handleUpdateSupplier}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Suppliers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}