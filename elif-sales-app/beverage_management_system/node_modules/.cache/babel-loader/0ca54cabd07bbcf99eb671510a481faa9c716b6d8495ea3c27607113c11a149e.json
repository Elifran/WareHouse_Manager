{"ast":null,"code":"import _objectSpread from\"/home/antatsimo/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"/home/antatsimo/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"page\",\"pageSize\",\"status\",\"customer_name\",\"start_date\",\"end_date\",\"sale_number\",\"payment_status\"];import{useQuery,useQueryClient}from'react-query';import api from'../services/api';/**\n * Fetch sales with pagination and filters\n * @param {Object} params - Query parameters (page, page_size, filters)\n * @returns {Object} Query result with sales data\n */export const useSales=function(){let params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const{page=1,pageSize=20,status,customer_name,start_date,end_date,sale_number,payment_status}=params,otherParams=_objectWithoutProperties(params,_excluded);return useQuery(['sales',_objectSpread({page,pageSize,status,customer_name,start_date,end_date,sale_number,payment_status},otherParams)],async()=>{const queryParams=new URLSearchParams();queryParams.append('page',page.toString());queryParams.append('page_size',pageSize.toString());if(status)queryParams.append('status',status);if(customer_name)queryParams.append('search',customer_name);if(start_date)queryParams.append('created_at__date__gte',start_date);if(end_date)queryParams.append('created_at__date__lte',end_date);if(sale_number)queryParams.append('sale_number',sale_number);if(payment_status)queryParams.append('payment_status',payment_status);const response=await api.get(\"/api/sales/?\".concat(queryParams.toString()));const salesData=response.data.results||response.data;return{sales:Array.isArray(salesData)?salesData:[],count:response.data.count||salesData.length,totalPages:response.data.count?Math.ceil(response.data.count/pageSize):1,currentPage:page};},{staleTime:1*60*1000,// 1 minute - sales change frequently\ncacheTime:5*60*1000,refetchOnWindowFocus:false});};/**\n * Fetch a single sale by ID\n */export const useSale=saleId=>{return useQuery(['sale',saleId],()=>api.get(\"/api/sales/\".concat(saleId,\"/\")).then(res=>res.data),{enabled:!!saleId,staleTime:1*60*1000,cacheTime:5*60*1000});};/**\n * Fetch pending sales\n */export const usePendingSales=()=>{return useQuery(['sales','pending'],()=>api.get('/api/sales/pending/').then(res=>res.data),{staleTime:30*1000,// 30 seconds - pending sales change frequently\ncacheTime:2*60*1000,refetchInterval:30*1000// Auto-refetch every 30 seconds\n});};/**\n * Invalidate sales cache\n */export const useInvalidateSales=()=>{const queryClient=useQueryClient();return()=>{queryClient.invalidateQueries(['sales']);};};","map":{"version":3,"names":["useQuery","useQueryClient","api","useSales","params","arguments","length","undefined","page","pageSize","status","customer_name","start_date","end_date","sale_number","payment_status","otherParams","_objectWithoutProperties","_excluded","_objectSpread","queryParams","URLSearchParams","append","toString","response","get","concat","salesData","data","results","sales","Array","isArray","count","totalPages","Math","ceil","currentPage","staleTime","cacheTime","refetchOnWindowFocus","useSale","saleId","then","res","enabled","usePendingSales","refetchInterval","useInvalidateSales","queryClient","invalidateQueries"],"sources":["/home/antatsimo/WareHouse_Manager/elif-sales-app/beverage_management_system/src/hooks/useSales.js"],"sourcesContent":["import { useQuery, useQueryClient } from 'react-query';\nimport api from '../services/api';\n\n/**\n * Fetch sales with pagination and filters\n * @param {Object} params - Query parameters (page, page_size, filters)\n * @returns {Object} Query result with sales data\n */\nexport const useSales = (params = {}) => {\n  const {\n    page = 1,\n    pageSize = 20,\n    status,\n    customer_name,\n    start_date,\n    end_date,\n    sale_number,\n    payment_status,\n    ...otherParams\n  } = params;\n\n  return useQuery(\n    ['sales', { page, pageSize, status, customer_name, start_date, end_date, sale_number, payment_status, ...otherParams }],\n    async () => {\n      const queryParams = new URLSearchParams();\n      queryParams.append('page', page.toString());\n      queryParams.append('page_size', pageSize.toString());\n      \n      if (status) queryParams.append('status', status);\n      if (customer_name) queryParams.append('search', customer_name);\n      if (start_date) queryParams.append('created_at__date__gte', start_date);\n      if (end_date) queryParams.append('created_at__date__lte', end_date);\n      if (sale_number) queryParams.append('sale_number', sale_number);\n      if (payment_status) queryParams.append('payment_status', payment_status);\n      \n      const response = await api.get(`/api/sales/?${queryParams.toString()}`);\n      const salesData = response.data.results || response.data;\n      \n      return {\n        sales: Array.isArray(salesData) ? salesData : [],\n        count: response.data.count || salesData.length,\n        totalPages: response.data.count \n          ? Math.ceil(response.data.count / pageSize) \n          : 1,\n        currentPage: page,\n      };\n    },\n    {\n      staleTime: 1 * 60 * 1000, // 1 minute - sales change frequently\n      cacheTime: 5 * 60 * 1000,\n      refetchOnWindowFocus: false,\n    }\n  );\n};\n\n/**\n * Fetch a single sale by ID\n */\nexport const useSale = (saleId) => {\n  return useQuery(\n    ['sale', saleId],\n    () => api.get(`/api/sales/${saleId}/`).then(res => res.data),\n    {\n      enabled: !!saleId,\n      staleTime: 1 * 60 * 1000,\n      cacheTime: 5 * 60 * 1000,\n    }\n  );\n};\n\n/**\n * Fetch pending sales\n */\nexport const usePendingSales = () => {\n  return useQuery(\n    ['sales', 'pending'],\n    () => api.get('/api/sales/pending/').then(res => res.data),\n    {\n      staleTime: 30 * 1000, // 30 seconds - pending sales change frequently\n      cacheTime: 2 * 60 * 1000,\n      refetchInterval: 30 * 1000, // Auto-refetch every 30 seconds\n    }\n  );\n};\n\n/**\n * Invalidate sales cache\n */\nexport const useInvalidateSales = () => {\n  const queryClient = useQueryClient();\n  \n  return () => {\n    queryClient.invalidateQueries(['sales']);\n  };\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}