{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import PrintButton from'./PrintButton';import'./SaleDetailModal.css';import{formatCurrency,formatDate}from'../utils/helpers';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SaleDetailModal=_ref=>{var _sale$items;let{sale,onClose,loading=false}=_ref;const{t}=useTranslation();const[sales,setSales]=useState([]);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[filters,setFilters]=useState({saleId:'',clientName:'',startDate:'',endDate:''});const[filterLoading,setFilterLoading]=useState(false);const ITEMS_PER_PAGE=20;// Fetch sales data with pagination and filters\nconst fetchSales=async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let filters=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};setFilterLoading(true);try{const queryParams=new URLSearchParams(_objectSpread({page:page.toString(),limit:ITEMS_PER_PAGE.toString()},filters));const response=await fetch(\"/api/sales?\".concat(queryParams));const data=await response.json();setSales(data.sales);setCurrentPage(data.currentPage);setTotalPages(data.totalPages);}catch(error){console.error('Error fetching sales:',error);}finally{setFilterLoading(false);}};// Initial load - only fetch if no specific sale is provided\nuseEffect(()=>{if(!sale){fetchSales(1,filters);}},[sale]);// Add sale as dependency\n// Handle filter changes\nconst handleFilterChange=(key,value)=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:value}));};// Apply filters\nconst applyFilters=()=>{setCurrentPage(1);const cleanFilters=Object.fromEntries(Object.entries(filters).filter(_ref2=>{let[_,value]=_ref2;return value!=='';}));fetchSales(1,cleanFilters);};// Clear filters\nconst clearFilters=()=>{setFilters({saleId:'',clientName:'',startDate:'',endDate:''});setCurrentPage(1);fetchSales(1,{});};// Navigation handlers\nconst goToNextPage=()=>{if(currentPage<totalPages){const nextPage=currentPage+1;setCurrentPage(nextPage);fetchSales(nextPage,filters);}};const goToPrevPage=()=>{if(currentPage>1){const prevPage=currentPage-1;setCurrentPage(prevPage);fetchSales(prevPage,filters);}};// Early return conditions - moved after all hooks\nif(!sale&&!loading&&!filterLoading){// Check if we have any sales data to show\nif(sales.length===0&&!filterLoading){return null;}}// Handle case where sale data is incomplete\nif(sale&&!sale.sale_number){return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('modals.sale_details')}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:onClose,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Unable to load sale details. The sale data appears to be incomplete.\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:onClose,children:t('modals.close')})})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content sales-list-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('modals.sale_details')}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[sale&&/*#__PURE__*/_jsx(PrintButton,{data:sale,title:t('titles.sale_receipt'),type:\"sale\",printText:t('buttons.print_receipt'),className:\"print-sale-receipt-btn\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:onClose,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[!sale&&/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('modals.filter_sales')}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-item\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"saleId\",children:[t('table_headers.sale_number'),\":\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"saleId\",type:\"text\",placeholder:t('placeholders.enter_sale_id'),value:filters.saleId,onChange:e=>handleFilterChange('saleId',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-item\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"clientName\",children:[t('common.name'),\":\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"clientName\",type:\"text\",placeholder:t('placeholders.enter_client_name'),value:filters.clientName,onChange:e=>handleFilterChange('clientName',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-item\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"startDate\",children:[t('labels.start_date'),\":\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"startDate\",type:\"date\",value:filters.startDate,onChange:e=>handleFilterChange('startDate',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-item\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"endDate\",children:[t('labels.end_date'),\":\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"endDate\",type:\"date\",value:filters.endDate,onChange:e=>handleFilterChange('endDate',e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:applyFilters,children:t('buttons.apply_filters')}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:clearFilters,children:t('buttons.clear_filters')})]})]}),loading||filterLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:t('modals.loading_sale_details')})]}):sale?/*#__PURE__*/// Single Sale Detail View\n_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sale-info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('modals.sale_information')}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('table_headers.sale_number'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"sale-number\",children:sale.sale_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.status'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"status status-\".concat(sale.status),children:sale.status.charAt(0).toUpperCase()+sale.status.slice(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.date'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(sale.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('table_headers.sold_by'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:sale.sold_by_name||t('app.unknown_user')})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"customer-info-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('modals.customer_information')}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.name'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:sale.customer_name||t('dashboard.walk_in_customer')})]}),sale.customer_phone&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.phone'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:sale.customer_phone})]}),sale.customer_email&&/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.email'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:sale.customer_email})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[t('table_headers.items'),\" (\",((_sale$items=sale.items)===null||_sale$items===void 0?void 0:_sale$items.length)||0,\")\"]}),sale.items&&sale.items.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"items-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-product\",children:t('common.name')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sku\",children:\"SKU\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-quantity\",children:t('common.quantity')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-unit\",children:t('common.unit')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-price\",children:t('common.price')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-mode\",children:t('common.type')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-total\",children:t('common.total')})]}),sale.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-product\",children:/*#__PURE__*/_jsx(\"div\",{className:\"product-name\",children:item.product_name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sku\",children:item.product_sku}),/*#__PURE__*/_jsx(\"div\",{className:\"col-quantity\",children:item.quantity_display||item.quantity}),/*#__PURE__*/_jsx(\"div\",{className:\"col-unit\",children:item.unit_name?\"\".concat(item.unit_name,\" (\").concat(item.unit_symbol||'',\")\"):'N/A'}),/*#__PURE__*/_jsx(\"div\",{className:\"col-price\",children:formatCurrency(item.unit_price)}),/*#__PURE__*/_jsx(\"div\",{className:\"col-mode\",children:/*#__PURE__*/_jsx(\"span\",{className:\"price-mode-badge \".concat(item.price_mode||'standard'),children:item.price_mode==='wholesale'?t('common.wholesale'):t('common.retail')})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-total\",children:formatCurrency(item.total_price)})]},index))]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-items\",children:\"No items found\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('modals.payment_summary')}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('table_headers.total_amount'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(sale.subtotal)})]}),sale.cost_amount&&sale.cost_amount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row cost-breakdown\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cost (excl. tax):\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(sale.cost_amount)})]}),sale.tax_amount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row tax-breakdown\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('modals.tax_included'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(sale.tax_amount)})]}),sale.discount_amount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row discount\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('modals.discount'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\",formatCurrency(sale.discount_amount)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row total\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('common.total'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(sale.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-row\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('table_headers.payment_method'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"payment-method\",children:sale.payment_method.charAt(0).toUpperCase()+sale.payment_method.slice(1)})]})]})]}),sale.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"notes-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('common.notes')}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-content\",children:sale.notes})]})]}):/*#__PURE__*/// Sales List View with Pagination\n_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"sales-list-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[t('modals.recent_sales'),\" (\",sales.length,\")\"]}),sales.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"sales-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sale-number\",children:t('table_headers.sale_number')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-customer\",children:t('common.name')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-date\",children:t('common.date')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-amount\",children:t('common.total')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-status\",children:t('common.status')})]}),sales.map(saleItem=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-row clickable\",onClick:()=>{/* Handle click to view details */},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sale-number\",children:saleItem.sale_number}),/*#__PURE__*/_jsx(\"div\",{className:\"col-customer\",children:saleItem.customer_name||t('dashboard.walk_in_customer')}),/*#__PURE__*/_jsx(\"div\",{className:\"col-date\",children:formatDate(saleItem.created_at)}),/*#__PURE__*/_jsx(\"div\",{className:\"col-amount\",children:formatCurrency(saleItem.total_amount)}),/*#__PURE__*/_jsx(\"div\",{className:\"col-status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"status status-\".concat(saleItem.status),children:saleItem.status.charAt(0).toUpperCase()+saleItem.status.slice(1)})})]},saleItem.id))]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-sales\",children:t('modals.no_sales_found')}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToPrevPage,disabled:currentPage===1,children:t('buttons.previous')}),/*#__PURE__*/_jsxs(\"span\",{className:\"pagination-info\",children:[t('pagination.page'),\" \",currentPage,\" \",t('pagination.of'),\" \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToNextPage,disabled:currentPage===totalPages,children:t('buttons.next')})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:onClose,children:t('modals.close')})})]})});};export default SaleDetailModal;// import React from 'react';\n// import { useTranslation } from 'react-i18next';\n// import PrintButton from './PrintButton';\n// import './SaleDetailModal.css';\n// import {formatCurrency, formatDate} from '../utils/helpers';\n// const SaleDetailModal = ({ sale, onClose, loading = false }) => {\n//   const { t } = useTranslation();\n//   if (!sale && !loading) return null;\n//   // Handle case where sale data is incomplete\n//   if (sale && !sale.sale_number) {\n//     return (\n//       <div className=\"modal-overlay\" onClick={onClose}>\n//         <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n//           <div className=\"modal-header\">\n//             <h2>{t('modals.sale_details')}</h2>\n//             <button className=\"modal-close\" onClick={onClose}>\n//               <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n//                 <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n//               </svg>\n//             </button>\n//           </div>\n//           <div className=\"modal-body\">\n//             <div className=\"error-state\">\n//               <p>Unable to load sale details. The sale data appears to be incomplete.</p>\n//             </div>\n//           </div>\n//           <div className=\"modal-footer\">\n//             <button className=\"btn-secondary\" onClick={onClose}>\n//               {t('modals.close')}\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   }\n//   // const formatDate = (dateString) => {\n//   //   return new Date(dateString).toLocaleString();\n//   // };\n//   // const formatCurrency = (amount) => {\n//   //   return `${parseFloat(amount).toFixed(2)} MGA`;\n//   // };\n//   return (\n//     <div className=\"modal-overlay\" onClick={onClose}>\n//       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n//         <div className=\"modal-header\">\n//           <h2>{t('modals.sale_details')}</h2>\n//           <div className=\"header-actions\">\n//             <PrintButton\n//               data={sale}\n//               title={t('titles.sale_receipt')}\n//               type=\"sale\"\n//               printText={t('buttons.print_receipt')}\n//               className=\"print-sale-receipt-btn\"\n//             />\n//             <button className=\"modal-close\" onClick={onClose}>\n//               <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n//                 <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n//               </svg>\n//             </button>\n//           </div>\n//         </div>\n//         <div className=\"modal-body\">\n//           {loading ? (\n//             <div className=\"loading-state\">\n//               <div className=\"spinner\"></div>\n//               <p>{t('modals.loading_sale_details')}</p>\n//             </div>\n//           ) : (\n//             <>\n//               {/* Sale Information */}\n//               <div className=\"sale-info-section\">\n//             <h3>{t('modals.sale_information')}</h3>\n//             <div className=\"info-grid\">\n//               <div className=\"info-item\">\n//                 <label>{t('table_headers.sale_number')}:</label>\n//                 <span className=\"sale-number\">{sale.sale_number}</span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('common.status')}:</label>\n//                 <span className={`status status-${sale.status}`}>\n//                   {sale.status.charAt(0).toUpperCase() + sale.status.slice(1)}\n//                 </span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('common.date')}:</label>\n//                 <span>{formatDate(sale.created_at)}</span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('table_headers.sold_by')}:</label>\n//                 <span>{sale.sold_by_name || t('app.unknown_user')}</span>\n//               </div>\n//             </div>\n//           </div>\n//           {/* Customer Information */}\n//           <div className=\"customer-info-section\">\n//             <h3>{t('modals.customer_information')}</h3>\n//             <div className=\"info-grid\">\n//               <div className=\"info-item\">\n//                 <label>{t('common.name')}:</label>\n//                 <span>{sale.customer_name || t('dashboard.walk_in_customer')}</span>\n//               </div>\n//               {sale.customer_phone && (\n//                 <div className=\"info-item\">\n//                   <label>{t('common.phone')}:</label>\n//                   <span>{sale.customer_phone}</span>\n//                 </div>\n//               )}\n//               {sale.customer_email && (\n//                 <div className=\"info-item\">\n//                   <label>{t('common.email')}:</label>\n//                   <span>{sale.customer_email}</span>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n//           {/* Sale Items */}\n//           <div className=\"items-section\">\n//             <h3>{t('table_headers.items')} ({sale.items?.length || 0})</h3>\n//             {sale.items && sale.items.length > 0 ? (\n//               <div className=\"items-table\">\n//                 <div className=\"table-header\">\n//                   <div className=\"col-product\">{t('common.name')}</div>\n//                   <div className=\"col-sku\">SKU</div>\n//                   <div className=\"col-quantity\">{t('common.quantity')}</div>\n//                   <div className=\"col-unit\">{t('common.unit')}</div>\n//                   <div className=\"col-price\">{t('common.price')}</div>\n//                   <div className=\"col-mode\">{t('common.type')}</div>\n//                   <div className=\"col-total\">{t('common.total')}</div>\n//                 </div>\n//                 {sale.items.map((item, index) => (\n//                   <div key={index} className=\"table-row\">\n//                     <div className=\"col-product\">\n//                       <div className=\"product-name\">{item.product_name}</div>\n//                     </div>\n//                     <div className=\"col-sku\">{item.product_sku}</div>\n//                     <div className=\"col-quantity\">{item.quantity_display || item.quantity}</div>\n//                     <div className=\"col-unit\">\n//                       {item.unit_name ? `${item.unit_name} (${item.unit_symbol || ''})` : 'N/A'}\n//                     </div>\n//                     <div className=\"col-price\">{formatCurrency(item.unit_price)}</div>\n//                     <div className=\"col-mode\">\n//                       <span className={`price-mode-badge ${item.price_mode || 'standard'}`}>\n//                         {item.price_mode === 'wholesale' ? t('common.wholesale') : t('common.retail')}\n//                       </span>\n//                     </div>\n//                     <div className=\"col-total\">{formatCurrency(item.total_price)}</div>\n//                   </div>\n//                 ))}\n//               </div>\n//             ) : (\n//               <p className=\"no-items\">No items found</p>\n//             )}\n//           </div>\n//           {/* Payment Information */}\n//           <div className=\"payment-section\">\n//             <h3>{t('modals.payment_summary')}</h3>\n//             <div className=\"payment-summary\">\n//               <div className=\"payment-row\">\n//                 <label>{t('table_headers.total_amount')}:</label>\n//                 <span>{formatCurrency(sale.subtotal)}</span>\n//               </div>\n//               {sale.cost_amount && sale.cost_amount > 0 && (\n//                 <div className=\"payment-row cost-breakdown\">\n//                   <label>Cost (excl. tax):</label>\n//                   <span>{formatCurrency(sale.cost_amount)}</span>\n//                 </div>\n//               )}\n//               {sale.tax_amount > 0 && (\n//                 <div className=\"payment-row tax-breakdown\">\n//                   <label>{t('modals.tax_included')}:</label>\n//                   <span>{formatCurrency(sale.tax_amount)}</span>\n//                 </div>\n//               )}\n//               {sale.discount_amount > 0 && (\n//                 <div className=\"payment-row discount\">\n//                   <label>{t('modals.discount')}:</label>\n//                   <span>-{formatCurrency(sale.discount_amount)}</span>\n//                 </div>\n//               )}\n//               <div className=\"payment-row total\">\n//                 <label>{t('common.total')}:</label>\n//                 <span>{formatCurrency(sale.total_amount)}</span>\n//               </div>\n//               <div className=\"payment-row\">\n//                 <label>{t('table_headers.payment_method')}:</label>\n//                 <span className=\"payment-method\">\n//                   {sale.payment_method.charAt(0).toUpperCase() + sale.payment_method.slice(1)}\n//                 </span>\n//               </div>\n//             </div>\n//           </div>\n//           {/* Notes */}\n//           {sale.notes && (\n//             <div className=\"notes-section\">\n//               <h3>{t('common.notes')}</h3>\n//               <div className=\"notes-content\">\n//                 {sale.notes}\n//               </div>\n//             </div>\n//           )}\n//             </>\n//           )}\n//         </div>\n//         <div className=\"modal-footer\">\n//           <button className=\"btn-secondary\" onClick={onClose}>\n//             {t('modals.close')}\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n// export default SaleDetailModal;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","PrintButton","formatCurrency","formatDate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SaleDetailModal","_ref","_sale$items","sale","onClose","loading","t","sales","setSales","currentPage","setCurrentPage","totalPages","setTotalPages","filters","setFilters","saleId","clientName","startDate","endDate","filterLoading","setFilterLoading","ITEMS_PER_PAGE","fetchSales","page","arguments","length","undefined","queryParams","URLSearchParams","_objectSpread","toString","limit","response","fetch","concat","data","json","error","console","handleFilterChange","key","value","prev","applyFilters","cleanFilters","Object","fromEntries","entries","filter","_ref2","_","clearFilters","goToNextPage","nextPage","goToPrevPage","prevPage","sale_number","className","onClick","children","e","stopPropagation","viewBox","fill","d","title","type","printText","htmlFor","id","placeholder","onChange","target","status","charAt","toUpperCase","slice","created_at","sold_by_name","customer_name","customer_phone","customer_email","items","map","item","index","product_name","product_sku","quantity_display","quantity","unit_name","unit_symbol","unit_price","price_mode","total_price","subtotal","cost_amount","tax_amount","discount_amount","total_amount","payment_method","notes","saleItem","disabled"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/components/SaleDetailModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport PrintButton from './PrintButton';\nimport './SaleDetailModal.css';\nimport { formatCurrency, formatDate } from '../utils/helpers';\n\nconst SaleDetailModal = ({ sale, onClose, loading = false }) => {\n  const { t } = useTranslation();\n  const [sales, setSales] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [filters, setFilters] = useState({\n    saleId: '',\n    clientName: '',\n    startDate: '',\n    endDate: ''\n  });\n  const [filterLoading, setFilterLoading] = useState(false);\n  const ITEMS_PER_PAGE = 20;\n\n  // Fetch sales data with pagination and filters\n  const fetchSales = async (page = 1, filters = {}) => {\n    setFilterLoading(true);\n    try {\n      const queryParams = new URLSearchParams({\n        page: page.toString(),\n        limit: ITEMS_PER_PAGE.toString(),\n        ...filters\n      });\n\n      const response = await fetch(`/api/sales?${queryParams}`);\n      const data = await response.json();\n      \n      setSales(data.sales);\n      setCurrentPage(data.currentPage);\n      setTotalPages(data.totalPages);\n    } catch (error) {\n      console.error('Error fetching sales:', error);\n    } finally {\n      setFilterLoading(false);\n    }\n  };\n\n  // Initial load - only fetch if no specific sale is provided\n  useEffect(() => {\n    if (!sale) {\n      fetchSales(1, filters);\n    }\n  }, [sale]); // Add sale as dependency\n\n  // Handle filter changes\n  const handleFilterChange = (key, value) => {\n    setFilters(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  // Apply filters\n  const applyFilters = () => {\n    setCurrentPage(1);\n    const cleanFilters = Object.fromEntries(\n      Object.entries(filters).filter(([_, value]) => value !== '')\n    );\n    fetchSales(1, cleanFilters);\n  };\n\n  // Clear filters\n  const clearFilters = () => {\n    setFilters({\n      saleId: '',\n      clientName: '',\n      startDate: '',\n      endDate: ''\n    });\n    setCurrentPage(1);\n    fetchSales(1, {});\n  };\n\n  // Navigation handlers\n  const goToNextPage = () => {\n    if (currentPage < totalPages) {\n      const nextPage = currentPage + 1;\n      setCurrentPage(nextPage);\n      fetchSales(nextPage, filters);\n    }\n  };\n\n  const goToPrevPage = () => {\n    if (currentPage > 1) {\n      const prevPage = currentPage - 1;\n      setCurrentPage(prevPage);\n      fetchSales(prevPage, filters);\n    }\n  };\n\n  // Early return conditions - moved after all hooks\n  if (!sale && !loading && !filterLoading) {\n    // Check if we have any sales data to show\n    if (sales.length === 0 && !filterLoading) {\n      return null;\n    }\n  }\n\n  // Handle case where sale data is incomplete\n  if (sale && !sale.sale_number) {\n    return (\n      <div className=\"modal-overlay\" onClick={onClose}>\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n          <div className=\"modal-header\">\n            <h2>{t('modals.sale_details')}</h2>\n            <button className=\"modal-close\" onClick={onClose}>\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n              </svg>\n            </button>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"error-state\">\n              <p>Unable to load sale details. The sale data appears to be incomplete.</p>\n            </div>\n          </div>\n          <div className=\"modal-footer\">\n            <button className=\"btn-secondary\" onClick={onClose}>\n              {t('modals.close')}\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose}>\n      <div className=\"modal-content sales-list-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <h2>{t('modals.sale_details')}</h2>\n          <div className=\"header-actions\">\n            {sale && (\n              <PrintButton\n                data={sale}\n                title={t('titles.sale_receipt')}\n                type=\"sale\"\n                printText={t('buttons.print_receipt')}\n                className=\"print-sale-receipt-btn\"\n              />\n            )}\n            <button className=\"modal-close\" onClick={onClose}>\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"modal-body\">\n          {/* Filters Section - Only show when no specific sale is selected */}\n          {!sale && (\n            <div className=\"filters-section\">\n              <h3>{t('modals.filter_sales')}</h3>\n              <div className=\"filters-grid\">\n                <div className=\"filter-item\">\n                  <label htmlFor=\"saleId\">{t('table_headers.sale_number')}:</label>\n                  <input\n                    id=\"saleId\"\n                    type=\"text\"\n                    placeholder={t('placeholders.enter_sale_id')}\n                    value={filters.saleId}\n                    onChange={(e) => handleFilterChange('saleId', e.target.value)}\n                  />\n                </div>\n                <div className=\"filter-item\">\n                  <label htmlFor=\"clientName\">{t('common.name')}:</label>\n                  <input\n                    id=\"clientName\"\n                    type=\"text\"\n                    placeholder={t('placeholders.enter_client_name')}\n                    value={filters.clientName}\n                    onChange={(e) => handleFilterChange('clientName', e.target.value)}\n                  />\n                </div>\n                <div className=\"filter-item\">\n                  <label htmlFor=\"startDate\">{t('labels.start_date')}:</label>\n                  <input\n                    id=\"startDate\"\n                    type=\"date\"\n                    value={filters.startDate}\n                    onChange={(e) => handleFilterChange('startDate', e.target.value)}\n                  />\n                </div>\n                <div className=\"filter-item\">\n                  <label htmlFor=\"endDate\">{t('labels.end_date')}:</label>\n                  <input\n                    id=\"endDate\"\n                    type=\"date\"\n                    value={filters.endDate}\n                    onChange={(e) => handleFilterChange('endDate', e.target.value)}\n                  />\n                </div>\n              </div>\n              <div className=\"filter-actions\">\n                <button className=\"btn-primary\" onClick={applyFilters}>\n                  {t('buttons.apply_filters')}\n                </button>\n                <button className=\"btn-secondary\" onClick={clearFilters}>\n                  {t('buttons.clear_filters')}\n                </button>\n              </div>\n            </div>\n          )}\n\n          {loading || filterLoading ? (\n            <div className=\"loading-state\">\n              <div className=\"spinner\"></div>\n              <p>{t('modals.loading_sale_details')}</p>\n            </div>\n          ) : sale ? (\n            // Single Sale Detail View\n            <>\n              {/* Sale Information */}\n              <div className=\"sale-info-section\">\n                <h3>{t('modals.sale_information')}</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <label>{t('table_headers.sale_number')}:</label>\n                    <span className=\"sale-number\">{sale.sale_number}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>{t('common.status')}:</label>\n                    <span className={`status status-${sale.status}`}>\n                      {sale.status.charAt(0).toUpperCase() + sale.status.slice(1)}\n                    </span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>{t('common.date')}:</label>\n                    <span>{formatDate(sale.created_at)}</span>\n                  </div>\n                  <div className=\"info-item\">\n                    <label>{t('table_headers.sold_by')}:</label>\n                    <span>{sale.sold_by_name || t('app.unknown_user')}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Customer Information */}\n              <div className=\"customer-info-section\">\n                <h3>{t('modals.customer_information')}</h3>\n                <div className=\"info-grid\">\n                  <div className=\"info-item\">\n                    <label>{t('common.name')}:</label>\n                    <span>{sale.customer_name || t('dashboard.walk_in_customer')}</span>\n                  </div>\n                  {sale.customer_phone && (\n                    <div className=\"info-item\">\n                      <label>{t('common.phone')}:</label>\n                      <span>{sale.customer_phone}</span>\n                    </div>\n                  )}\n                  {sale.customer_email && (\n                    <div className=\"info-item\">\n                      <label>{t('common.email')}:</label>\n                      <span>{sale.customer_email}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Sale Items */}\n              <div className=\"items-section\">\n                <h3>{t('table_headers.items')} ({sale.items?.length || 0})</h3>\n                {sale.items && sale.items.length > 0 ? (\n                  <div className=\"items-table\">\n                    <div className=\"table-header\">\n                      <div className=\"col-product\">{t('common.name')}</div>\n                      <div className=\"col-sku\">SKU</div>\n                      <div className=\"col-quantity\">{t('common.quantity')}</div>\n                      <div className=\"col-unit\">{t('common.unit')}</div>\n                      <div className=\"col-price\">{t('common.price')}</div>\n                      <div className=\"col-mode\">{t('common.type')}</div>\n                      <div className=\"col-total\">{t('common.total')}</div>\n                    </div>\n                    {sale.items.map((item, index) => (\n                      <div key={index} className=\"table-row\">\n                        <div className=\"col-product\">\n                          <div className=\"product-name\">{item.product_name}</div>\n                        </div>\n                        <div className=\"col-sku\">{item.product_sku}</div>\n                        <div className=\"col-quantity\">{item.quantity_display || item.quantity}</div>\n                        <div className=\"col-unit\">\n                          {item.unit_name ? `${item.unit_name} (${item.unit_symbol || ''})` : 'N/A'}\n                        </div>\n                        <div className=\"col-price\">{formatCurrency(item.unit_price)}</div>\n                        <div className=\"col-mode\">\n                          <span className={`price-mode-badge ${item.price_mode || 'standard'}`}>\n                            {item.price_mode === 'wholesale' ? t('common.wholesale') : t('common.retail')}\n                          </span>\n                        </div>\n                        <div className=\"col-total\">{formatCurrency(item.total_price)}</div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"no-items\">No items found</p>\n                )}\n              </div>\n\n              {/* Payment Information */}\n              <div className=\"payment-section\">\n                <h3>{t('modals.payment_summary')}</h3>\n                <div className=\"payment-summary\">\n                  <div className=\"payment-row\">\n                    <label>{t('table_headers.total_amount')}:</label>\n                    <span>{formatCurrency(sale.subtotal)}</span>\n                  </div>\n                  {sale.cost_amount && sale.cost_amount > 0 && (\n                    <div className=\"payment-row cost-breakdown\">\n                      <label>Cost (excl. tax):</label>\n                      <span>{formatCurrency(sale.cost_amount)}</span>\n                    </div>\n                  )}\n                  {sale.tax_amount > 0 && (\n                    <div className=\"payment-row tax-breakdown\">\n                      <label>{t('modals.tax_included')}:</label>\n                      <span>{formatCurrency(sale.tax_amount)}</span>\n                    </div>\n                  )}\n                  {sale.discount_amount > 0 && (\n                    <div className=\"payment-row discount\">\n                      <label>{t('modals.discount')}:</label>\n                      <span>-{formatCurrency(sale.discount_amount)}</span>\n                    </div>\n                  )}\n                  <div className=\"payment-row total\">\n                    <label>{t('common.total')}:</label>\n                    <span>{formatCurrency(sale.total_amount)}</span>\n                  </div>\n                  <div className=\"payment-row\">\n                    <label>{t('table_headers.payment_method')}:</label>\n                    <span className=\"payment-method\">\n                      {sale.payment_method.charAt(0).toUpperCase() + sale.payment_method.slice(1)}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Notes */}\n              {sale.notes && (\n                <div className=\"notes-section\">\n                  <h3>{t('common.notes')}</h3>\n                  <div className=\"notes-content\">\n                    {sale.notes}\n                  </div>\n                </div>\n              )}\n            </>\n          ) : (\n            // Sales List View with Pagination\n            <>\n              <div className=\"sales-list-section\">\n                <h3>{t('modals.recent_sales')} ({sales.length})</h3>\n                \n                {sales.length > 0 ? (\n                  <div className=\"sales-table\">\n                    <div className=\"table-header\">\n                      <div className=\"col-sale-number\">{t('table_headers.sale_number')}</div>\n                      <div className=\"col-customer\">{t('common.name')}</div>\n                      <div className=\"col-date\">{t('common.date')}</div>\n                      <div className=\"col-amount\">{t('common.total')}</div>\n                      <div className=\"col-status\">{t('common.status')}</div>\n                    </div>\n                    {sales.map((saleItem) => (\n                      <div key={saleItem.id} className=\"table-row clickable\" onClick={() => {/* Handle click to view details */}}>\n                        <div className=\"col-sale-number\">{saleItem.sale_number}</div>\n                        <div className=\"col-customer\">{saleItem.customer_name || t('dashboard.walk_in_customer')}</div>\n                        <div className=\"col-date\">{formatDate(saleItem.created_at)}</div>\n                        <div className=\"col-amount\">{formatCurrency(saleItem.total_amount)}</div>\n                        <div className=\"col-status\">\n                          <span className={`status status-${saleItem.status}`}>\n                            {saleItem.status.charAt(0).toUpperCase() + saleItem.status.slice(1)}\n                          </span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <p className=\"no-sales\">{t('modals.no_sales_found')}</p>\n                )}\n\n                {/* Pagination Controls */}\n                {totalPages > 1 && (\n                  <div className=\"pagination-controls\">\n                    <button \n                      className=\"btn-pagination\" \n                      onClick={goToPrevPage}\n                      disabled={currentPage === 1}\n                    >\n                      {t('buttons.previous')}\n                    </button>\n                    \n                    <span className=\"pagination-info\">\n                      {t('pagination.page')} {currentPage} {t('pagination.of')} {totalPages}\n                    </span>\n                    \n                    <button \n                      className=\"btn-pagination\" \n                      onClick={goToNextPage}\n                      disabled={currentPage === totalPages}\n                    >\n                      {t('buttons.next')}\n                    </button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n\n        <div className=\"modal-footer\">\n          <button className=\"btn-secondary\" onClick={onClose}>\n            {t('modals.close')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SaleDetailModal;\n\n// import React from 'react';\n// import { useTranslation } from 'react-i18next';\n// import PrintButton from './PrintButton';\n// import './SaleDetailModal.css';\n// import {formatCurrency, formatDate} from '../utils/helpers';\n\n// const SaleDetailModal = ({ sale, onClose, loading = false }) => {\n//   const { t } = useTranslation();\n//   if (!sale && !loading) return null;\n\n//   // Handle case where sale data is incomplete\n//   if (sale && !sale.sale_number) {\n//     return (\n//       <div className=\"modal-overlay\" onClick={onClose}>\n//         <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n//           <div className=\"modal-header\">\n//             <h2>{t('modals.sale_details')}</h2>\n//             <button className=\"modal-close\" onClick={onClose}>\n//               <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n//                 <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n//               </svg>\n//             </button>\n//           </div>\n//           <div className=\"modal-body\">\n//             <div className=\"error-state\">\n//               <p>Unable to load sale details. The sale data appears to be incomplete.</p>\n//             </div>\n//           </div>\n//           <div className=\"modal-footer\">\n//             <button className=\"btn-secondary\" onClick={onClose}>\n//               {t('modals.close')}\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   // const formatDate = (dateString) => {\n//   //   return new Date(dateString).toLocaleString();\n//   // };\n\n//   // const formatCurrency = (amount) => {\n//   //   return `${parseFloat(amount).toFixed(2)} MGA`;\n//   // };\n\n//   return (\n//     <div className=\"modal-overlay\" onClick={onClose}>\n//       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n//         <div className=\"modal-header\">\n//           <h2>{t('modals.sale_details')}</h2>\n//           <div className=\"header-actions\">\n//             <PrintButton\n//               data={sale}\n//               title={t('titles.sale_receipt')}\n//               type=\"sale\"\n//               printText={t('buttons.print_receipt')}\n//               className=\"print-sale-receipt-btn\"\n//             />\n//             <button className=\"modal-close\" onClick={onClose}>\n//               <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n//                 <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n//               </svg>\n//             </button>\n//           </div>\n//         </div>\n\n//         <div className=\"modal-body\">\n//           {loading ? (\n//             <div className=\"loading-state\">\n//               <div className=\"spinner\"></div>\n//               <p>{t('modals.loading_sale_details')}</p>\n//             </div>\n//           ) : (\n//             <>\n//               {/* Sale Information */}\n//               <div className=\"sale-info-section\">\n//             <h3>{t('modals.sale_information')}</h3>\n//             <div className=\"info-grid\">\n//               <div className=\"info-item\">\n//                 <label>{t('table_headers.sale_number')}:</label>\n//                 <span className=\"sale-number\">{sale.sale_number}</span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('common.status')}:</label>\n//                 <span className={`status status-${sale.status}`}>\n//                   {sale.status.charAt(0).toUpperCase() + sale.status.slice(1)}\n//                 </span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('common.date')}:</label>\n//                 <span>{formatDate(sale.created_at)}</span>\n//               </div>\n//               <div className=\"info-item\">\n//                 <label>{t('table_headers.sold_by')}:</label>\n//                 <span>{sale.sold_by_name || t('app.unknown_user')}</span>\n//               </div>\n//             </div>\n//           </div>\n\n//           {/* Customer Information */}\n//           <div className=\"customer-info-section\">\n//             <h3>{t('modals.customer_information')}</h3>\n//             <div className=\"info-grid\">\n//               <div className=\"info-item\">\n//                 <label>{t('common.name')}:</label>\n//                 <span>{sale.customer_name || t('dashboard.walk_in_customer')}</span>\n//               </div>\n//               {sale.customer_phone && (\n//                 <div className=\"info-item\">\n//                   <label>{t('common.phone')}:</label>\n//                   <span>{sale.customer_phone}</span>\n//                 </div>\n//               )}\n//               {sale.customer_email && (\n//                 <div className=\"info-item\">\n//                   <label>{t('common.email')}:</label>\n//                   <span>{sale.customer_email}</span>\n//                 </div>\n//               )}\n//             </div>\n//           </div>\n\n//           {/* Sale Items */}\n//           <div className=\"items-section\">\n//             <h3>{t('table_headers.items')} ({sale.items?.length || 0})</h3>\n//             {sale.items && sale.items.length > 0 ? (\n//               <div className=\"items-table\">\n//                 <div className=\"table-header\">\n//                   <div className=\"col-product\">{t('common.name')}</div>\n//                   <div className=\"col-sku\">SKU</div>\n//                   <div className=\"col-quantity\">{t('common.quantity')}</div>\n//                   <div className=\"col-unit\">{t('common.unit')}</div>\n//                   <div className=\"col-price\">{t('common.price')}</div>\n//                   <div className=\"col-mode\">{t('common.type')}</div>\n//                   <div className=\"col-total\">{t('common.total')}</div>\n//                 </div>\n//                 {sale.items.map((item, index) => (\n//                   <div key={index} className=\"table-row\">\n//                     <div className=\"col-product\">\n//                       <div className=\"product-name\">{item.product_name}</div>\n//                     </div>\n//                     <div className=\"col-sku\">{item.product_sku}</div>\n//                     <div className=\"col-quantity\">{item.quantity_display || item.quantity}</div>\n//                     <div className=\"col-unit\">\n//                       {item.unit_name ? `${item.unit_name} (${item.unit_symbol || ''})` : 'N/A'}\n//                     </div>\n//                     <div className=\"col-price\">{formatCurrency(item.unit_price)}</div>\n//                     <div className=\"col-mode\">\n//                       <span className={`price-mode-badge ${item.price_mode || 'standard'}`}>\n//                         {item.price_mode === 'wholesale' ? t('common.wholesale') : t('common.retail')}\n//                       </span>\n//                     </div>\n//                     <div className=\"col-total\">{formatCurrency(item.total_price)}</div>\n//                   </div>\n//                 ))}\n//               </div>\n//             ) : (\n//               <p className=\"no-items\">No items found</p>\n//             )}\n//           </div>\n\n//           {/* Payment Information */}\n//           <div className=\"payment-section\">\n//             <h3>{t('modals.payment_summary')}</h3>\n//             <div className=\"payment-summary\">\n//               <div className=\"payment-row\">\n//                 <label>{t('table_headers.total_amount')}:</label>\n//                 <span>{formatCurrency(sale.subtotal)}</span>\n//               </div>\n//               {sale.cost_amount && sale.cost_amount > 0 && (\n//                 <div className=\"payment-row cost-breakdown\">\n//                   <label>Cost (excl. tax):</label>\n//                   <span>{formatCurrency(sale.cost_amount)}</span>\n//                 </div>\n//               )}\n//               {sale.tax_amount > 0 && (\n//                 <div className=\"payment-row tax-breakdown\">\n//                   <label>{t('modals.tax_included')}:</label>\n//                   <span>{formatCurrency(sale.tax_amount)}</span>\n//                 </div>\n//               )}\n//               {sale.discount_amount > 0 && (\n//                 <div className=\"payment-row discount\">\n//                   <label>{t('modals.discount')}:</label>\n//                   <span>-{formatCurrency(sale.discount_amount)}</span>\n//                 </div>\n//               )}\n//               <div className=\"payment-row total\">\n//                 <label>{t('common.total')}:</label>\n//                 <span>{formatCurrency(sale.total_amount)}</span>\n//               </div>\n//               <div className=\"payment-row\">\n//                 <label>{t('table_headers.payment_method')}:</label>\n//                 <span className=\"payment-method\">\n//                   {sale.payment_method.charAt(0).toUpperCase() + sale.payment_method.slice(1)}\n//                 </span>\n//               </div>\n//             </div>\n//           </div>\n\n//           {/* Notes */}\n//           {sale.notes && (\n//             <div className=\"notes-section\">\n//               <h3>{t('common.notes')}</h3>\n//               <div className=\"notes-content\">\n//                 {sale.notes}\n//               </div>\n//             </div>\n//           )}\n//             </>\n//           )}\n//         </div>\n\n//         <div className=\"modal-footer\">\n//           <button className=\"btn-secondary\" onClick={onClose}>\n//             {t('modals.close')}\n//           </button>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default SaleDetailModal;\n"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}