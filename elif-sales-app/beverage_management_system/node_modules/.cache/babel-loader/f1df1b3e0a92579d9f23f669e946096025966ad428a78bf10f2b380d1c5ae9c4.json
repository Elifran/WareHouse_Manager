{"ast":null,"code":"import React,{useState}from'react';import{useTranslation}from'react-i18next';import Button from'./Button';import'./PrintButton.css';// Helper functions for generating print content\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const generateInventoryContent=data=>{console.log('generateInventoryContent - Data received:',data);console.log('generateInventoryContent - Is array?',Array.isArray(data));console.log('generateInventoryContent - Data keys:',Object.keys(data));// Try to extract the products array from the data object\nlet products=data;if(!Array.isArray(data)){// Look for common array property names\nif(data.results&&Array.isArray(data.results)){products=data.results;console.log('Found products in data.results:',products.length);}else if(data.data&&Array.isArray(data.data)){products=data.data;console.log('Found products in data.data:',products.length);}else if(data.items&&Array.isArray(data.items)){products=data.items;console.log('Found products in data.items:',products.length);}else{// Check if data has numbered keys (like '0', '1', '2', etc.)\nconst numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){products=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');console.log('Found products in numbered keys:',products.length);}else{console.log('No array found in data object');products=[];}}}console.log('Final products array length:',products.length);return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>{t('titles.inventory_summary')}</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Total Products:</span>\\n        <span class=\\\"info-value\\\">\".concat(Array.isArray(products)?products.length:0,\"</span>\\n      </div>\\n    </div>\\n    <table>\\n      <thead>\\n        <tr>\\n          <th>Product Name</th>\\n          <th>SKU</th>\\n          <th>Stock Quantity</th>\\n          <th>Base Unit</th>\\n          <th>Unit Price</th>\\n          <th>Category</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        \").concat(Array.isArray(products)?products.map(item=>{var _item$base_unit,_item$base_unit2,_item$category;return\"\\n          <tr>\\n            <td>\".concat(item.name||'N/A',\"</td>\\n            <td>\").concat(item.sku||'N/A',\"</td>\\n            <td>\").concat(item.stock_quantity||0,\"</td>\\n            <td>\").concat(((_item$base_unit=item.base_unit)===null||_item$base_unit===void 0?void 0:_item$base_unit.name)||((_item$base_unit2=item.base_unit)===null||_item$base_unit2===void 0?void 0:_item$base_unit2.symbol)||'piece',\"</td>\\n            <td>\").concat(parseFloat(item.price||0).toFixed(2),\" MGA</td>\\n            <td>\").concat(((_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.name)||'N/A',\"</td>\\n          </tr>\\n        \");}).join(''):'<tr><td colspan=\"6\">No products found</td></tr>',\"\\n      </tbody>\\n    </table>\\n  \");};const generatePurchaseOrderContent=data=>{var _data$supplier;return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>Purchase Order Information</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Order Number:</span>\\n        <span class=\\\"info-value\\\">\".concat(data.order_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Supplier:</span>\\n        <span class=\\\"info-value\\\">\").concat(((_data$supplier=data.supplier)===null||_data$supplier===void 0?void 0:_data$supplier.name)||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Order Date:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.order_date?new Date(data.order_date).toLocaleDateString():'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Status:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.status||'N/A',\"</span>\\n      </div>\\n    </div>\\n    <table>\\n      <thead>\\n        <tr>\\n          <th>Product</th>\\n          <th>Quantity Ordered</th>\\n          <th>Unit</th>\\n          <th>Unit Cost</th>\\n          <th>Total Cost</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        \").concat(data.items?data.items.map(item=>{var _item$product,_item$unit,_item$unit2;return\"\\n          <tr>\\n            <td>\".concat(((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.name)||'N/A',\"</td>\\n            <td>\").concat(item.quantity_ordered||0,\"</td>\\n            <td>\").concat(((_item$unit=item.unit)===null||_item$unit===void 0?void 0:_item$unit.name)||((_item$unit2=item.unit)===null||_item$unit2===void 0?void 0:_item$unit2.symbol)||'piece',\"</td>\\n            <td>\").concat(parseFloat(item.unit_cost||0).toFixed(2),\" MGA</td>\\n            <td>\").concat(parseFloat((item.quantity_ordered||0)*(item.unit_cost||0)).toFixed(2),\" MGA</td>\\n          </tr>\\n        \");}).join(''):'',\"\\n      </tbody>\\n      <tfoot>\\n        <tr class=\\\"total-row\\\">\\n          <td colspan=\\\"4\\\">Total Amount:</td>\\n          <td>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</td>\\n        </tr>\\n      </tfoot>\\n    </table>\\n  \");};const generateDeliveryContent=data=>{var _data$purchase_order;return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>Delivery Information</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Delivery Number:</span>\\n        <span class=\\\"info-value\\\">\".concat(data.delivery_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Purchase Order:</span>\\n        <span class=\\\"info-value\\\">\").concat(((_data$purchase_order=data.purchase_order)===null||_data$purchase_order===void 0?void 0:_data$purchase_order.order_number)||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Delivery Date:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.delivery_date?new Date(data.delivery_date).toLocaleDateString():'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Status:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.status||'N/A',\"</span>\\n      </div>\\n    </div>\\n    <table>\\n      <thead>\\n        <tr>\\n          <th>Product</th>\\n          <th>Quantity Received</th>\\n          <th>Unit</th>\\n          <th>Unit Cost</th>\\n          <th>Total Cost</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        \").concat(data.items?data.items.map(item=>{var _item$product2,_item$unit3,_item$unit4;return\"\\n          <tr>\\n            <td>\".concat(((_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.name)||'N/A',\"</td>\\n            <td>\").concat(item.quantity_received||0,\"</td>\\n            <td>\").concat(((_item$unit3=item.unit)===null||_item$unit3===void 0?void 0:_item$unit3.name)||((_item$unit4=item.unit)===null||_item$unit4===void 0?void 0:_item$unit4.symbol)||'piece',\"</td>\\n            <td>\").concat(parseFloat(item.unit_cost||0).toFixed(2),\" MGA</td>\\n            <td>\").concat(parseFloat((item.quantity_received||0)*(item.unit_cost||0)).toFixed(2),\" MGA</td>\\n          </tr>\\n        \");}).join(''):'',\"\\n      </tbody>\\n      <tfoot>\\n        <tr class=\\\"total-row\\\">\\n          <td colspan=\\\"4\\\">Total Amount:</td>\\n          <td>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</td>\\n        </tr>\\n      </tfoot>\\n    </table>\\n  \");};const generateSaleContent=(data,t)=>{// Debug: Log the data being processed\nconsole.log('generateSaleContent - Data received:',data);console.log('generateSaleContent - Payment status:',data.payment_status);console.log('generateSaleContent - Paid amount:',data.paid_amount);console.log('generateSaleContent - Remaining amount:',data.remaining_amount);console.log('generateSaleContent - Items array:',data.items);console.log('generateSaleContent - Items length:',data.items?data.items.length:'No items');// Extract items from the data object\nlet items=data.items;if(!items){// Check if data has numbered keys for items\nconst numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){items=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');console.log('Found items in numbered keys:',items.length);}}console.log('Final items array length:',items?items.length:0);return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>Sale Information</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Sale Number:</span>\\n        <span class=\\\"info-value\\\">\".concat(data.sale_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Customer:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.customer_name||'Walk-in Customer',\"</span>\\n      </div>\\n      \").concat(data.customer_phone?\"\\n        <div class=\\\"info-row\\\">\\n          <span class=\\\"info-label\\\">Phone:</span>\\n          <span class=\\\"info-value\\\">\".concat(data.customer_phone,\"</span>\\n        </div>\\n      \"):'',\"\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Date:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.created_at?new Date(data.created_at).toLocaleDateString():'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Status:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.status||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Payment Status:</span>\\n        <span class=\\\"info-value\\\">\").concat(data.payment_status==='paid'?t('payment_status.paid'):data.payment_status==='partial'?t('payment_status.partial_payment'):data.payment_status==='pending'?t('payment_status.pending_payment'):t('payment_status.unknown'),\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Total Amount:</span>\\n        <span class=\\\"info-value\\\">\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Paid Amount:</span>\\n        <span class=\\\"info-value\\\">\").concat(parseFloat(data.paid_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n      \").concat(data.payment_status==='partial'?\"\\n        <div class=\\\"info-row payment-warning\\\">\\n          <span class=\\\"info-label\\\">Remaining Amount:</span>\\n          <span class=\\\"info-value\\\">\".concat(parseFloat(data.remaining_amount||0).toFixed(2),\" MGA</span>\\n        </div>\\n        <div class=\\\"info-row payment-warning\\\">\\n          <span class=\\\"info-label\\\">Due Date:</span>\\n          <span class=\\\"info-value\\\">\").concat(data.due_date||t('payment_status.to_be_determined'),\"</span>\\n        </div>\\n      \"):'',\"\\n    </div>\\n    <table>\\n      <thead>\\n        <tr>\\n          <th>Product</th>\\n          <th>Quantity</th>\\n          <th>Unit</th>\\n          <th>Unit Price</th>\\n          <th>Total</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        \").concat(items&&Array.isArray(items)?items.map(item=>\"\\n          <tr>\\n            <td>\".concat(item.product_name||'N/A',\"</td>\\n            <td>\").concat(item.quantity_display||item.quantity||0,\"</td>\\n            <td>\").concat(item.unit_name||'piece',\"</td>\\n            <td>\").concat(parseFloat(item.unit_price||0).toFixed(2),\" MGA</td>\\n            <td>\").concat(parseFloat(item.total_price||0).toFixed(2),\" MGA</td>\\n          </tr>\\n        \")).join(''):'<tr><td colspan=\"5\">No items found</td></tr>',\"\\n      </tbody>\\n      <tfoot>\\n        <tr class=\\\"total-row\\\">\\n          <td colspan=\\\"4\\\">Total Amount:</td>\\n          <td>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</td>\\n        </tr>\\n      </tfoot>\\n    </table>\\n  \");};const generateSalesHistoryContent=data=>{// Debug: Log the data being processed\nconsole.log('generateSalesHistoryContent - Data received:',data);console.log('generateSalesHistoryContent - Is array?',Array.isArray(data));console.log('generateSalesHistoryContent - Data keys:',Object.keys(data));// Try to extract the sales array from the data object\nlet sales=data;if(!Array.isArray(data)){// Look for common array property names\nif(data.results&&Array.isArray(data.results)){sales=data.results;console.log('Found sales in data.results:',sales.length);}else if(data.data&&Array.isArray(data.data)){sales=data.data;console.log('Found sales in data.data:',sales.length);}else if(data.items&&Array.isArray(data.items)){sales=data.items;console.log('Found sales in data.items:',sales.length);}else{// Check if data has numbered keys (like '0', '1', '2', etc.)\nconst numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){sales=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');console.log('Found sales in numbered keys:',sales.length);}else{console.log('No array found in data object');sales=[];}}}console.log('Final sales array length:',sales.length);return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>Sales Report Summary</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Total Sales:</span>\\n        <span class=\\\"info-value\\\">\".concat(Array.isArray(sales)?sales.length:0,\"</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Total Revenue:</span>\\n        <span class=\\\"info-value\\\">\").concat(Array.isArray(sales)?sales.reduce((sum,sale)=>sum+parseFloat(sale.total_amount||0),0).toFixed(2):'0.00',\" MGA</span>\\n      </div>\\n    </div>\\n    <table>\\n      <thead>\\n        <tr>\\n          <th>Sale Number</th>\\n          <th>Customer</th>\\n          <th>Date</th>\\n          <th>Total Amount</th>\\n          <th>Status</th>\\n        </tr>\\n      </thead>\\n      <tbody>\\n        \").concat(Array.isArray(sales)?sales.map(sale=>\"\\n          <tr>\\n            <td>\".concat(sale.sale_number||'N/A',\"</td>\\n            <td>\").concat(sale.customer_name||'Walk-in Customer',\"</td>\\n            <td>\").concat(sale.created_at?new Date(sale.created_at).toLocaleDateString():'N/A',\"</td>\\n            <td>\").concat(parseFloat(sale.total_amount||0).toFixed(2),\" MGA</td>\\n            <td>\").concat(sale.status||'N/A',\"</td>\\n          </tr>\\n        \")).join(''):'',\"\\n      </tbody>\\n    </table>\\n  \");};const generateDefaultContent=data=>{return\"\\n    <div class=\\\"info-section\\\">\\n      <h3>Document Information</h3>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Document Type:</span>\\n        <span class=\\\"info-value\\\">General Document</span>\\n      </div>\\n      <div class=\\\"info-row\\\">\\n        <span class=\\\"info-label\\\">Generated:</span>\\n        <span class=\\\"info-value\\\">\".concat(new Date().toLocaleString(),\"</span>\\n      </div>\\n    </div>\\n    <div class=\\\"info-section\\\">\\n      <h3>Content</h3>\\n      <pre>\").concat(JSON.stringify(data,null,2),\"</pre>\\n    </div>\\n  \");};// Export the generatePrintContent function\nexport const generatePrintContent=(data,title,type,t)=>{console.log('generatePrintContent called with:',{data,title,type});const currentDate=new Date().toLocaleDateString();const currentTime=new Date().toLocaleTimeString();const printTimestamp=new Date().toISOString();const printId=data.print_id||\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9));console.log('Generating HTML content for type:',type);let content=\"\\n    <!DOCTYPE html>\\n    <html>\\n    <head>\\n      <title>\".concat(title,\"</title>\\n      <style>\\n        body { \\n          font-family: Arial, sans-serif; \\n          margin: 20px; \\n          color: #333;\\n          line-height: 1.4;\\n        }\\n        .header { \\n          text-align: center; \\n          border-bottom: 2px solid #333; \\n          padding-bottom: 10px; \\n          margin-bottom: 20px; \\n        }\\n        .header h1 { \\n          margin: 0; \\n          color: #2c3e50; \\n          font-size: 24px;\\n        }\\n        .header .date { \\n          color: #666; \\n          font-size: 14px; \\n          margin-top: 5px;\\n        }\\n        .header .print-info { \\n          color: #888; \\n          font-size: 12px; \\n          margin-top: 3px;\\n          font-family: monospace;\\n        }\\n        .info-section { \\n          margin-bottom: 20px; \\n          padding: 15px; \\n          background: #f8f9fa; \\n          border-radius: 5px; \\n        }\\n        .info-section h3 { \\n          margin: 0 0 10px 0; \\n          color: #2c3e50; \\n          font-size: 16px;\\n        }\\n        .info-row { \\n          display: flex; \\n          justify-content: space-between; \\n          margin-bottom: 5px; \\n        }\\n        .info-label { \\n          font-weight: bold; \\n          color: #555; \\n        }\\n        .info-value { \\n          color: #333; \\n        }\\n        table { \\n          width: 100%; \\n          border-collapse: collapse; \\n          margin-top: 10px; \\n        }\\n        th, td { \\n          border: 1px solid #ddd; \\n          padding: 8px; \\n          text-align: left; \\n        }\\n        th { \\n          background-color: #f2f2f2; \\n          font-weight: bold; \\n          color: #2c3e50;\\n        }\\n        .total-row { \\n          font-weight: bold; \\n          background-color: #e9ecef; \\n        }\\n        .footer { \\n          margin-top: 30px; \\n          text-align: center; \\n          color: #666; \\n          font-size: 12px; \\n          border-top: 1px solid #ddd; \\n          padding-top: 10px; \\n        }\\n        @media print {\\n          body { margin: 0; }\\n          .no-print { display: none; }\\n        }\\n      </style>\\n    </head>\\n    <body>\\n      <div class=\\\"header\\\">\\n        <h1>\").concat(title,\"</h1>\\n        <div class=\\\"date\\\">Generated on \").concat(currentDate,\" at \").concat(currentTime,\"</div>\\n        <div class=\\\"print-info\\\">Print ID: \").concat(printId,\" | Timestamp: \").concat(printTimestamp,\"</div>\\n      </div>\\n  \");// Add type-specific content\nconsole.log('Processing switch statement for type:',type);switch(type){case'inventory':console.log('Generating inventory content');content+=generateInventoryContent(data);break;case'purchase_order':console.log('Generating purchase order content');content+=generatePurchaseOrderContent(data);break;case'delivery':console.log('Generating delivery content');content+=generateDeliveryContent(data);break;case'sale':console.log('Generating sale content');content+=generateSaleContent(data,t);break;case'sales_history':console.log('Generating sales history content');content+=generateSalesHistoryContent(data);break;default:console.log('Using default content generator');content+=generateDefaultContent(data);}console.log('Content generated, length:',content.length);content+=\"\\n      <div class=\\\"footer\\\">\\n        <p>Generated by Beverage Management System</p>\\n        <p>Print ID: \".concat(printId,\" | Generated: \").concat(printTimestamp,\"</p>\\n        <p>Document Type: \").concat(type.toUpperCase(),\" | User: \").concat(data.user_name||'System',\"</p>\\n      </div>\\n    </body>\\n    </html>\\n  \");return content;};const PrintButton=_ref=>{let{data,title,type='default',onValidate=null,validateText='Validate & Print',printText='Print',className='',disabled=false,showValidateOption=false}=_ref;const{t}=useTranslation();const[isPrinting,setIsPrinting]=useState(false);const[showPrintOptions,setShowPrintOptions]=useState(false);const handlePrint=async function(){let validateFirst=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;console.log('=== PRINT DEBUGGING START ===');console.log('Print data:',data);console.log('Print title:',title);console.log('Print type:',type);if(validateFirst&&onValidate){try{await onValidate();}catch(error){console.error('Validation failed:',error);return;}}setIsPrinting(true);try{// Create print content\nconsole.log('Generating print content...');const printContent=generatePrintContent(data,title,type,t);console.log('Generated print content length:',printContent.length);console.log('Generated print content preview:',printContent.substring(0,500)+'...');// Open print window\nconsole.log('Opening print window...');const printWindow=window.open('','_blank','width=800,height=600');if(!printWindow){throw new Error('Failed to open print window. Please check popup blockers.');}console.log('Writing content to print window...');printWindow.document.write(printContent);printWindow.document.close();// Wait for content to load then print\nconst printAfterLoad=()=>{console.log('Print window loaded, starting print...');printWindow.focus();printWindow.print();// Close the window after a short delay to allow printing\nsetTimeout(()=>{printWindow.close();console.log('Print completed');},1000);};// Check if window is already loaded\nif(printWindow.document.readyState==='complete'){printAfterLoad();}else{printWindow.onload=printAfterLoad;}// Fallback timeout\nsetTimeout(()=>{if(!printWindow.closed){console.log('Print window still open after timeout, closing...');printWindow.close();}},5000);}catch(error){console.error('Print error:',error);alert('Failed to print. Please try again. Error: '+error.message);}finally{setIsPrinting(false);setShowPrintOptions(false);console.log('=== PRINT DEBUGGING END ===');}};if(showValidateOption&&onValidate){return/*#__PURE__*/_jsxs(\"div\",{className:\"print-button-container \".concat(className),children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>setShowPrintOptions(!showPrintOptions),disabled:disabled,children:showPrintOptions?'Hide Options':'Show Options'}),showPrintOptions&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"small\",onClick:()=>handlePrint(true),disabled:disabled||isPrinting,children:isPrinting?'Processing...':validateText}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false),disabled:disabled||isPrinting,children:isPrinting?'Preparing...':printText})]})]});}return/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false),disabled:disabled||isPrinting,className:className,children:isPrinting?'Printing...':printText});};export default PrintButton;","map":{"version":3,"names":["React","useState","useTranslation","Button","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","generateInventoryContent","data","console","log","Array","isArray","Object","keys","products","results","length","items","numberedKeys","filter","key","test","map","item","concat","_item$base_unit","_item$base_unit2","_item$category","name","sku","stock_quantity","base_unit","symbol","parseFloat","price","toFixed","category","join","generatePurchaseOrderContent","_data$supplier","order_number","supplier","order_date","Date","toLocaleDateString","status","_item$product","_item$unit","_item$unit2","product","quantity_ordered","unit","unit_cost","total_amount","generateDeliveryContent","_data$purchase_order","delivery_number","purchase_order","delivery_date","_item$product2","_item$unit3","_item$unit4","quantity_received","generateSaleContent","t","payment_status","paid_amount","remaining_amount","sale_number","customer_name","customer_phone","created_at","due_date","product_name","quantity_display","quantity","unit_name","unit_price","total_price","generateSalesHistoryContent","sales","reduce","sum","sale","generateDefaultContent","toLocaleString","JSON","stringify","generatePrintContent","title","type","currentDate","currentTime","toLocaleTimeString","printTimestamp","toISOString","printId","print_id","now","Math","random","toString","substr","content","toUpperCase","user_name","PrintButton","_ref","onValidate","validateText","printText","className","disabled","showValidateOption","isPrinting","setIsPrinting","showPrintOptions","setShowPrintOptions","handlePrint","validateFirst","arguments","undefined","error","printContent","substring","printWindow","window","open","Error","document","write","close","printAfterLoad","focus","print","setTimeout","readyState","onload","closed","alert","message","children","variant","size","onClick"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/components/PrintButton.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Button from './Button';\nimport './PrintButton.css';\n\n// Helper functions for generating print content\nconst generateInventoryContent = (data) => {\n  console.log('generateInventoryContent - Data received:', data);\n  console.log('generateInventoryContent - Is array?', Array.isArray(data));\n  console.log('generateInventoryContent - Data keys:', Object.keys(data));\n  \n  // Try to extract the products array from the data object\n  let products = data;\n  if (!Array.isArray(data)) {\n    // Look for common array property names\n    if (data.results && Array.isArray(data.results)) {\n      products = data.results;\n      console.log('Found products in data.results:', products.length);\n    } else if (data.data && Array.isArray(data.data)) {\n      products = data.data;\n      console.log('Found products in data.data:', products.length);\n    } else if (data.items && Array.isArray(data.items)) {\n      products = data.items;\n      console.log('Found products in data.items:', products.length);\n    } else {\n      // Check if data has numbered keys (like '0', '1', '2', etc.)\n      const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n      if (numberedKeys.length > 0) {\n        products = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n        console.log('Found products in numbered keys:', products.length);\n      } else {\n        console.log('No array found in data object');\n        products = [];\n      }\n    }\n  }\n  \n  console.log('Final products array length:', products.length);\n  \n  return `\n    <div class=\"info-section\">\n      <h3>{t('titles.inventory_summary')}</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Total Products:</span>\n        <span class=\"info-value\">${Array.isArray(products) ? products.length : 0}</span>\n      </div>\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>Product Name</th>\n          <th>SKU</th>\n          <th>Stock Quantity</th>\n          <th>Base Unit</th>\n          <th>Unit Price</th>\n          <th>Category</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${Array.isArray(products) ? products.map(item => `\n          <tr>\n            <td>${item.name || 'N/A'}</td>\n            <td>${item.sku || 'N/A'}</td>\n            <td>${item.stock_quantity || 0}</td>\n            <td>${item.base_unit?.name || item.base_unit?.symbol || 'piece'}</td>\n            <td>${parseFloat(item.price || 0).toFixed(2)} MGA</td>\n            <td>${item.category?.name || 'N/A'}</td>\n          </tr>\n        `).join('') : '<tr><td colspan=\"6\">No products found</td></tr>'}\n      </tbody>\n    </table>\n  `;\n};\n\nconst generatePurchaseOrderContent = (data) => {\n  return `\n    <div class=\"info-section\">\n      <h3>Purchase Order Information</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Order Number:</span>\n        <span class=\"info-value\">${data.order_number || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Supplier:</span>\n        <span class=\"info-value\">${data.supplier?.name || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Order Date:</span>\n        <span class=\"info-value\">${data.order_date ? new Date(data.order_date).toLocaleDateString() : 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Status:</span>\n        <span class=\"info-value\">${data.status || 'N/A'}</span>\n      </div>\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>Product</th>\n          <th>Quantity Ordered</th>\n          <th>Unit</th>\n          <th>Unit Cost</th>\n          <th>Total Cost</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${data.items ? data.items.map(item => `\n          <tr>\n            <td>${item.product?.name || 'N/A'}</td>\n            <td>${item.quantity_ordered || 0}</td>\n            <td>${item.unit?.name || item.unit?.symbol || 'piece'}</td>\n            <td>${parseFloat(item.unit_cost || 0).toFixed(2)} MGA</td>\n            <td>${parseFloat((item.quantity_ordered || 0) * (item.unit_cost || 0)).toFixed(2)} MGA</td>\n          </tr>\n        `).join('') : ''}\n      </tbody>\n      <tfoot>\n        <tr class=\"total-row\">\n          <td colspan=\"4\">Total Amount:</td>\n          <td>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</td>\n        </tr>\n      </tfoot>\n    </table>\n  `;\n};\n\nconst generateDeliveryContent = (data) => {\n  return `\n    <div class=\"info-section\">\n      <h3>Delivery Information</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Delivery Number:</span>\n        <span class=\"info-value\">${data.delivery_number || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Purchase Order:</span>\n        <span class=\"info-value\">${data.purchase_order?.order_number || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Delivery Date:</span>\n        <span class=\"info-value\">${data.delivery_date ? new Date(data.delivery_date).toLocaleDateString() : 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Status:</span>\n        <span class=\"info-value\">${data.status || 'N/A'}</span>\n      </div>\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>Product</th>\n          <th>Quantity Received</th>\n          <th>Unit</th>\n          <th>Unit Cost</th>\n          <th>Total Cost</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${data.items ? data.items.map(item => `\n          <tr>\n            <td>${item.product?.name || 'N/A'}</td>\n            <td>${item.quantity_received || 0}</td>\n            <td>${item.unit?.name || item.unit?.symbol || 'piece'}</td>\n            <td>${parseFloat(item.unit_cost || 0).toFixed(2)} MGA</td>\n            <td>${parseFloat((item.quantity_received || 0) * (item.unit_cost || 0)).toFixed(2)} MGA</td>\n          </tr>\n        `).join('') : ''}\n      </tbody>\n      <tfoot>\n        <tr class=\"total-row\">\n          <td colspan=\"4\">Total Amount:</td>\n          <td>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</td>\n        </tr>\n      </tfoot>\n    </table>\n  `;\n};\n\nconst generateSaleContent = (data, t) => {\n  // Debug: Log the data being processed\n  console.log('generateSaleContent - Data received:', data);\n  console.log('generateSaleContent - Payment status:', data.payment_status);\n  console.log('generateSaleContent - Paid amount:', data.paid_amount);\n  console.log('generateSaleContent - Remaining amount:', data.remaining_amount);\n  console.log('generateSaleContent - Items array:', data.items);\n  console.log('generateSaleContent - Items length:', data.items ? data.items.length : 'No items');\n  \n  // Extract items from the data object\n  let items = data.items;\n  if (!items) {\n    // Check if data has numbered keys for items\n    const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n    if (numberedKeys.length > 0) {\n      items = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n      console.log('Found items in numbered keys:', items.length);\n    }\n  }\n  \n  console.log('Final items array length:', items ? items.length : 0);\n  \n  return `\n    <div class=\"info-section\">\n      <h3>Sale Information</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Sale Number:</span>\n        <span class=\"info-value\">${data.sale_number || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Customer:</span>\n        <span class=\"info-value\">${data.customer_name || 'Walk-in Customer'}</span>\n      </div>\n      ${data.customer_phone ? `\n        <div class=\"info-row\">\n          <span class=\"info-label\">Phone:</span>\n          <span class=\"info-value\">${data.customer_phone}</span>\n        </div>\n      ` : ''}\n      <div class=\"info-row\">\n        <span class=\"info-label\">Date:</span>\n        <span class=\"info-value\">${data.created_at ? new Date(data.created_at).toLocaleDateString() : 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Status:</span>\n        <span class=\"info-value\">${data.status || 'N/A'}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Payment Status:</span>\n        <span class=\"info-value\">${data.payment_status === 'paid' ? t('payment_status.paid') : \n                                   data.payment_status === 'partial' ? t('payment_status.partial_payment') : \n                                   data.payment_status === 'pending' ? t('payment_status.pending_payment') : \n                                   t('payment_status.unknown')}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Total Amount:</span>\n        <span class=\"info-value\">${parseFloat(data.total_amount || 0).toFixed(2)} MGA</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Paid Amount:</span>\n        <span class=\"info-value\">${parseFloat(data.paid_amount || 0).toFixed(2)} MGA</span>\n      </div>\n      ${data.payment_status === 'partial' ? `\n        <div class=\"info-row payment-warning\">\n          <span class=\"info-label\">Remaining Amount:</span>\n          <span class=\"info-value\">${parseFloat(data.remaining_amount || 0).toFixed(2)} MGA</span>\n        </div>\n        <div class=\"info-row payment-warning\">\n          <span class=\"info-label\">Due Date:</span>\n          <span class=\"info-value\">${data.due_date || t('payment_status.to_be_determined')}</span>\n        </div>\n      ` : ''}\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>Product</th>\n          <th>Quantity</th>\n          <th>Unit</th>\n          <th>Unit Price</th>\n          <th>Total</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${items && Array.isArray(items) ? items.map(item => `\n          <tr>\n            <td>${item.product_name || 'N/A'}</td>\n            <td>${item.quantity_display || item.quantity || 0}</td>\n            <td>${item.unit_name || 'piece'}</td>\n            <td>${parseFloat(item.unit_price || 0).toFixed(2)} MGA</td>\n            <td>${parseFloat(item.total_price || 0).toFixed(2)} MGA</td>\n          </tr>\n        `).join('') : '<tr><td colspan=\"5\">No items found</td></tr>'}\n      </tbody>\n      <tfoot>\n        <tr class=\"total-row\">\n          <td colspan=\"4\">Total Amount:</td>\n          <td>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</td>\n        </tr>\n      </tfoot>\n    </table>\n  `;\n};\n\nconst generateSalesHistoryContent = (data) => {\n  // Debug: Log the data being processed\n  console.log('generateSalesHistoryContent - Data received:', data);\n  console.log('generateSalesHistoryContent - Is array?', Array.isArray(data));\n  console.log('generateSalesHistoryContent - Data keys:', Object.keys(data));\n  \n  // Try to extract the sales array from the data object\n  let sales = data;\n  if (!Array.isArray(data)) {\n    // Look for common array property names\n    if (data.results && Array.isArray(data.results)) {\n      sales = data.results;\n      console.log('Found sales in data.results:', sales.length);\n    } else if (data.data && Array.isArray(data.data)) {\n      sales = data.data;\n      console.log('Found sales in data.data:', sales.length);\n    } else if (data.items && Array.isArray(data.items)) {\n      sales = data.items;\n      console.log('Found sales in data.items:', sales.length);\n    } else {\n      // Check if data has numbered keys (like '0', '1', '2', etc.)\n      const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n      if (numberedKeys.length > 0) {\n        sales = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n        console.log('Found sales in numbered keys:', sales.length);\n      } else {\n        console.log('No array found in data object');\n        sales = [];\n      }\n    }\n  }\n  \n  console.log('Final sales array length:', sales.length);\n  \n  return `\n    <div class=\"info-section\">\n      <h3>Sales Report Summary</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Total Sales:</span>\n        <span class=\"info-value\">${Array.isArray(sales) ? sales.length : 0}</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Total Revenue:</span>\n        <span class=\"info-value\">${Array.isArray(sales) ? sales.reduce((sum, sale) => sum + parseFloat(sale.total_amount || 0), 0).toFixed(2) : '0.00'} MGA</span>\n      </div>\n    </div>\n    <table>\n      <thead>\n        <tr>\n          <th>Sale Number</th>\n          <th>Customer</th>\n          <th>Date</th>\n          <th>Total Amount</th>\n          <th>Status</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${Array.isArray(sales) ? sales.map(sale => `\n          <tr>\n            <td>${sale.sale_number || 'N/A'}</td>\n            <td>${sale.customer_name || 'Walk-in Customer'}</td>\n            <td>${sale.created_at ? new Date(sale.created_at).toLocaleDateString() : 'N/A'}</td>\n            <td>${parseFloat(sale.total_amount || 0).toFixed(2)} MGA</td>\n            <td>${sale.status || 'N/A'}</td>\n          </tr>\n        `).join('') : ''}\n      </tbody>\n    </table>\n  `;\n};\n\nconst generateDefaultContent = (data) => {\n  return `\n    <div class=\"info-section\">\n      <h3>Document Information</h3>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Document Type:</span>\n        <span class=\"info-value\">General Document</span>\n      </div>\n      <div class=\"info-row\">\n        <span class=\"info-label\">Generated:</span>\n        <span class=\"info-value\">${new Date().toLocaleString()}</span>\n      </div>\n    </div>\n    <div class=\"info-section\">\n      <h3>Content</h3>\n      <pre>${JSON.stringify(data, null, 2)}</pre>\n    </div>\n  `;\n};\n\n// Export the generatePrintContent function\nexport const generatePrintContent = (data, title, type, t) => {\n  console.log('generatePrintContent called with:', { data, title, type });\n  \n  const currentDate = new Date().toLocaleDateString();\n  const currentTime = new Date().toLocaleTimeString();\n  const printTimestamp = new Date().toISOString();\n  const printId = data.print_id || `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n  \n  console.log('Generating HTML content for type:', type);\n  \n  let content = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>${title}</title>\n      <style>\n        body { \n          font-family: Arial, sans-serif; \n          margin: 20px; \n          color: #333;\n          line-height: 1.4;\n        }\n        .header { \n          text-align: center; \n          border-bottom: 2px solid #333; \n          padding-bottom: 10px; \n          margin-bottom: 20px; \n        }\n        .header h1 { \n          margin: 0; \n          color: #2c3e50; \n          font-size: 24px;\n        }\n        .header .date { \n          color: #666; \n          font-size: 14px; \n          margin-top: 5px;\n        }\n        .header .print-info { \n          color: #888; \n          font-size: 12px; \n          margin-top: 3px;\n          font-family: monospace;\n        }\n        .info-section { \n          margin-bottom: 20px; \n          padding: 15px; \n          background: #f8f9fa; \n          border-radius: 5px; \n        }\n        .info-section h3 { \n          margin: 0 0 10px 0; \n          color: #2c3e50; \n          font-size: 16px;\n        }\n        .info-row { \n          display: flex; \n          justify-content: space-between; \n          margin-bottom: 5px; \n        }\n        .info-label { \n          font-weight: bold; \n          color: #555; \n        }\n        .info-value { \n          color: #333; \n        }\n        table { \n          width: 100%; \n          border-collapse: collapse; \n          margin-top: 10px; \n        }\n        th, td { \n          border: 1px solid #ddd; \n          padding: 8px; \n          text-align: left; \n        }\n        th { \n          background-color: #f2f2f2; \n          font-weight: bold; \n          color: #2c3e50;\n        }\n        .total-row { \n          font-weight: bold; \n          background-color: #e9ecef; \n        }\n        .footer { \n          margin-top: 30px; \n          text-align: center; \n          color: #666; \n          font-size: 12px; \n          border-top: 1px solid #ddd; \n          padding-top: 10px; \n        }\n        @media print {\n          body { margin: 0; }\n          .no-print { display: none; }\n        }\n      </style>\n    </head>\n    <body>\n      <div class=\"header\">\n        <h1>${title}</h1>\n        <div class=\"date\">Generated on ${currentDate} at ${currentTime}</div>\n        <div class=\"print-info\">Print ID: ${printId} | Timestamp: ${printTimestamp}</div>\n      </div>\n  `;\n\n  // Add type-specific content\n  console.log('Processing switch statement for type:', type);\n  switch (type) {\n    case 'inventory':\n      console.log('Generating inventory content');\n      content += generateInventoryContent(data);\n      break;\n    case 'purchase_order':\n      console.log('Generating purchase order content');\n      content += generatePurchaseOrderContent(data);\n      break;\n    case 'delivery':\n      console.log('Generating delivery content');\n      content += generateDeliveryContent(data);\n      break;\n    case 'sale':\n      console.log('Generating sale content');\n      content += generateSaleContent(data, t);\n      break;\n    case 'sales_history':\n      console.log('Generating sales history content');\n      content += generateSalesHistoryContent(data);\n      break;\n    default:\n      console.log('Using default content generator');\n      content += generateDefaultContent(data);\n  }\n  \n  console.log('Content generated, length:', content.length);\n\n  content += `\n      <div class=\"footer\">\n        <p>Generated by Beverage Management System</p>\n        <p>Print ID: ${printId} | Generated: ${printTimestamp}</p>\n        <p>Document Type: ${type.toUpperCase()} | User: ${data.user_name || 'System'}</p>\n      </div>\n    </body>\n    </html>\n  `;\n\n  return content;\n};\n\nconst PrintButton = ({ \n  data, \n  title, \n  type = 'default', \n  onValidate = null, \n  validateText = 'Validate & Print',\n  printText = 'Print',\n  className = '',\n  disabled = false,\n  showValidateOption = false\n}) => {\n  const { t } = useTranslation();\n  const [isPrinting, setIsPrinting] = useState(false);\n  const [showPrintOptions, setShowPrintOptions] = useState(false);\n\n  const handlePrint = async (validateFirst = false) => {\n    console.log('=== PRINT DEBUGGING START ===');\n    console.log('Print data:', data);\n    console.log('Print title:', title);\n    console.log('Print type:', type);\n    \n    if (validateFirst && onValidate) {\n      try {\n        await onValidate();\n      } catch (error) {\n        console.error('Validation failed:', error);\n        return;\n      }\n    }\n\n    setIsPrinting(true);\n    \n    try {\n      // Create print content\n      console.log('Generating print content...');\n      const printContent = generatePrintContent(data, title, type, t);\n      console.log('Generated print content length:', printContent.length);\n      console.log('Generated print content preview:', printContent.substring(0, 500) + '...');\n      \n      // Open print window\n      console.log('Opening print window...');\n      const printWindow = window.open('', '_blank', 'width=800,height=600');\n      \n      if (!printWindow) {\n        throw new Error('Failed to open print window. Please check popup blockers.');\n      }\n      \n      console.log('Writing content to print window...');\n      printWindow.document.write(printContent);\n      printWindow.document.close();\n      \n      // Wait for content to load then print\n      const printAfterLoad = () => {\n        console.log('Print window loaded, starting print...');\n        printWindow.focus();\n        printWindow.print();\n        // Close the window after a short delay to allow printing\n        setTimeout(() => {\n          printWindow.close();\n          console.log('Print completed');\n        }, 1000);\n      };\n      \n      // Check if window is already loaded\n      if (printWindow.document.readyState === 'complete') {\n        printAfterLoad();\n      } else {\n        printWindow.onload = printAfterLoad;\n      }\n      \n      // Fallback timeout\n      setTimeout(() => {\n        if (!printWindow.closed) {\n          console.log('Print window still open after timeout, closing...');\n          printWindow.close();\n        }\n      }, 5000);\n      \n    } catch (error) {\n      console.error('Print error:', error);\n      alert('Failed to print. Please try again. Error: ' + error.message);\n    } finally {\n      setIsPrinting(false);\n      setShowPrintOptions(false);\n      console.log('=== PRINT DEBUGGING END ===');\n    }\n  };\n\n  if (showValidateOption && onValidate) {\n    return (\n      <div className={`print-button-container ${className}`}>\n        <Button\n          variant=\"outline\"\n          size=\"small\"\n          onClick={() => setShowPrintOptions(!showPrintOptions)}\n          disabled={disabled}\n        >\n          {showPrintOptions ? 'Hide Options' : 'Show Options'}\n        </Button>\n        {showPrintOptions && (\n          <>\n            <Button\n              variant=\"primary\"\n              size=\"small\"\n              onClick={() => handlePrint(true)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? 'Processing...' : validateText}\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"small\"\n              onClick={() => handlePrint(false)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? 'Preparing...' : printText}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"small\"\n      onClick={() => handlePrint(false)}\n      disabled={disabled || isPrinting}\n      className={className}\n    >\n      {isPrinting ? 'Printing...' : printText}\n    </Button>\n  );\n};\n\nexport default PrintButton;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}