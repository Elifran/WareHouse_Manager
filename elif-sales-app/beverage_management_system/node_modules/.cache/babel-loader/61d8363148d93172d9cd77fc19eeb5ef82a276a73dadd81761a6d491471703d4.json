{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import{useDashboard,useTopProducts}from'../hooks/useDashboard';import{useSale}from'../hooks/useSales';import SaleDetailModal from'../components/SaleDetailModal';import PrintButton from'../components/PrintButton';import'./Dashboard.css';import{formatCurrency,formatDate,formatDateTime,getStatusBadge}from'../utils/helpers';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{var _dashboardData$sales,_dashboardData$sales2,_dashboardData$sales3,_dashboardData$sales4,_dashboardData$sales5,_dashboardData$sales6,_dashboardData$invent,_dashboardData$invent2,_dashboardData$invent3,_dashboardData$invent4,_dashboardData$invent5,_dashboardData$invent6,_dashboardData$chart_,_dashboardData$recent,_dashboardData$recent2,_dashboardData$top_pr2;const{t}=useTranslation();const{user}=useAuth();const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[selectedPeriod,setSelectedPeriod]=useState('daily');const[selectedSale,setSelectedSale]=useState(null);const[showSaleModal,setShowSaleModal]=useState(false);const[saleDetailLoading,setSaleDetailLoading]=useState(false);const[topProductsVisibleCount,setTopProductsVisibleCount]=useState(10);const[topProductsLoadedCount,setTopProductsLoadedCount]=useState(10);// Track how many products we've actually loaded\nconst[topProductsHasMore,setTopProductsHasMore]=useState(false);const[loadingMoreProducts,setLoadingMoreProducts]=useState(false);const[dashboardData,setDashboardData]=useState(null);// Local state for dashboard data with additional products\n// Check if user is sales team (limited access)\nconst isSalesTeam=(user===null||user===void 0?void 0:user.role)==='sales';// React Query hooks for data fetching with caching\nconst{data:dashboardDataFromQuery,isLoading:dashboardLoading,error:dashboardError,refetch:refetchDashboard}=useDashboard(selectedPeriod,isSalesTeam);const{data:topProductsCheck}=useTopProducts(selectedPeriod,isSalesTeam,10,1);// Update loading state\nuseEffect(()=>{setLoading(dashboardLoading);},[dashboardLoading]);// Update error state\nuseEffect(()=>{if(dashboardError){setError(t('dashboard.failed_to_load'));}},[dashboardError,t]);// Update dashboardData from query\nuseEffect(()=>{if(dashboardDataFromQuery){setDashboardData(dashboardDataFromQuery);}},[dashboardDataFromQuery]);// Check if there are more products\nuseEffect(()=>{var _dashboardData$top_pr;if((dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$top_pr=dashboardData.top_products)===null||_dashboardData$top_pr===void 0?void 0:_dashboardData$top_pr.length)===10){var _topProductsCheck$pro;setTopProductsHasMore((topProductsCheck===null||topProductsCheck===void 0?void 0:topProductsCheck.has_more)||(topProductsCheck===null||topProductsCheck===void 0?void 0:(_topProductsCheck$pro=topProductsCheck.products)===null||_topProductsCheck$pro===void 0?void 0:_topProductsCheck$pro.length)>0||false);}else{setTopProductsHasMore(false);}},[dashboardData,topProductsCheck]);// Reset top products visible count when dataset changes (period or role change)\nuseEffect(()=>{setTopProductsVisibleCount(10);setTopProductsLoadedCount(10);},[selectedPeriod,isSalesTeam]);const handlePeriodChange=period=>{// Only allow period changes for non-sales users\nif(!isSalesTeam){setSelectedPeriod(period);}};const handleSaleClick=sale=>{// Check if sale has an ID\nconst saleId=sale.id||sale.sale_id;if(!saleId){setError(t('errors.not_found'));return;}setSelectedSale(sale);setShowSaleModal(true);};// Fetch sale details using React Query when modal is shown\nconst saleId=(selectedSale===null||selectedSale===void 0?void 0:selectedSale.id)||(selectedSale===null||selectedSale===void 0?void 0:selectedSale.sale_id);const{data:saleDetails,isLoading:saleDetailsLoading}=useSale(saleId);useEffect(()=>{if(showSaleModal&&saleId&&saleDetails){setSelectedSale(saleDetails);}setSaleDetailLoading(saleDetailsLoading);},[showSaleModal,saleId,saleDetails,saleDetailsLoading]);const handleCloseSaleModal=()=>{setShowSaleModal(false);setSelectedSale(null);};const handleLoadMoreProducts=async()=>{try{setLoadingMoreProducts(true);const url=isSalesTeam?\"/api/reports/top-products/?offset=\".concat(topProductsLoadedCount,\"&limit=10\"):\"/api/reports/top-products/?period=\".concat(selectedPeriod,\"&offset=\").concat(topProductsLoadedCount,\"&limit=10\");const response=await api.get(url);const newProducts=response.data.products;if(newProducts&&newProducts.length>0){// Append new products to existing list\nsetDashboardData(prev=>_objectSpread(_objectSpread({},prev),{},{top_products:[...(prev.top_products||[]),...newProducts]}));const newLoadedCount=topProductsLoadedCount+newProducts.length;setTopProductsLoadedCount(newLoadedCount);setTopProductsVisibleCount(newLoadedCount);setTopProductsHasMore(response.data.has_more);}else{setTopProductsHasMore(false);}}catch(err){console.error('Failed to load more products:',err);setError(t('dashboard.failed_to_load_more_products'));}finally{setLoadingMoreProducts(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.loading')})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.error')}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>refetchDashboard(),children:t('common.retry')})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-text\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('dashboard.title')}),/*#__PURE__*/_jsx(\"p\",{children:t('dashboard.welcome',{username:user===null||user===void 0?void 0:user.username})}),isSalesTeam&&/*#__PURE__*/_jsx(\"p\",{className:\"role-indicator\",children:t('dashboard.sales_team_view')})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"period-selector\",children:[/*#__PURE__*/_jsx(\"label\",{children:t('dashboard.time_period')}),/*#__PURE__*/_jsxs(\"select\",{value:selectedPeriod,onChange:e=>handlePeriodChange(e.target.value),className:\"period-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"daily\",children:t('dashboard.daily')}),/*#__PURE__*/_jsx(\"option\",{value:\"weekly\",children:t('dashboard.weekly')}),/*#__PURE__*/_jsx(\"option\",{value:\"monthly\",children:t('dashboard.monthly')})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon sales\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('dashboard.total_revenue')}),!isSalesTeam&&/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:formatCurrency(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales=dashboardData.sales)===null||_dashboardData$sales===void 0?void 0:_dashboardData$sales.total_sales)}),isSalesTeam&&/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:\"N/A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales2=dashboardData.sales)===null||_dashboardData$sales2===void 0?void 0:_dashboardData$sales2.total_count)||0,\" \",t('dashboard.transactions')]})]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon cost\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('dashboard.total_cost')}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:formatCurrency(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales3=dashboardData.sales)===null||_dashboardData$sales3===void 0?void 0:_dashboardData$sales3.total_cost)}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:t('dashboard.cost_of_goods_sold')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon profit\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('dashboard.profit')}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:formatCurrency(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales4=dashboardData.sales)===null||_dashboardData$sales4===void 0?void 0:_dashboardData$sales4.profit)}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$sales5=dashboardData.sales)===null||_dashboardData$sales5===void 0?void 0:(_dashboardData$sales6=_dashboardData$sales5.profit_margin)===null||_dashboardData$sales6===void 0?void 0:_dashboardData$sales6.toFixed(1))||'0.0',\"% \",t('dashboard.margin')]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon inventory\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:isSalesTeam?t('dashboard.total_products'):t('dashboard.inventory_value')}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:isSalesTeam?(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent=dashboardData.inventory)===null||_dashboardData$invent===void 0?void 0:_dashboardData$invent.total_products)||0:\"\".concat(formatCurrency(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent2=dashboardData.inventory)===null||_dashboardData$invent2===void 0?void 0:_dashboardData$invent2.total_inventory_value))}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:isSalesTeam?t('dashboard.available_products'):\"\".concat((dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent3=dashboardData.inventory)===null||_dashboardData$invent3===void 0?void 0:_dashboardData$invent3.total_products)||0,\" \").concat(t('dashboard.products'))})]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon retail\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M7 4V2c0-.55-.45-1-1-1s-1 .45-1 1v2H3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1H7zM21 4h-2V2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Retail Value\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:formatCurrency(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent4=dashboardData.inventory)===null||_dashboardData$invent4===void 0?void 0:_dashboardData$invent4.total_retail_value)}),/*#__PURE__*/_jsxs(\"p\",{className:\"metric-label\",children:[(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent5=dashboardData.inventory)===null||_dashboardData$invent5===void 0?void 0:_dashboardData$invent5.low_stock_count)||0,\" low stock\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-icon alert\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Out of Stock\"}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-value\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$invent6=dashboardData.inventory)===null||_dashboardData$invent6===void 0?void 0:_dashboardData$invent6.out_of_stock_count)||0}),/*#__PURE__*/_jsx(\"p\",{className:\"metric-label\",children:\"products need restocking\"})]})]})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.sales_trend')}),/*#__PURE__*/_jsx(\"div\",{className:\"sales-chart\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$chart_=dashboardData.chart_data)===null||_dashboardData$chart_===void 0?void 0:_dashboardData$chart_.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"chart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-bars\",children:dashboardData.chart_data.reverse().map((day,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chart-bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bar-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bar sales-bar\",style:{height:\"\".concat(Math.max(5,day.sales/Math.max(...dashboardData.chart_data.map(d=>d.sales))*100),\"%\")},title:\"\".concat(t('dashboard.sales'),\": \").concat(formatCurrency(day.sales))}),/*#__PURE__*/_jsx(\"div\",{className:\"bar cost-bar\",style:{height:\"\".concat(Math.max(5,day.cost/Math.max(...dashboardData.chart_data.map(d=>d.sales))*100),\"%\")},title:\"\".concat(t('dashboard.cost'),\": \").concat(formatCurrency(day.cost))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-label\",children:new Date(day.date).toLocaleDateString('en-US',{month:'short',day:'numeric'})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bar-values\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"value sales\",children:formatCurrency(day.sales)}),/*#__PURE__*/_jsx(\"div\",{className:\"value cost\",children:formatCurrency(day.cost)})]})]},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color sales\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.sales')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color cost\"}),/*#__PURE__*/_jsx(\"span\",{children:t('dashboard.cost')})]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:t('dashboard.no_sales_data')})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.recent_sales')}),(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$recent=dashboardData.recent_sales)===null||_dashboardData$recent===void 0?void 0:_dashboardData$recent.length)>0&&/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},dashboardData.recent_sales),{},{user_name:(user===null||user===void 0?void 0:user.username)||t('app.unknown_user'),user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:t('titles.sales_management_report'),type:\"sales_history\",printText:t('buttons.print_sales_report'),className:\"print-recent-sales-btn\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"recent-sales\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$recent2=dashboardData.recent_sales)===null||_dashboardData$recent2===void 0?void 0:_dashboardData$recent2.length)>0?/*#__PURE__*/_jsx(\"div\",{className:\"sales-list\",children:dashboardData.recent_sales.map((sale,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"sale-item clickable\",onClick:()=>handleSaleClick(sale),title:t('dashboard.click_to_view_details'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sale-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:sale.sale_number}),/*#__PURE__*/_jsx(\"p\",{children:sale.customer_name||t('dashboard.walk_in_customer')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sale-amount\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(sale.total_amount)}),/*#__PURE__*/_jsx(\"small\",{children:new Date(sale.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sale-arrow\",children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"})})})]},index))}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:\"No recent sales\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:t('dashboard.top_selling_products')}),/*#__PURE__*/_jsx(\"div\",{className:\"top-products\",children:(dashboardData===null||dashboardData===void 0?void 0:(_dashboardData$top_pr2=dashboardData.top_products)===null||_dashboardData$top_pr2===void 0?void 0:_dashboardData$top_pr2.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"products-list\",children:[dashboardData.top_products.slice(0,topProductsVisibleCount).map((product,index)=>{var _product$profit_margi;return/*#__PURE__*/_jsxs(\"div\",{className:\"product-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:product.product__name}),/*#__PURE__*/_jsx(\"p\",{children:product.product__sku})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.sold'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value\",children:[product.total_sold,\" \",product.unit_symbol||'piece']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.revenue'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:formatCurrency(product.total_revenue)})]}),!isSalesTeam&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.cost'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:formatCurrency(product.total_cost)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.profit'),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-value profit\",children:formatCurrency(product.profit)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-label\",children:[t('dashboard.margin'),\":\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-value margin\",children:[((_product$profit_margi=product.profit_margin)===null||_product$profit_margi===void 0?void 0:_product$profit_margi.toFixed(1))||'0.0',\"%\"]})]})]})]})]},index);}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem',marginTop:'0.5rem',justifyContent:'center'},children:[topProductsHasMore&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"print-recent-sales-btn\",onClick:handleLoadMoreProducts,disabled:loadingMoreProducts,children:loadingMoreProducts?t('dashboard.loading')||'Loading...':t('dashboard.show_more')||'Show More'}),topProductsVisibleCount>10&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"print-recent-sales-btn\",onClick:()=>{setTopProductsVisibleCount(10);// Check if we have more products loaded than we're showing\nsetTopProductsHasMore(topProductsLoadedCount>10||dashboardData.top_products.length>10);},children:t('dashboard.show_less')||'Show Less'})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:\"No sales data available\"})})]}),showSaleModal&&/*#__PURE__*/_jsx(SaleDetailModal,{sale:selectedSale,onClose:handleCloseSaleModal,loading:saleDetailLoading})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useAuth","api","useDashboard","useTopProducts","useSale","SaleDetailModal","PrintButton","formatCurrency","formatDate","formatDateTime","getStatusBadge","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_dashboardData$sales","_dashboardData$sales2","_dashboardData$sales3","_dashboardData$sales4","_dashboardData$sales5","_dashboardData$sales6","_dashboardData$invent","_dashboardData$invent2","_dashboardData$invent3","_dashboardData$invent4","_dashboardData$invent5","_dashboardData$invent6","_dashboardData$chart_","_dashboardData$recent","_dashboardData$recent2","_dashboardData$top_pr2","t","user","loading","setLoading","error","setError","selectedPeriod","setSelectedPeriod","selectedSale","setSelectedSale","showSaleModal","setShowSaleModal","saleDetailLoading","setSaleDetailLoading","topProductsVisibleCount","setTopProductsVisibleCount","topProductsLoadedCount","setTopProductsLoadedCount","topProductsHasMore","setTopProductsHasMore","loadingMoreProducts","setLoadingMoreProducts","dashboardData","setDashboardData","isSalesTeam","role","data","dashboardDataFromQuery","isLoading","dashboardLoading","dashboardError","refetch","refetchDashboard","topProductsCheck","_dashboardData$top_pr","top_products","length","_topProductsCheck$pro","has_more","products","handlePeriodChange","period","handleSaleClick","sale","saleId","id","sale_id","saleDetails","saleDetailsLoading","handleCloseSaleModal","handleLoadMoreProducts","url","concat","response","get","newProducts","prev","_objectSpread","newLoadedCount","err","console","className","children","onClick","username","value","onChange","e","target","viewBox","fill","d","sales","total_sales","total_count","total_cost","profit","profit_margin","toFixed","inventory","total_products","total_inventory_value","total_retail_value","low_stock_count","out_of_stock_count","chart_data","reverse","map","day","index","style","height","Math","max","title","cost","Date","date","toLocaleDateString","month","recent_sales","user_name","user_id","print_timestamp","toISOString","print_id","now","random","toString","substr","type","printText","sale_number","customer_name","total_amount","created_at","slice","product","_product$profit_margi","product__name","product__sku","total_sold","unit_symbol","total_revenue","display","gap","marginTop","justifyContent","disabled","onClose"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../services/api';\nimport { useDashboard, useTopProducts } from '../hooks/useDashboard';\nimport { useSale } from '../hooks/useSales';\nimport SaleDetailModal from '../components/SaleDetailModal';\nimport PrintButton from '../components/PrintButton';\nimport './Dashboard.css';\nimport {formatCurrency, formatDate, formatDateTime, getStatusBadge} from '../utils/helpers';\n\nconst Dashboard = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('daily');\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [showSaleModal, setShowSaleModal] = useState(false);\n  const [saleDetailLoading, setSaleDetailLoading] = useState(false);\n  const [topProductsVisibleCount, setTopProductsVisibleCount] = useState(10);\n  const [topProductsLoadedCount, setTopProductsLoadedCount] = useState(10); // Track how many products we've actually loaded\n  const [topProductsHasMore, setTopProductsHasMore] = useState(false);\n  const [loadingMoreProducts, setLoadingMoreProducts] = useState(false);\n  const [dashboardData, setDashboardData] = useState(null); // Local state for dashboard data with additional products\n\n  // Check if user is sales team (limited access)\n  const isSalesTeam = user?.role === 'sales';\n\n  // React Query hooks for data fetching with caching\n  const { data: dashboardDataFromQuery, isLoading: dashboardLoading, error: dashboardError, refetch: refetchDashboard } = useDashboard(selectedPeriod, isSalesTeam);\n  const { data: topProductsCheck } = useTopProducts(selectedPeriod, isSalesTeam, 10, 1);\n\n  // Update loading state\n  useEffect(() => {\n    setLoading(dashboardLoading);\n  }, [dashboardLoading]);\n\n  // Update error state\n  useEffect(() => {\n    if (dashboardError) {\n      setError(t('dashboard.failed_to_load'));\n    }\n  }, [dashboardError, t]);\n\n  // Update dashboardData from query\n  useEffect(() => {\n    if (dashboardDataFromQuery) {\n      setDashboardData(dashboardDataFromQuery);\n    }\n  }, [dashboardDataFromQuery]);\n\n  // Check if there are more products\n  useEffect(() => {\n    if (dashboardData?.top_products?.length === 10) {\n      setTopProductsHasMore(topProductsCheck?.has_more || topProductsCheck?.products?.length > 0 || false);\n    } else {\n      setTopProductsHasMore(false);\n    }\n  }, [dashboardData, topProductsCheck]);\n\n  // Reset top products visible count when dataset changes (period or role change)\n  useEffect(() => {\n    setTopProductsVisibleCount(10);\n    setTopProductsLoadedCount(10);\n  }, [selectedPeriod, isSalesTeam]);\n\n  const handlePeriodChange = (period) => {\n    // Only allow period changes for non-sales users\n    if (!isSalesTeam) {\n      setSelectedPeriod(period);\n    }\n  };\n\n  const handleSaleClick = (sale) => {\n    // Check if sale has an ID\n    const saleId = sale.id || sale.sale_id;\n    if (!saleId) {\n      setError(t('errors.not_found'));\n      return;\n    }\n    \n    setSelectedSale(sale);\n    setShowSaleModal(true);\n  };\n\n  // Fetch sale details using React Query when modal is shown\n  const saleId = selectedSale?.id || selectedSale?.sale_id;\n  const { data: saleDetails, isLoading: saleDetailsLoading } = useSale(saleId);\n  \n  useEffect(() => {\n    if (showSaleModal && saleId && saleDetails) {\n      setSelectedSale(saleDetails);\n    }\n    setSaleDetailLoading(saleDetailsLoading);\n  }, [showSaleModal, saleId, saleDetails, saleDetailsLoading]);\n\n  const handleCloseSaleModal = () => {\n    setShowSaleModal(false);\n    setSelectedSale(null);\n  };\n\n  const handleLoadMoreProducts = async () => {\n    try {\n      setLoadingMoreProducts(true);\n      const url = isSalesTeam \n        ? `/api/reports/top-products/?offset=${topProductsLoadedCount}&limit=10`\n        : `/api/reports/top-products/?period=${selectedPeriod}&offset=${topProductsLoadedCount}&limit=10`;\n      \n      const response = await api.get(url);\n      const newProducts = response.data.products;\n      \n      if (newProducts && newProducts.length > 0) {\n        // Append new products to existing list\n        setDashboardData(prev => ({\n          ...prev,\n          top_products: [...(prev.top_products || []), ...newProducts]\n        }));\n        const newLoadedCount = topProductsLoadedCount + newProducts.length;\n        setTopProductsLoadedCount(newLoadedCount);\n        setTopProductsVisibleCount(newLoadedCount);\n        setTopProductsHasMore(response.data.has_more);\n      } else {\n        setTopProductsHasMore(false);\n      }\n    } catch (err) {\n      console.error('Failed to load more products:', err);\n      setError(t('dashboard.failed_to_load_more_products'));\n    } finally {\n      setLoadingMoreProducts(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"dashboard-loading\">\n          <div className=\"spinner\"></div>\n          <span>{t('dashboard.loading')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"dashboard-error\">\n          <h2>{t('dashboard.error')}</h2>\n          <p>{error}</p>\n          <button onClick={() => refetchDashboard()}>{t('common.retry')}</button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard\">\n      <div className=\"dashboard-header\">\n        <div className=\"header-content\">\n          <div className=\"header-text\">\n            <h1>{t('dashboard.title')}</h1>\n            <p>{t('dashboard.welcome', { username: user?.username })}</p>\n            {isSalesTeam && (\n              <p className=\"role-indicator\">{t('dashboard.sales_team_view')}</p>\n            )}\n          </div>\n          {!isSalesTeam && (\n            <div className=\"period-selector\">\n              <label>{t('dashboard.time_period')}</label>\n              <select \n                value={selectedPeriod} \n                onChange={(e) => handlePeriodChange(e.target.value)}\n                className=\"period-select\"\n              >\n                <option value=\"daily\">{t('dashboard.daily')}</option>\n                <option value=\"weekly\">{t('dashboard.weekly')}</option>\n                <option value=\"monthly\">{t('dashboard.monthly')}</option>\n              </select>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"dashboard-grid\">\n        {/* Sales Summary Cards */}\n        <div className=\"metric-card\">\n          <div className=\"metric-icon sales\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>{t('dashboard.total_revenue')}</h3>\n            {!isSalesTeam && (\n              <p className=\"metric-value\">\n                  {formatCurrency(dashboardData?.sales?.total_sales)}\n              </p>\n            )}\n            {isSalesTeam && (\n              <p className=\"metric-value\">\n                  N/A\n              </p>\n            )}\n            <p className=\"metric-label\">\n              {dashboardData?.sales?.total_count || 0} {t('dashboard.transactions')}\n            </p>\n          </div>\n        </div>\n\n        {!isSalesTeam && (\n          <>\n            <div className=\"metric-card\">\n              <div className=\"metric-icon cost\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z\"/>\n                </svg>\n              </div>\n              <div className=\"metric-content\">\n                <h3>{t('dashboard.total_cost')}</h3>\n                <p className=\"metric-value\">\n                  {formatCurrency(dashboardData?.sales?.total_cost)}\n                </p>\n                <p className=\"metric-label\">\n                  {t('dashboard.cost_of_goods_sold')}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"metric-card\">\n              <div className=\"metric-icon profit\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z\"/>\n                </svg>\n              </div>\n              <div className=\"metric-content\">\n                <h3>{t('dashboard.profit')}</h3>\n                <p className=\"metric-value\">\n                  {formatCurrency(dashboardData?.sales?.profit)}\n                </p>\n                <p className=\"metric-label\">\n                  {dashboardData?.sales?.profit_margin?.toFixed(1) || '0.0'}% {t('dashboard.margin')}\n                </p>\n              </div>\n            </div>\n          </>\n        )}\n\n        <div className=\"metric-card\">\n          <div className=\"metric-icon inventory\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>{isSalesTeam ? t('dashboard.total_products') : t('dashboard.inventory_value')}</h3>\n            <p className=\"metric-value\">\n              {isSalesTeam \n                ? dashboardData?.inventory?.total_products || 0\n                : `${formatCurrency(dashboardData?.inventory?.total_inventory_value)}`\n              }\n            </p>\n            <p className=\"metric-label\">\n              {isSalesTeam \n                ? t('dashboard.available_products')\n                : `${dashboardData?.inventory?.total_products || 0} ${t('dashboard.products')}`\n              }\n            </p>\n          </div>\n        </div>\n\n        {!isSalesTeam && (\n          <div className=\"metric-card\">\n            <div className=\"metric-icon retail\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M7 4V2c0-.55-.45-1-1-1s-1 .45-1 1v2H3c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1H7zM21 4h-2V2c0-.55-.45-1-1-1s-1 .45-1 1v2h-2c-.55 0-1 .45-1 1s.45 1 1 1h2v2c0 .55.45 1 1 1s1-.45 1-1V6h2c.55 0 1-.45 1-1s-.45-1-1-1z\"/>\n              </svg>\n            </div>\n            <div className=\"metric-content\">\n              <h3>Retail Value</h3>\n              <p className=\"metric-value\">\n                {formatCurrency(dashboardData?.inventory?.total_retail_value)}\n              </p>\n              <p className=\"metric-label\">\n                {dashboardData?.inventory?.low_stock_count || 0} low stock\n              </p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"metric-card\">\n          <div className=\"metric-icon alert\">\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"/>\n            </svg>\n          </div>\n          <div className=\"metric-content\">\n            <h3>Out of Stock</h3>\n            <p className=\"metric-value\">\n              {dashboardData?.inventory?.out_of_stock_count || 0}\n            </p>\n            <p className=\"metric-label\">products need restocking</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Sales Chart - Only for Admin/Manager */}\n      {!isSalesTeam && (\n        <div className=\"dashboard-section\">\n          <h2>{t('dashboard.sales_trend')}</h2>\n          <div className=\"sales-chart\">\n            {dashboardData?.chart_data?.length > 0 ? (\n              <div className=\"chart-container\">\n                <div className=\"chart-bars\">\n                  {dashboardData.chart_data.reverse().map((day, index) => (\n                    <div key={index} className=\"chart-bar\">\n                      <div className=\"bar-group\">\n                        <div \n                          className=\"bar sales-bar\" \n                          style={{ height: `${Math.max(5, (day.sales / Math.max(...dashboardData.chart_data.map(d => d.sales))) * 100)}%` }}\n                          title={`${t('dashboard.sales')}: ${formatCurrency(day.sales)}`}\n                        ></div>\n                        <div \n                          className=\"bar cost-bar\" \n                          style={{ height: `${Math.max(5, (day.cost / Math.max(...dashboardData.chart_data.map(d => d.sales))) * 100)}%` }}\n                          title={`${t('dashboard.cost')}: ${formatCurrency(day.cost)}`}\n                        ></div>\n                      </div>\n                      <div className=\"bar-label\">\n                        {new Date(day.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\n                      </div>\n                      <div className=\"bar-values\">\n                        <div className=\"value sales\">{formatCurrency(day.sales)}</div>\n                        <div className=\"value cost\">{formatCurrency(day.cost)}</div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"chart-legend\">\n                  <div className=\"legend-item\">\n                    <div className=\"legend-color sales\"></div>\n                    <span>{t('dashboard.sales')}</span>\n                  </div>\n                  <div className=\"legend-item\">\n                    <div className=\"legend-color cost\"></div>\n                    <span>{t('dashboard.cost')}</span>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <p className=\"no-data\">{t('dashboard.no_sales_data')}</p>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Recent Sales */}\n      <div className=\"dashboard-section\">\n        <div className=\"section-header\">\n          <h2>{t('dashboard.recent_sales')}</h2>\n          {dashboardData?.recent_sales?.length > 0 && (\n            <PrintButton\n              data={{\n                ...dashboardData.recent_sales,\n                user_name: user?.username || t('app.unknown_user'),\n                user_id: user?.id || 'unknown',\n                print_timestamp: new Date().toISOString(),\n                print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n              }}\n              title={t('titles.sales_management_report')}\n              type=\"sales_history\"\n              printText={t('buttons.print_sales_report')}\n              className=\"print-recent-sales-btn\"\n            />\n          )}\n        </div>\n        <div className=\"recent-sales\">\n          {dashboardData?.recent_sales?.length > 0 ? (\n            <div className=\"sales-list\">\n              {dashboardData.recent_sales.map((sale, index) => (\n                <div \n                  key={index} \n                  className=\"sale-item clickable\"\n                  onClick={() => handleSaleClick(sale)}\n                  title={t('dashboard.click_to_view_details')}\n                >\n                  <div className=\"sale-info\">\n                    <h4>{sale.sale_number}</h4>\n                    <p>{sale.customer_name || t('dashboard.walk_in_customer')}</p>\n                  </div>\n                  <div className=\"sale-amount\">\n                    <span>{formatCurrency(sale.total_amount)}</span>\n                    <small>{new Date(sale.created_at).toLocaleDateString()}</small>\n                  </div>\n                  <div className=\"sale-arrow\">\n                    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                      <path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"/>\n                    </svg>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"no-data\">No recent sales</p>\n          )}\n        </div>\n      </div>\n\n      {/* Top Products */}\n      <div className=\"dashboard-section\">\n        <h2>{t('dashboard.top_selling_products')}</h2>\n        <div className=\"top-products\">\n          {dashboardData?.top_products?.length > 0 ? (\n            <div className=\"products-list\">\n              {dashboardData.top_products.slice(0, topProductsVisibleCount).map((product, index) => (\n                <div key={index} className=\"product-item\">\n                  <div className=\"product-info\">\n                    <h4>{product.product__name}</h4>\n                    <p>{product.product__sku}</p>\n                  </div>\n                  <div className=\"product-stats\">\n                    <div className=\"stat-row\">\n                      <span className=\"stat-label\">{t('dashboard.sold')}:</span>\n                      <span className=\"stat-value\">{product.total_sold} {product.unit_symbol || 'piece'}</span>\n                    </div>\n                    <div className=\"stat-row\">\n                      <span className=\"stat-label\">{t('dashboard.revenue')}:</span>\n                      <span className=\"stat-value\">{formatCurrency(product.total_revenue)}</span>\n                    </div>\n                    {!isSalesTeam && (\n                      <>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.cost')}:</span>\n                          <span className=\"stat-value\">{formatCurrency(product.total_cost)}</span>\n                        </div>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.profit')}:</span>\n                          <span className=\"stat-value profit\">{formatCurrency(product.profit)}</span>\n                        </div>\n                        <div className=\"stat-row\">\n                          <span className=\"stat-label\">{t('dashboard.margin')}:</span>\n                          <span className=\"stat-value margin\">{product.profit_margin?.toFixed(1) || '0.0'}%</span>\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ))}\n              <div style={{ display: 'flex', gap: '0.5rem', marginTop: '0.5rem', justifyContent: 'center' }}>\n                {topProductsHasMore && (\n                  <button\n                    type=\"button\"\n                    className=\"print-recent-sales-btn\"\n                    onClick={handleLoadMoreProducts}\n                    disabled={loadingMoreProducts}\n                  >\n                    {loadingMoreProducts ? (t('dashboard.loading') || 'Loading...') : (t('dashboard.show_more') || 'Show More')}\n                  </button>\n                )}\n                {topProductsVisibleCount > 10 && (\n                  <button\n                    type=\"button\"\n                    className=\"print-recent-sales-btn\"\n                    onClick={() => {\n                      setTopProductsVisibleCount(10);\n                      // Check if we have more products loaded than we're showing\n                      setTopProductsHasMore(topProductsLoadedCount > 10 || dashboardData.top_products.length > 10);\n                    }}\n                  >\n                    {t('dashboard.show_less') || 'Show Less'}\n                  </button>\n                )}\n              </div>\n            </div>\n          ) : (\n            <p className=\"no-data\">No sales data available</p>\n          )}\n        </div>\n      </div>\n\n      {/* Sale Detail Modal */}\n      {showSaleModal && (\n        <SaleDetailModal\n          sale={selectedSale}\n          onClose={handleCloseSaleModal}\n          loading={saleDetailLoading}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}