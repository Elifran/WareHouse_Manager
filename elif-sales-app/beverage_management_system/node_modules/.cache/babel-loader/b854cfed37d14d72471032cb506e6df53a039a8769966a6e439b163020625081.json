{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useTranslation}from'react-i18next';import api from'../services/api';import{useAuth}from'../contexts/AuthContext';import Table from'../components/Table';import Button from'../components/Button';import PrintButton from'../components/PrintButton';import'./SalesManagement.css';import SaleDetailModal from'../components/SaleDetailModal';import{formatCurrency}from'../utils/helpers';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SalesManagement=()=>{const{t}=useTranslation();const{user}=useAuth();const[sales,setSales]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[showDeleteModal,setShowDeleteModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[showPaymentModal,setShowPaymentModal]=useState(false);const[selectedSale,setSelectedSale]=useState(null);const[loadingSale,setLoadingSale]=useState(false);const[showSaleModal,setShowSaleModal]=useState(false);const[saleDetailLoading,setSaleDetailLoading]=useState(false);// Pagination state\nconst[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(1);const[totalCount,setTotalCount]=useState(0);const ITEMS_PER_PAGE=20;const[deleteFilters,setDeleteFilters]=useState({customer_name:'',start_date:'',end_date:'',status:'completed'});const[editFormData,setEditFormData]=useState({items:[],payment_type:'full',paid_amount:0});const[products,setProducts]=useState([]);// const [filters, setFilters] = useState({\n//   status: '',\n//   customer_name: '',\n//   start_date: '',\n//   end_date: '',\n//   sale_number: '',\n//   payment_status: '' // Added payment status filter\n// });\nconst getTodayDate=()=>{const today=new Date();return today.toISOString().split('T')[0];};// Update your filters state initialization\nconst[filters,setFilters]=useState({status:'',customer_name:'',start_date:getTodayDate(),// Set today's date as default\nend_date:getTodayDate(),// Set today's date as default\nsale_number:'',payment_status:''});const fetchSales=useCallback(async function(){let page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;let filterParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{setLoading(true);setError('');const params=new URLSearchParams();// Pagination params\nparams.append('page',page.toString());params.append('page_size',ITEMS_PER_PAGE.toString());// Filter params\nif(filterParams.status)params.append('status',filterParams.status);if(filterParams.customer_name)params.append('search',filterParams.customer_name);if(filterParams.start_date)params.append('created_at__date__gte',filterParams.start_date);if(filterParams.end_date)params.append('created_at__date__lte',filterParams.end_date);if(filterParams.sale_number)params.append('sale_number',filterParams.sale_number);if(filterParams.payment_status)params.append('payment_status',filterParams.payment_status);// Added payment status filter\nconst response=await api.get(\"/api/sales/?\".concat(params.toString()));const salesData=response.data.results||response.data;// Ensure salesData is always an array\nif(!Array.isArray(salesData)){console.error('Sales data is not an array:',salesData);setSales([]);return;}setSales(salesData);// Set pagination info\nif(response.data.count!==undefined){setTotalCount(response.data.count);setTotalPages(Math.ceil(response.data.count/ITEMS_PER_PAGE));}else{// Fallback if pagination info not available\nsetTotalCount(salesData.length);setTotalPages(1);}setCurrentPage(page);}catch(err){var _err$response,_err$response$data;setError('Failed to fetch sales: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||err.message));console.error('Sales fetch error:',err);}finally{setLoading(false);}},[]);useEffect(()=>{fetchSales(1,filters);fetchProducts();},[fetchSales]);const fetchProducts=async()=>{try{const response=await api.get('/api/products/?is_active=true');setProducts(response.data.results||response.data);}catch(err){console.error('Products fetch error:',err);}};// Navigation handlers\nconst goToNextPage=()=>{if(currentPage<totalPages){const nextPage=currentPage+1;fetchSales(nextPage,filters);}};const goToPrevPage=()=>{if(currentPage>1){const prevPage=currentPage-1;fetchSales(prevPage,filters);}};const goToPage=page=>{if(page>=1&&page<=totalPages){fetchSales(page,filters);}};const handleDeleteSales=async()=>{try{setError('');const response=await api.delete('/api/sales/delete/',{data:deleteFilters});alert(\"Successfully deleted \".concat(response.data.deleted_count,\" sales\"));setShowDeleteModal(false);setDeleteFilters({customer_name:'',start_date:'',end_date:'',status:'completed'});fetchSales(currentPage,filters);fetchProducts();// Refresh products to update stock quantities\n}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to delete sales');console.error('Delete sales error:',err);}};const handleEditSale=async()=>{try{setError('');// Prepare the data to send\nconst updateData={items:editFormData.items,paid_amount:editFormData.paid_amount};await api.put(\"/api/sales/\".concat(selectedSale.id,\"/edit/\"),updateData);alert('Sale updated successfully');setShowEditModal(false);setSelectedSale(null);setEditFormData({items:[],payment_type:'full',paid_amount:0});fetchSales(currentPage,filters);fetchProducts();// Refresh products to update stock quantities\n}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.error)||'Failed to update sale');console.error('Edit sale error:',err);}};const handleMakePayment=async(saleId,paymentAmount)=>{try{setError('');await api.post(\"/api/sales/\".concat(saleId,\"/payment/\"),{payment_amount:paymentAmount,is_full_payment:true});alert('Payment processed successfully');setShowPaymentModal(false);fetchSales(currentPage,filters);}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.error)||'Failed to process payment');console.error('Payment error:',err);}};const handleFilterChange=e=>{const{name,value}=e.target;setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleDeleteFilterChange=e=>{const{name,value}=e.target;setDeleteFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const applyFilters=()=>{setCurrentPage(1);fetchSales(1,filters);};const clearFilters=()=>{setFilters({status:'',customer_name:'',start_date:'',end_date:'',sale_number:'',payment_status:''// Reset payment status filter\n});setCurrentPage(1);fetchSales(1,{});};const openEditModal=async sale=>{try{setLoadingSale(true);setError('');// Fetch full sale data including items\nconst response=await api.get(\"/api/sales/\".concat(sale.id,\"/\"));const fullSale=response.data;setSelectedSale(fullSale);setEditFormData({items:fullSale.items.map(item=>{var _item$unit;return{product:item.product,quantity:item.quantity,unit:((_item$unit=item.unit)===null||_item$unit===void 0?void 0:_item$unit.id)||item.unit||'',unit_price:item.unit_price,price_mode:item.price_mode||'standard'};}),payment_type:fullSale.payment_status==='paid'?'full':fullSale.payment_status==='partial'?'partial':'full',paid_amount:fullSale.paid_amount||0});setShowEditModal(true);}catch(err){setError('Failed to load sale details');console.error('Sale fetch error:',err);}finally{setLoadingSale(false);}};const cancelSale=async saleId=>{try{setError('');const response=await api.post(\"/api/sales/\".concat(saleId,\"/cancel/\"));if(response.data.message==='Sale cancelled and stock restored'){// Show refund information for completed sales\nif(response.data.refund_amount&&response.data.refund_amount>0){alert(\"Sale cancelled and stock restored successfully!\\n\\nRefund Information:\\nOriginal Sale: \".concat(response.data.original_sale_number,\"\\nRefund Amount: $\").concat(response.data.refund_amount.toFixed(2),\"\\n\\nPlease process the refund to the customer.\"));}else{alert('Sale cancelled and stock restored successfully');}}else{alert('Sale cancelled successfully');}fetchSales(currentPage,filters);fetchProducts();// Refresh products to update stock quantities\n}catch(err){var _err$response5,_err$response5$data;setError(((_err$response5=err.response)===null||_err$response5===void 0?void 0:(_err$response5$data=_err$response5.data)===null||_err$response5$data===void 0?void 0:_err$response5$data.error)||'Failed to cancel sale');console.error('Cancel sale error:',err);}};const createReturn=async sale=>{try{setError('');// Prepare return data\nconst returnData={sale_type:'return',original_sale:sale.id,customer_name:sale.customer_name||'',customer_phone:sale.customer_phone||'',customer_email:sale.customer_email||'',notes:\"Return for sale \".concat(sale.sale_number),items:sale.items.map(item=>({product:item.product,quantity:item.quantity,unit:item.unit,unit_price:item.unit_price,price_mode:item.price_mode||'standard',original_sale_item:item.id}))};const response=await api.post('/api/sales/',returnData);alert(\"Return created successfully: \".concat(response.data.sale_number,\". Stock has been restored.\"));// Refresh the sales list and products\nfetchSales(currentPage,filters);fetchProducts();}catch(err){var _err$response6,_err$response6$data;setError(((_err$response6=err.response)===null||_err$response6===void 0?void 0:(_err$response6$data=_err$response6.data)===null||_err$response6$data===void 0?void 0:_err$response6$data.error)||'Failed to create return');console.error('Create return error:',err);}};const handlePaymentMethodChange=async(saleId,newPaymentMethod)=>{try{setError('');await api.patch(\"/sales/\".concat(saleId,\"/payment-method/\"),{payment_method:newPaymentMethod});// Update the local state to reflect the change immediately\nsetSales(prevSales=>prevSales.map(sale=>sale.id===saleId?_objectSpread(_objectSpread({},sale),{},{payment_method:newPaymentMethod}):sale));}catch(err){var _err$response7,_err$response7$data;setError(((_err$response7=err.response)===null||_err$response7===void 0?void 0:(_err$response7$data=_err$response7.data)===null||_err$response7$data===void 0?void 0:_err$response7$data.error)||'Failed to update payment method');console.error('Payment method update error:',err);}};const addEditItem=()=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:[...prev.items,{product:'',quantity:1,unit:'',unit_price:0}]}));};const removeEditItem=index=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:prev.items.filter((_,i)=>i!==index)}));};const updateEditItem=(index,field,value)=>{setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{items:prev.items.map((item,i)=>i===index?_objectSpread(_objectSpread({},item),{},{[field]:value}):item)}));};const validateEditSale=()=>{// Require at least 1 item for all sales (including returns)\nif(!editFormData.items||editFormData.items.length===0){return false;}// Check if any item has invalid quantity (allow quantity = 0)\nfor(const item of editFormData.items){var _selectedSale$items;const quantity=parseFloat(item.quantity);if(isNaN(quantity)||quantity<0){return false;}// Find the corresponding original item to check stock availability\nconst originalItem=selectedSale===null||selectedSale===void 0?void 0:(_selectedSale$items=selectedSale.items)===null||_selectedSale$items===void 0?void 0:_selectedSale$items.find(original=>original.product===item.product&&original.unit===item.unit&&original.price_mode===item.price_mode);if(originalItem){// Calculate the quantity difference\nconst originalQuantity=parseFloat(originalItem.quantity);const quantityDiff=quantity-originalQuantity;// If increasing quantity, check stock availability\nif(quantityDiff>0){// Find the product to get current stock\nconst product=products.find(p=>p.id===parseInt(item.product));if(product){// Convert quantity difference to base units for stock check\n// This is a simplified check - in a real scenario, you'd need proper unit conversion\nconst stockNeeded=quantityDiff;if(product.stock_quantity<stockNeeded){return false;}}}}}// Validate payment logic\nif(editFormData.payment_type==='partial'){const total=calculateEditTotal();const paidAmount=parseFloat(editFormData.paid_amount)||0;// For partial payment, paid amount must be less than total and greater than 0\nif(paidAmount>=total||paidAmount<=0){return false;}}else if(editFormData.payment_type==='full'){const total=calculateEditTotal();const paidAmount=parseFloat(editFormData.paid_amount)||0;// For full payment, paid amount must equal total\nif(paidAmount!==total){return false;}}return true;};const getProductPrice=productId=>{const product=products.find(p=>p.id===parseInt(productId));return product?product.price:0;};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getStatusBadge=status=>{const statusClasses={pending:'status-pending',completed:'status-completed',cancelled:'status-cancelled',returned:'status-returned',refunded:'status-refunded'};return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusClasses[status]||''),children:status});};const getPaymentStatusBadge=paymentStatus=>{const paymentClasses={pending:'payment-pending',partial:'payment-partial',paid:'payment-paid'};const paymentLabels={pending:'Unpaid',partial:'Partial',paid:'Paid'};return/*#__PURE__*/_jsx(\"span\",{className:\"payment-badge \".concat(paymentClasses[paymentStatus]||''),children:paymentLabels[paymentStatus]||paymentStatus});};const calculateEditTotal=()=>{return editFormData.items.reduce((total,item)=>{return total+parseFloat(item.unit_price||0)*parseFloat(item.quantity||0);},0);};// Update paid_amount when payment_type changes\nuseEffect(()=>{if(editFormData.payment_type==='full'){setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{paid_amount:calculateEditTotal()}));}},[editFormData.payment_type,editFormData.items]);// Sales app - all authenticated users can access sales management\nconst handleSaleClick=async sale=>{try{setSaleDetailLoading(true);setShowSaleModal(true);// Check if sale has an ID\nconst saleId=sale.id||sale.sale_id;if(!saleId){throw new Error(t('errors.not_found'));}// Fetch detailed sale information\nconst response=await api.get(\"/api/sales/\".concat(saleId,\"/\"));setSelectedSale(response.data);}catch(err){console.error('Failed to fetch sale details:',err);setError(\"Failed to load sale details: \".concat(err.message));setShowSaleModal(false);}finally{setSaleDetailLoading(false);}};const handleCloseSaleModal=()=>{setShowSaleModal(false);setSelectedSale(null);};// Generate page numbers for pagination\nconst getPageNumbers=()=>{const pages=[];const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);if(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}for(let i=startPage;i<=endPage;i++){pages.push(i);}return pages;};return/*#__PURE__*/_jsxs(\"div\",{className:\"sales-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('titles.sales_management')}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(PrintButton,{data:_objectSpread(_objectSpread({},sales),{},{user_name:(user===null||user===void 0?void 0:user.username)||t('app.unknown_user'),user_id:(user===null||user===void 0?void 0:user.id)||'unknown',print_timestamp:new Date().toISOString(),print_id:\"PRINT-\".concat(Date.now(),\"-\").concat(Math.random().toString(36).substr(2,9))}),title:t('titles.sales_management_report'),type:\"sales_history\",printText:t('buttons.print_sales_report'),className:\"print-sales-report-btn\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>setShowDeleteModal(true),children:\"Delete Sales\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(''),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sale Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"sale_number\",value:filters.sale_number,onChange:handleFilterChange,placeholder:\"Enter sale number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:filters.status,onChange:handleFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"returned\",children:\"Returned\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"payment_status\",value:filters.payment_status,onChange:handleFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Payment Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Unpaid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"partial\",children:\"Partial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"Paid\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",value:filters.customer_name,onChange:handleFilterChange,placeholder:t('forms.search_by_customer_name')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:filters.start_date,onChange:handleFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:filters.end_date,onChange:handleFilterChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:clearFilters,children:\"Clear Filters\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:applyFilters,children:\"Apply Filters\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-info-top\",children:[\"Showing \",sales.length,\" of \",totalCount,\" sales (Page \",currentPage,\" of \",totalPages,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-section\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading sales...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToPrevPage,disabled:currentPage===1,children:t('buttons.previous')}),getPageNumbers().map(page=>/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination \".concat(currentPage===page?'active':''),onClick:()=>goToPage(page),children:page},page)),/*#__PURE__*/_jsxs(\"span\",{className:\"pagination-info\",children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToNextPage,disabled:currentPage===totalPages,children:t('buttons.next')})]}),/*#__PURE__*/_jsx(Table,{data:sales,columns:[{key:'sale_number',header:t('table_headers.sale_number'),render:(value,row)=>/*#__PURE__*/_jsx(\"span\",{className:\"sale-number clickable\",onClick:()=>handleSaleClick(row),children:value})},{key:'customer_name',header:t('table_headers.customer'),render:value=>value||'N/A'},{key:'status',header:t('table_headers.status'),render:value=>/*#__PURE__*/_jsx(\"div\",{className:\"status-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"sale-status\",children:getStatusBadge(value)})})},{key:'payment_status',header:t('table_headers.payment'),render:value=>{const paymentClasses={pending:'payment-pending',partial:'payment-partial',paid:'payment-paid'};const paymentLabels={pending:t('status_labels.pending'),partial:t('status_labels.partial'),paid:t('status_labels.paid')};return/*#__PURE__*/_jsx(\"span\",{className:\"payment-badge \".concat(paymentClasses[value]||''),children:paymentLabels[value]||value});}},{key:'items',header:t('table_headers.items'),render:items=>{if(!items||items.length===0)return/*#__PURE__*/_jsx(\"span\",{className:\"no-items\",children:\"No items\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"sale-items\",children:[items.slice(0,2).map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"sale-item-row\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-name\",children:[item.product_name,/*#__PURE__*/_jsx(\"span\",{className:\"price-mode-badge \".concat(item.price_mode||'standard'),children:item.price_mode==='wholesale'?'WS':'STD'})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"item-details\",children:[item.quantity_display||item.quantity,' ',item.unit_symbol||'pcs',\" \\xD7 \",formatCurrency(item.unit_price)]})]},index)),items.length>2&&/*#__PURE__*/_jsxs(\"div\",{className:\"more-items\",children:[\"+\",items.length-2,\" more items\"]})]});}},{key:'total_amount',header:t('table_headers.total_amount'),render:value=>/*#__PURE__*/_jsx(\"div\",{className:\"amount-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"total-amount\",children:formatCurrency(value)})})},{key:'created_at',header:t('table_headers.date'),render:value=>formatDate(value)},{key:'sold_by_name',header:t('table_headers.sold_by'),render:value=>value||'N/A'},{key:'payment_method',header:t('table_headers.payment_method'),render:(value,row)=>{if(row.status==='pending'){return/*#__PURE__*/_jsxs(\"select\",{value:value||'cash',onChange:e=>handlePaymentMethodChange(row.id,e.target.value),className:\"payment-method-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"card\",children:\"Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mobile_money\",children:\"Mobile Money\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bank_transfer\",children:\"Bank Transfer\"})]});}const methodLabels={cash:t('payment_methods.cash'),card:t('payment_methods.card'),mobile_money:t('payment_methods.mobile_money'),bank_transfer:t('payment_methods.bank_transfer')};return/*#__PURE__*/_jsx(\"span\",{className:\"payment-method-display\",children:methodLabels[value]||value||'Cash'});}},{key:'paid_amount',header:t('table_headers.paid_amount'),render:value=>/*#__PURE__*/_jsx(\"div\",{className:\"payment-amount-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"paid-amount\",children:formatCurrency(parseFloat(value)||0)})})},{key:'actions',header:t('table_headers.actions'),render:(_,row)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",onClick:e=>e.stopPropagation(),children:[!(row.status==='completed'&&row.payment_status==='paid')&&row.status!=='refunded'&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"small\",onClick:()=>openEditModal(row),loading:loadingSale,disabled:loadingSale,children:\"Edit\"}),row.status==='completed'&&row.status!=='refunded'&&row.sale_type!=='return'&&/*#__PURE__*/_jsx(Button,{variant:\"warning\",size:\"small\",onClick:()=>{if(window.confirm(\"Are you sure you want to create a return for this sale? This will restore stock and mark the sale as refunded.\")){createReturn(row);}},loading:loadingSale,disabled:loadingSale,children:\"Return\"}),(row.status==='pending'||row.status==='completed')&&row.status!=='refunded'&&row.sale_type!=='return'&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"small\",onClick:()=>{if(window.confirm(\"Are you sure you want to cancel this \".concat(row.status,\" sale?\"))){cancelSale(row.id);}},children:\"Cancel\"})]})}],onRowClick:row=>handleSaleClick(row)}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToPrevPage,disabled:currentPage===1,children:t('buttons.previous')}),getPageNumbers().map(page=>/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination \".concat(currentPage===page?'active':''),onClick:()=>goToPage(page),children:page},page)),/*#__PURE__*/_jsxs(\"span\",{className:\"pagination-info\",children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-pagination\",onClick:goToNextPage,disabled:currentPage===totalPages,children:t('buttons.next')})]})]})}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Delete Sales\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowDeleteModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Select criteria to delete sales:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer Name (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"customer_name\",value:deleteFilters.customer_name,onChange:handleDeleteFilterChange,placeholder:t('forms.leave_empty_to_delete_all')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:deleteFilters.start_date,onChange:handleDeleteFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:deleteFilters.end_date,onChange:handleDeleteFilterChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:deleteFilters.status,onChange:handleDeleteFilterChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"}),/*#__PURE__*/_jsx(\"option\",{value:\"returned\",children:\"Returned\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowDeleteModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:handleDeleteSales,children:\"Delete Sales\"})]})]})]})}),showEditModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'?t('modals.view_sale'):t('modals.edit_sale'),\": \",(selectedSale===null||selectedSale===void 0?void 0:selectedSale.sale_number)||t('app.loading'),(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'&&/*#__PURE__*/_jsx(\"span\",{className:\"view-only-badge\",children:t('modals.view_only')})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowEditModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:loadingSale?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading sale details...\"}):selectedSale?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"edit-sale-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",selectedSale.customer_name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",formatDate(selectedSale.created_at)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",getStatusBadge(selectedSale.status)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Payment Status:\"}),\" \",getPaymentStatusBadge(selectedSale.payment_status)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" $\",selectedSale.total_amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paid Amount:\"}),\" $\",selectedSale.paid_amount]}),selectedSale.payment_status==='partial'&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Remaining Amount:\"}),\" $\",selectedSale.remaining_amount]}),selectedSale.due_date&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Due Date:\"}),\" \",formatDate(selectedSale.due_date)]})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"Sale Items\"}),/*#__PURE__*/_jsx(\"div\",{className:\"edit-items\",children:editFormData.items.map((item,index)=>{var _selectedSale$items2;const originalItem=selectedSale===null||selectedSale===void 0?void 0:(_selectedSale$items2=selectedSale.items)===null||_selectedSale$items2===void 0?void 0:_selectedSale$items2.find(origItem=>origItem.product===item.product&&origItem.unit===item.unit&&origItem.price_mode===item.price_mode);return/*#__PURE__*/_jsxs(\"div\",{className:\"edit-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:(originalItem===null||originalItem===void 0?void 0:originalItem.product_name)||t('app.unknown_product'),readOnly:true,className:\"readonly-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:originalItem!==null&&originalItem!==void 0&&originalItem.unit_name?\"\".concat(originalItem.unit_name,\" (\").concat(originalItem.unit_symbol,\")\"):'N/A',readOnly:true,className:\"readonly-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price Mode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.price_mode==='wholesale'?'Wholesale (WS)':'Standard (STD)',readOnly:true,className:\"readonly-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatCurrency(item.unit_price),readOnly:true,className:\"readonly-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:item.quantity,onChange:e=>updateEditItem(index,'quantity',parseFloat(e.target.value)||0),readOnly:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid',className:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'?'read-only-input':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formatCurrency(item.quantity*item.unit_price),readOnly:true,className:\"readonly-field\"})]}),!((selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid')&&/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"small\",onClick:()=>removeEditItem(index),children:\"Remove\"})]},index);})}),!((selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Payment Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-types\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"editPaymentType\",value:\"full\",checked:editFormData.payment_type==='full',onChange:e=>setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{payment_type:e.target.value,paid_amount:e.target.value==='full'?calculateEditTotal():prev.paid_amount})),disabled:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'}),/*#__PURE__*/_jsx(\"span\",{children:\"Full Payment (100%)\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"editPaymentType\",value:\"partial\",checked:editFormData.payment_type==='partial',onChange:e=>setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{payment_type:e.target.value})),disabled:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'}),/*#__PURE__*/_jsx(\"span\",{children:\"Partial Payment (0-99.99%)\"})]})]})]}),editFormData.payment_type==='partial'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount to Pay\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",max:calculateEditTotal(),value:editFormData.paid_amount||0,onChange:e=>{const value=parseFloat(e.target.value)||0;setEditFormData(prev=>_objectSpread(_objectSpread({},prev),{},{paid_amount:value}));},placeholder:t('forms.enter_amount_to_pay'),readOnly:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid',className:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'?'read-only-input':''}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Total: $\",calculateEditTotal().toFixed(2),\" | Remaining: $\",(calculateEditTotal()-(editFormData.paid_amount||0)).toFixed(2)]})]}),editFormData.payment_type==='full'&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount to Pay\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:calculateEditTotal(),readOnly:true,className:\"form-control\"}),/*#__PURE__*/_jsx(\"small\",{children:\"Full payment for the total amount.\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowEditModal(false),children:(selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid'?t('modals.close'):t('modals.cancel')}),!((selectedSale===null||selectedSale===void 0?void 0:selectedSale.status)==='completed'&&(selectedSale===null||selectedSale===void 0?void 0:selectedSale.payment_status)==='paid')&&/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:handleEditSale,disabled:!validateEditSale(),children:\"Update Sale\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Failed to load sale details\"})})]})}),showPaymentModal&&selectedSale&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Make Payment - \",selectedSale.sale_number]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>setShowPaymentModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",selectedSale.customer_name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" $\",selectedSale.total_amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paid Amount:\"}),\" $\",selectedSale.paid_amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Remaining Amount:\"}),\" $\",selectedSale.remaining_amount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Amount (Full Payment Only)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",value:selectedSale.remaining_amount,readOnly:true,className:\"form-control\"}),/*#__PURE__*/_jsx(\"small\",{children:\"This will be a full payment for the remaining amount.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowPaymentModal(false),children:\"Cancel\"}),/*#__PURE__*/_jsxs(Button,{variant:\"success\",onClick:()=>handleMakePayment(selectedSale.id,selectedSale.remaining_amount),children:[\"Process Payment ($\",selectedSale.remaining_amount,\")\"]})]})]})]})}),showSaleModal&&/*#__PURE__*/_jsx(SaleDetailModal,{sale:selectedSale,onClose:handleCloseSaleModal,loading:saleDetailLoading})]});};export default SalesManagement;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useTranslation","api","useAuth","Table","Button","PrintButton","SaleDetailModal","formatCurrency","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SalesManagement","t","user","sales","setSales","loading","setLoading","error","setError","showDeleteModal","setShowDeleteModal","showEditModal","setShowEditModal","showPaymentModal","setShowPaymentModal","selectedSale","setSelectedSale","loadingSale","setLoadingSale","showSaleModal","setShowSaleModal","saleDetailLoading","setSaleDetailLoading","currentPage","setCurrentPage","totalPages","setTotalPages","totalCount","setTotalCount","ITEMS_PER_PAGE","deleteFilters","setDeleteFilters","customer_name","start_date","end_date","status","editFormData","setEditFormData","items","payment_type","paid_amount","products","setProducts","getTodayDate","today","Date","toISOString","split","filters","setFilters","sale_number","payment_status","fetchSales","page","arguments","length","undefined","filterParams","params","URLSearchParams","append","toString","response","get","concat","salesData","data","results","Array","isArray","console","count","Math","ceil","err","_err$response","_err$response$data","message","fetchProducts","goToNextPage","nextPage","goToPrevPage","prevPage","goToPage","handleDeleteSales","delete","alert","deleted_count","_err$response2","_err$response2$data","handleEditSale","updateData","put","id","_err$response3","_err$response3$data","handleMakePayment","saleId","paymentAmount","post","payment_amount","is_full_payment","_err$response4","_err$response4$data","handleFilterChange","e","name","value","target","prev","_objectSpread","handleDeleteFilterChange","applyFilters","clearFilters","openEditModal","sale","fullSale","map","item","_item$unit","product","quantity","unit","unit_price","price_mode","cancelSale","refund_amount","original_sale_number","toFixed","_err$response5","_err$response5$data","createReturn","returnData","sale_type","original_sale","customer_phone","customer_email","notes","original_sale_item","_err$response6","_err$response6$data","handlePaymentMethodChange","newPaymentMethod","patch","payment_method","prevSales","_err$response7","_err$response7$data","addEditItem","removeEditItem","index","filter","_","i","updateEditItem","field","validateEditSale","_selectedSale$items","parseFloat","isNaN","originalItem","find","original","originalQuantity","quantityDiff","p","parseInt","stockNeeded","stock_quantity","total","calculateEditTotal","paidAmount","getProductPrice","productId","price","formatDate","dateString","toLocaleDateString","getStatusBadge","statusClasses","pending","completed","cancelled","returned","refunded","className","children","getPaymentStatusBadge","paymentStatus","paymentClasses","partial","paid","paymentLabels","reduce","handleSaleClick","sale_id","Error","handleCloseSaleModal","getPageNumbers","pages","maxVisiblePages","startPage","max","floor","endPage","min","push","user_name","username","user_id","print_timestamp","print_id","now","random","substr","title","type","printText","variant","onClick","onChange","placeholder","disabled","columns","key","header","render","row","slice","product_name","quantity_display","unit_symbol","methodLabels","cash","card","mobile_money","bank_transfer","stopPropagation","size","window","confirm","onRowClick","created_at","total_amount","remaining_amount","due_date","_selectedSale$items2","origItem","readOnly","unit_name","checked","step","onClose"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/pages/SalesManagement.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport api from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport Table from '../components/Table';\nimport Button from '../components/Button';\nimport PrintButton from '../components/PrintButton';\nimport './SalesManagement.css';\nimport SaleDetailModal from '../components/SaleDetailModal';\nimport {formatCurrency} from '../utils/helpers';\n\nconst SalesManagement = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\n  const [selectedSale, setSelectedSale] = useState(null);\n  const [loadingSale, setLoadingSale] = useState(false);\n  const [showSaleModal, setShowSaleModal] = useState(false);\n  const [saleDetailLoading, setSaleDetailLoading] = useState(false);\n\n  // Pagination state\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalCount, setTotalCount] = useState(0);\n  const ITEMS_PER_PAGE = 20;\n\n  const [deleteFilters, setDeleteFilters] = useState({\n    customer_name: '',\n    start_date: '',\n    end_date: '',\n    status: 'completed'\n  });\n  const [editFormData, setEditFormData] = useState({\n    items: [],\n    payment_type: 'full',\n    paid_amount: 0\n  });\n  const [products, setProducts] = useState([]);\n  // const [filters, setFilters] = useState({\n  //   status: '',\n  //   customer_name: '',\n  //   start_date: '',\n  //   end_date: '',\n  //   sale_number: '',\n  //   payment_status: '' // Added payment status filter\n  // });\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  // Update your filters state initialization\n  const [filters, setFilters] = useState({\n    status: '',\n    customer_name: '',\n    start_date: getTodayDate(), // Set today's date as default\n    end_date: getTodayDate(),   // Set today's date as default\n    sale_number: '',\n    payment_status: ''\n  });\n\n  const fetchSales = useCallback(async (page = 1, filterParams = {}) => {\n    try {\n      setLoading(true);\n      setError('');\n      const params = new URLSearchParams();\n      \n      // Pagination params\n      params.append('page', page.toString());\n      params.append('page_size', ITEMS_PER_PAGE.toString());\n      \n      // Filter params\n      if (filterParams.status) params.append('status', filterParams.status);\n      if (filterParams.customer_name) params.append('search', filterParams.customer_name);\n      if (filterParams.start_date) params.append('created_at__date__gte', filterParams.start_date);\n      if (filterParams.end_date) params.append('created_at__date__lte', filterParams.end_date);\n      if (filterParams.sale_number) params.append('sale_number', filterParams.sale_number);\n      if (filterParams.payment_status) params.append('payment_status', filterParams.payment_status); // Added payment status filter\n      \n      const response = await api.get(`/api/sales/?${params.toString()}`);\n      const salesData = response.data.results || response.data;\n      \n      // Ensure salesData is always an array\n      if (!Array.isArray(salesData)) {\n        console.error('Sales data is not an array:', salesData);\n        setSales([]);\n        return;\n      }\n      \n      setSales(salesData);\n      \n      // Set pagination info\n      if (response.data.count !== undefined) {\n        setTotalCount(response.data.count);\n        setTotalPages(Math.ceil(response.data.count / ITEMS_PER_PAGE));\n      } else {\n        // Fallback if pagination info not available\n        setTotalCount(salesData.length);\n        setTotalPages(1);\n      }\n      \n      setCurrentPage(page);\n    } catch (err) {\n      setError('Failed to fetch sales: ' + (err.response?.data?.error || err.message));\n      console.error('Sales fetch error:', err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchSales(1, filters);\n    fetchProducts();\n  }, [fetchSales]);\n\n  const fetchProducts = async () => {\n    try {\n      const response = await api.get('/api/products/?is_active=true');\n      setProducts(response.data.results || response.data);\n    } catch (err) {\n      console.error('Products fetch error:', err);\n    }\n  };\n\n  // Navigation handlers\n  const goToNextPage = () => {\n    if (currentPage < totalPages) {\n      const nextPage = currentPage + 1;\n      fetchSales(nextPage, filters);\n    }\n  };\n\n  const goToPrevPage = () => {\n    if (currentPage > 1) {\n      const prevPage = currentPage - 1;\n      fetchSales(prevPage, filters);\n    }\n  };\n\n  const goToPage = (page) => {\n    if (page >= 1 && page <= totalPages) {\n      fetchSales(page, filters);\n    }\n  };\n\n  const handleDeleteSales = async () => {\n    try {\n      setError('');\n      const response = await api.delete('/api/sales/delete/', {\n        data: deleteFilters\n      });\n      \n      alert(`Successfully deleted ${response.data.deleted_count} sales`);\n      setShowDeleteModal(false);\n      setDeleteFilters({\n        customer_name: '',\n        start_date: '',\n        end_date: '',\n        status: 'completed'\n      });\n      fetchSales(currentPage, filters);\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to delete sales');\n      console.error('Delete sales error:', err);\n    }\n  };\n\n  const handleEditSale = async () => {\n    try {\n      setError('');\n      \n      // Prepare the data to send\n      const updateData = {\n        items: editFormData.items,\n        paid_amount: editFormData.paid_amount\n      };\n      \n      await api.put(`/api/sales/${selectedSale.id}/edit/`, updateData);\n      alert('Sale updated successfully');\n      setShowEditModal(false);\n      setSelectedSale(null);\n      setEditFormData({ items: [], payment_type: 'full', paid_amount: 0 });\n      fetchSales(currentPage, filters);\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to update sale');\n      console.error('Edit sale error:', err);\n    }\n  };\n\n  const handleMakePayment = async (saleId, paymentAmount) => {\n    try {\n      setError('');\n      await api.post(`/api/sales/${saleId}/payment/`, {\n        payment_amount: paymentAmount,\n        is_full_payment: true\n      });\n      alert('Payment processed successfully');\n      setShowPaymentModal(false);\n      fetchSales(currentPage, filters);\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to process payment');\n      console.error('Payment error:', err);\n    }\n  };\n\n  const handleFilterChange = (e) => {\n    const { name, value } = e.target;\n    setFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleDeleteFilterChange = (e) => {\n    const { name, value } = e.target;\n    setDeleteFilters(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const applyFilters = () => {\n    setCurrentPage(1);\n    fetchSales(1, filters);\n  };\n\n  const clearFilters = () => {\n    setFilters({\n      status: '',\n      customer_name: '',\n      start_date: '',\n      end_date: '',\n      sale_number: '',\n      payment_status: '' // Reset payment status filter\n    });\n    setCurrentPage(1);\n    fetchSales(1, {});\n  };\n\n  const openEditModal = async (sale) => {\n    try {\n      setLoadingSale(true);\n      setError('');\n      \n      // Fetch full sale data including items\n      const response = await api.get(`/api/sales/${sale.id}/`);\n      const fullSale = response.data;\n      \n      setSelectedSale(fullSale);\n      setEditFormData({\n        items: fullSale.items.map(item => ({\n          product: item.product,\n          quantity: item.quantity,\n          unit: item.unit?.id || item.unit || '',\n          unit_price: item.unit_price,\n          price_mode: item.price_mode || 'standard'\n        })),\n        payment_type: fullSale.payment_status === 'paid' ? 'full' : \n                     fullSale.payment_status === 'partial' ? 'partial' : 'full',\n        paid_amount: fullSale.paid_amount || 0\n      });\n      setShowEditModal(true);\n    } catch (err) {\n      setError('Failed to load sale details');\n      console.error('Sale fetch error:', err);\n    } finally {\n      setLoadingSale(false);\n    }\n  };\n\n  const cancelSale = async (saleId) => {\n    try {\n      setError('');\n      const response = await api.post(`/api/sales/${saleId}/cancel/`);\n      \n      if (response.data.message === 'Sale cancelled and stock restored') {\n        // Show refund information for completed sales\n        if (response.data.refund_amount && response.data.refund_amount > 0) {\n          alert(`Sale cancelled and stock restored successfully!\\n\\nRefund Information:\\nOriginal Sale: ${response.data.original_sale_number}\\nRefund Amount: $${response.data.refund_amount.toFixed(2)}\\n\\nPlease process the refund to the customer.`);\n        } else {\n          alert('Sale cancelled and stock restored successfully');\n        }\n      } else {\n        alert('Sale cancelled successfully');\n      }\n      \n      fetchSales(currentPage, filters);\n      fetchProducts(); // Refresh products to update stock quantities\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to cancel sale');\n      console.error('Cancel sale error:', err);\n    }\n  };\n\n  const createReturn = async (sale) => {\n    try {\n      setError('');\n      \n      // Prepare return data\n      const returnData = {\n        sale_type: 'return',\n        original_sale: sale.id,\n        customer_name: sale.customer_name || '',\n        customer_phone: sale.customer_phone || '',\n        customer_email: sale.customer_email || '',\n        notes: `Return for sale ${sale.sale_number}`,\n        items: sale.items.map(item => ({\n          product: item.product,\n          quantity: item.quantity,\n          unit: item.unit,\n          unit_price: item.unit_price,\n          price_mode: item.price_mode || 'standard',\n          original_sale_item: item.id\n        }))\n      };\n      \n      const response = await api.post('/api/sales/', returnData);\n      \n      alert(`Return created successfully: ${response.data.sale_number}. Stock has been restored.`);\n      \n      // Refresh the sales list and products\n      fetchSales(currentPage, filters);\n      fetchProducts();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to create return');\n      console.error('Create return error:', err);\n    }\n  };\n\n  const handlePaymentMethodChange = async (saleId, newPaymentMethod) => {\n    try {\n      setError('');\n      await api.patch(`/sales/${saleId}/payment-method/`, {\n        payment_method: newPaymentMethod\n      });\n      \n      // Update the local state to reflect the change immediately\n      setSales(prevSales => \n        prevSales.map(sale => \n          sale.id === saleId \n            ? { ...sale, payment_method: newPaymentMethod }\n            : sale\n        )\n      );\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to update payment method');\n      console.error('Payment method update error:', err);\n    }\n  };\n\n  const addEditItem = () => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: [...prev.items, { product: '', quantity: 1, unit: '', unit_price: 0 }]\n    }));\n  };\n\n  const removeEditItem = (index) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updateEditItem = (index, field, value) => {\n    setEditFormData(prev => ({\n      ...prev,\n      items: prev.items.map((item, i) => \n        i === index ? { ...item, [field]: value } : item\n      )\n    }));\n  };\n\n  const validateEditSale = () => {\n    // Require at least 1 item for all sales (including returns)\n    if (!editFormData.items || editFormData.items.length === 0) {\n      return false;\n    }\n\n    // Check if any item has invalid quantity (allow quantity = 0)\n    for (const item of editFormData.items) {\n      const quantity = parseFloat(item.quantity);\n      if (isNaN(quantity) || quantity < 0) {\n        return false;\n      }\n\n      // Find the corresponding original item to check stock availability\n      const originalItem = selectedSale?.items?.find(original => \n        original.product === item.product && \n        original.unit === item.unit && \n        original.price_mode === item.price_mode\n      );\n\n      if (originalItem) {\n        // Calculate the quantity difference\n        const originalQuantity = parseFloat(originalItem.quantity);\n        const quantityDiff = quantity - originalQuantity;\n        \n        // If increasing quantity, check stock availability\n        if (quantityDiff > 0) {\n          // Find the product to get current stock\n          const product = products.find(p => p.id === parseInt(item.product));\n          if (product) {\n            // Convert quantity difference to base units for stock check\n            // This is a simplified check - in a real scenario, you'd need proper unit conversion\n            const stockNeeded = quantityDiff;\n            if (product.stock_quantity < stockNeeded) {\n              return false;\n            }\n          }\n        }\n      }\n    }\n\n    // Validate payment logic\n    if (editFormData.payment_type === 'partial') {\n      const total = calculateEditTotal();\n      const paidAmount = parseFloat(editFormData.paid_amount) || 0;\n      \n      // For partial payment, paid amount must be less than total and greater than 0\n      if (paidAmount >= total || paidAmount <= 0) {\n        return false;\n      }\n    } else if (editFormData.payment_type === 'full') {\n      const total = calculateEditTotal();\n      const paidAmount = parseFloat(editFormData.paid_amount) || 0;\n      \n      // For full payment, paid amount must equal total\n      if (paidAmount !== total) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const getProductPrice = (productId) => {\n    const product = products.find(p => p.id === parseInt(productId));\n    return product ? product.price : 0;\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const getStatusBadge = (status) => {\n    const statusClasses = {\n      pending: 'status-pending',\n      completed: 'status-completed',\n      cancelled: 'status-cancelled',\n      returned: 'status-returned',\n      refunded: 'status-refunded'\n    };\n    return <span className={`status-badge ${statusClasses[status] || ''}`}>{status}</span>;\n  };\n\n  const getPaymentStatusBadge = (paymentStatus) => {\n    const paymentClasses = {\n      pending: 'payment-pending',\n      partial: 'payment-partial',\n      paid: 'payment-paid'\n    };\n    const paymentLabels = {\n      pending: 'Unpaid',\n      partial: 'Partial',\n      paid: 'Paid'\n    };\n    return <span className={`payment-badge ${paymentClasses[paymentStatus] || ''}`}>{paymentLabels[paymentStatus] || paymentStatus}</span>;\n  };\n\n  const calculateEditTotal = () => {\n    return editFormData.items.reduce((total, item) => {\n      return total + (parseFloat(item.unit_price || 0) * parseFloat(item.quantity || 0));\n    }, 0);\n  };\n\n  // Update paid_amount when payment_type changes\n  useEffect(() => {\n    if (editFormData.payment_type === 'full') {\n      setEditFormData(prev => ({\n        ...prev,\n        paid_amount: calculateEditTotal()\n      }));\n    }\n  }, [editFormData.payment_type, editFormData.items]);\n\n  // Sales app - all authenticated users can access sales management\n  const handleSaleClick = async (sale) => {\n      try {\n        setSaleDetailLoading(true);\n        setShowSaleModal(true);\n        \n        // Check if sale has an ID\n        const saleId = sale.id || sale.sale_id;\n        if (!saleId) {\n          throw new Error(t('errors.not_found'));\n        }\n        \n        // Fetch detailed sale information\n        const response = await api.get(`/api/sales/${saleId}/`);\n        setSelectedSale(response.data);\n      } catch (err) {\n        console.error('Failed to fetch sale details:', err);\n        setError(`Failed to load sale details: ${err.message}`);\n        setShowSaleModal(false);\n      } finally {\n        setSaleDetailLoading(false);\n      }\n    };\n\n    const handleCloseSaleModal = () => {\n      setShowSaleModal(false);\n      setSelectedSale(null);\n    };\n\n    // Generate page numbers for pagination\n    const getPageNumbers = () => {\n      const pages = [];\n      const maxVisiblePages = 5;\n      \n      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n      \n      if (endPage - startPage + 1 < maxVisiblePages) {\n        startPage = Math.max(1, endPage - maxVisiblePages + 1);\n      }\n      \n      for (let i = startPage; i <= endPage; i++) {\n        pages.push(i);\n      }\n      \n      return pages;\n    };\n    \n  return (\n    <div className=\"sales-management\">\n      <div className=\"page-header\">\n        <h1>{t('titles.sales_management')}</h1>\n        <div className=\"header-actions\">\n          <PrintButton\n            data={{\n              ...sales,\n              user_name: user?.username || t('app.unknown_user'),\n              user_id: user?.id || 'unknown',\n              print_timestamp: new Date().toISOString(),\n              print_id: `PRINT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n            }}\n            title={t('titles.sales_management_report')}\n            type=\"sales_history\"\n            printText={t('buttons.print_sales_report')}\n            className=\"print-sales-report-btn\"\n          />\n          <Button \n            variant=\"danger\" \n            onClick={() => setShowDeleteModal(true)}\n          >\n            Delete Sales\n          </Button>\n        </div>\n      </div>\n\n      {error && (\n        <div className=\"error-message\">\n          {error}\n          <button onClick={() => setError('')}>&times;</button>\n        </div>\n      )}\n\n      {/* Enhanced Filters Section */}\n      <div className=\"filters-section\">\n        <h3>Filters</h3>\n        <div className=\"filters-grid\">\n          <div className=\"form-group\">\n            <label>Sale Number</label>\n            <input\n              type=\"text\"\n              name=\"sale_number\"\n              value={filters.sale_number}\n              onChange={handleFilterChange}\n              placeholder=\"Enter sale number\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Status</label>\n            <select\n              name=\"status\"\n              value={filters.status}\n              onChange={handleFilterChange}\n            >\n              <option value=\"\">All Statuses</option>\n              <option value=\"pending\">Pending</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"cancelled\">Cancelled</option>\n              <option value=\"returned\">Returned</option>\n            </select>\n          </div>\n          \n          {/* Added Payment Status Filter */}\n          <div className=\"form-group\">\n            <label>Payment Status</label>\n            <select\n              name=\"payment_status\"\n              value={filters.payment_status}\n              onChange={handleFilterChange}\n            >\n              <option value=\"\">All Payment Statuses</option>\n              <option value=\"pending\">Unpaid</option>\n              <option value=\"partial\">Partial</option>\n              <option value=\"paid\">Paid</option>\n            </select>\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Customer Name</label>\n            <input\n              type=\"text\"\n              name=\"customer_name\"\n              value={filters.customer_name}\n              onChange={handleFilterChange}\n              placeholder={t('forms.search_by_customer_name')}\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Start Date</label>\n            <input\n              type=\"date\"\n              name=\"start_date\"\n              value={filters.start_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>End Date</label>\n            <input\n              type=\"date\"\n              name=\"end_date\"\n              value={filters.end_date}\n              onChange={handleFilterChange}\n            />\n          </div>\n        </div>\n        \n        <div className=\"filter-actions\">\n          <Button variant=\"secondary\" onClick={clearFilters}>\n            Clear Filters\n          </Button>\n          <Button variant=\"primary\" onClick={applyFilters}>\n            Apply Filters\n          </Button>\n        </div>\n      </div>\n\n      {/* Pagination Info */}\n      <div className=\"pagination-info-top\">\n        Showing {sales.length} of {totalCount} sales (Page {currentPage} of {totalPages})\n      </div>\n\n      {/* Sales Table */}\n      <div className=\"table-section\">\n        {loading ? (\n          <div className=\"loading\">Loading sales...</div>\n        ) : (\n          <>\n            {/* Pagination Controls */}\n            {totalPages > 1 && (\n              <div className=\"pagination-controls\">\n                <button \n                  className=\"btn-pagination\" \n                  onClick={goToPrevPage}\n                  disabled={currentPage === 1}\n                >\n                  {t('buttons.previous')}\n                </button>\n                \n                {/* Page Numbers */}\n                {getPageNumbers().map(page => (\n                  <button\n                    key={page}\n                    className={`btn-pagination ${currentPage === page ? 'active' : ''}`}\n                    onClick={() => goToPage(page)}\n                  >\n                    {page}\n                  </button>\n                ))}\n                \n                <span className=\"pagination-info\">\n                  Page {currentPage} of {totalPages}\n                </span>\n                \n                <button \n                  className=\"btn-pagination\" \n                  onClick={goToNextPage}\n                  disabled={currentPage === totalPages}\n                >\n                  {t('buttons.next')}\n                </button>\n              </div>\n            )}\n            <Table\n              data={sales}\n              columns={[\n                {\n                  key: 'sale_number',\n                  header: t('table_headers.sale_number'),\n                  render: (value, row) => (\n                    <span\n                      className=\"sale-number clickable\"\n                      onClick={() => handleSaleClick(row)}\n                    >\n                      {value}\n                    </span>\n                  )\n                },\n                {\n                  key: 'customer_name',\n                  header: t('table_headers.customer'),\n                  render: (value) => value || 'N/A'\n                },\n                {\n                  key: 'status',\n                  header: t('table_headers.status'),\n                  render: (value) => (\n                    <div className=\"status-container\">\n                      <div className=\"sale-status\">{getStatusBadge(value)}</div>\n                    </div>\n                  )\n                },\n                {\n                  key: 'payment_status',\n                  header: t('table_headers.payment'),\n                  render: (value) => {\n                    const paymentClasses = {\n                      pending: 'payment-pending',\n                      partial: 'payment-partial',\n                      paid: 'payment-paid'\n                    };\n                    const paymentLabels = {\n                      pending: t('status_labels.pending'),\n                      partial: t('status_labels.partial'),\n                      paid: t('status_labels.paid')\n                    };\n                    return (\n                      <span className={`payment-badge ${paymentClasses[value] || ''}`}>\n                        {paymentLabels[value] || value}\n                      </span>\n                    );\n                  }\n                },\n                {\n                  key: 'items',\n                  header: t('table_headers.items'),\n                  render: (items) => {\n                    if (!items || items.length === 0)\n                      return <span className=\"no-items\">No items</span>;\n                    return (\n                      <div className=\"sale-items\">\n                        {items.slice(0, 2).map((item, index) => (\n                          <div key={index} className=\"sale-item-row\">\n                            <span className=\"item-name\">\n                              {item.product_name}\n                              <span\n                                className={`price-mode-badge ${item.price_mode || 'standard'}`}\n                              >\n                                {item.price_mode === 'wholesale' ? 'WS' : 'STD'}\n                              </span>\n                            </span>\n                            <span className=\"item-details\">\n                              {item.quantity_display || item.quantity}{' '}\n                              {item.unit_symbol || 'pcs'}  {formatCurrency(item.unit_price)}\n                            </span>\n                          </div>\n                        ))}\n                        {items.length > 2 && (\n                          <div className=\"more-items\">+{items.length - 2} more items</div>\n                        )}\n                      </div>\n                    );\n                  }\n                },\n                {\n                  key: 'total_amount',\n                  header: t('table_headers.total_amount'),\n                  render: (value) => (\n                    <div className=\"amount-container\">\n                      <div className=\"total-amount\">{formatCurrency(value)}</div>\n                    </div>\n                  )\n                },\n                {\n                  key: 'created_at',\n                  header: t('table_headers.date'),\n                  render: (value) => formatDate(value)\n                },\n                {\n                  key: 'sold_by_name',\n                  header: t('table_headers.sold_by'),\n                  render: (value) => value || 'N/A'\n                },\n                {\n                  key: 'payment_method',\n                  header: t('table_headers.payment_method'),\n                  render: (value, row) => {\n                    if (row.status === 'pending') {\n                      return (\n                        <select\n                          value={value || 'cash'}\n                          onChange={(e) => handlePaymentMethodChange(row.id, e.target.value)}\n                          className=\"payment-method-select\"\n                        >\n                          <option value=\"cash\">Cash</option>\n                          <option value=\"card\">Card</option>\n                          <option value=\"mobile_money\">Mobile Money</option>\n                          <option value=\"bank_transfer\">Bank Transfer</option>\n                        </select>\n                      );\n                    }\n                    const methodLabels = {\n                      cash: t('payment_methods.cash'),\n                      card: t('payment_methods.card'),\n                      mobile_money: t('payment_methods.mobile_money'),\n                      bank_transfer: t('payment_methods.bank_transfer')\n                    };\n                    return (\n                      <span className=\"payment-method-display\">\n                        {methodLabels[value] || value || 'Cash'}\n                      </span>\n                    );\n                  }\n                },\n                {\n                  key: 'paid_amount',\n                  header: t('table_headers.paid_amount'),\n                  render: (value) => (\n                    <div className=\"payment-amount-container\">\n                      <div className=\"paid-amount\">\n                        {formatCurrency(parseFloat(value) || 0)}\n                      </div>\n                    </div>\n                  )\n                },\n                {\n                  key: 'actions',\n                  header: t('table_headers.actions'),\n                  render: (_, row) => (\n                    <div className=\"action-buttons\" onClick={(e) => e.stopPropagation()}>\n                      {!(row.status === 'completed' && row.payment_status === 'paid') &&\n                        row.status !== 'refunded' && (\n                          <Button\n                            variant=\"primary\"\n                            size=\"small\"\n                            onClick={() => openEditModal(row)}\n                            loading={loadingSale}\n                            disabled={loadingSale}\n                          >\n                            Edit\n                          </Button>\n                        )}\n                      {row.status === 'completed' &&\n                        row.status !== 'refunded' &&\n                        row.sale_type !== 'return' && (\n                          <Button\n                            variant=\"warning\"\n                            size=\"small\"\n                            onClick={() => {\n                              if (\n                                window.confirm(\n                                  `Are you sure you want to create a return for this sale? This will restore stock and mark the sale as refunded.`\n                                )\n                              ) {\n                                createReturn(row);\n                              }\n                            }}\n                            loading={loadingSale}\n                            disabled={loadingSale}\n                          >\n                            Return\n                          </Button>\n                        )}\n                      {(row.status === 'pending' || row.status === 'completed') &&\n                        row.status !== 'refunded' &&\n                        row.sale_type !== 'return' && (\n                          <Button\n                            variant=\"danger\"\n                            size=\"small\"\n                            onClick={() => {\n                              if (\n                                window.confirm(\n                                  `Are you sure you want to cancel this ${row.status} sale?`\n                                )\n                              ) {\n                                cancelSale(row.id);\n                              }\n                            }}\n                          >\n                            Cancel\n                          </Button>\n                        )}\n                    </div>\n                  )\n                }\n              ]}\n              onRowClick={(row) => handleSaleClick(row)}\n            />\n\n            {/* Pagination Controls */}\n            {totalPages > 1 && (\n              <div className=\"pagination-controls\">\n                <button \n                  className=\"btn-pagination\" \n                  onClick={goToPrevPage}\n                  disabled={currentPage === 1}\n                >\n                  {t('buttons.previous')}\n                </button>\n                \n                {/* Page Numbers */}\n                {getPageNumbers().map(page => (\n                  <button\n                    key={page}\n                    className={`btn-pagination ${currentPage === page ? 'active' : ''}`}\n                    onClick={() => goToPage(page)}\n                  >\n                    {page}\n                  </button>\n                ))}\n                \n                <span className=\"pagination-info\">\n                  Page {currentPage} of {totalPages}\n                </span>\n                \n                <button \n                  className=\"btn-pagination\" \n                  onClick={goToNextPage}\n                  disabled={currentPage === totalPages}\n                >\n                  {t('buttons.next')}\n                </button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Rest of your modals remain the same */}\n      {/* Delete Sales Modal */}\n      {showDeleteModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Delete Sales</h2>\n              <button className=\"close-button\" onClick={() => setShowDeleteModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <p>Select criteria to delete sales:</p>\n              \n              <div className=\"form-group\">\n                <label>Customer Name (optional)</label>\n                <input\n                  type=\"text\"\n                  name=\"customer_name\"\n                  value={deleteFilters.customer_name}\n                  onChange={handleDeleteFilterChange}\n                  placeholder={t('forms.leave_empty_to_delete_all')}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Start Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"start_date\"\n                  value={deleteFilters.start_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>End Date (optional)</label>\n                <input\n                  type=\"date\"\n                  name=\"end_date\"\n                  value={deleteFilters.end_date}\n                  onChange={handleDeleteFilterChange}\n                />\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Status</label>\n                <select\n                  name=\"status\"\n                  value={deleteFilters.status}\n                  onChange={handleDeleteFilterChange}\n                >\n                  <option value=\"completed\">Completed</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"cancelled\">Cancelled</option>\n                  <option value=\"returned\">Returned</option>\n                  <option value=\"refunded\">Refunded</option>\n                </select>\n              </div>\n              \n              <div className=\"modal-actions\">\n                <Button variant=\"secondary\" onClick={() => setShowDeleteModal(false)}>\n                  Cancel\n                </Button>\n                <Button variant=\"danger\" onClick={handleDeleteSales}>\n                  Delete Sales\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Edit Sale Modal */}\n      {showEditModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content large-modal\">\n            <div className=\"modal-header\">\n              <h2>\n                {selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid' ? t('modals.view_sale') : t('modals.edit_sale')}: {selectedSale?.sale_number || t('app.loading')}\n                {selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid' && (\n                  <span className=\"view-only-badge\">{t('modals.view_only')}</span>\n                )}\n              </h2>\n              <button className=\"close-button\" onClick={() => setShowEditModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              {loadingSale ? (\n                <div className=\"loading\">Loading sale details...</div>\n              ) : selectedSale ? (\n                <>\n                  <div className=\"edit-sale-info\">\n                    <p><strong>Customer:</strong> {selectedSale.customer_name || 'N/A'}</p>\n                    <p><strong>Date:</strong> {formatDate(selectedSale.created_at)}</p>\n                    <p><strong>Status:</strong> {getStatusBadge(selectedSale.status)}</p>\n                    <p><strong>Payment Status:</strong> {getPaymentStatusBadge(selectedSale.payment_status)}</p>\n                    <p><strong>Total Amount:</strong> ${selectedSale.total_amount}</p>\n                    <p><strong>Paid Amount:</strong> ${selectedSale.paid_amount}</p>\n                    {selectedSale.payment_status === 'partial' && (\n                      <p><strong>Remaining Amount:</strong> ${selectedSale.remaining_amount}</p>\n                    )}\n                    {selectedSale.due_date && (\n                      <p><strong>Due Date:</strong> {formatDate(selectedSale.due_date)}</p>\n                    )}\n                  </div>\n                  \n                  <h3>Sale Items</h3>\n                  <div className=\"edit-items\">\n                    {editFormData.items.map((item, index) => {\n                      const originalItem = selectedSale?.items?.find(origItem => \n                        origItem.product === item.product && \n                        origItem.unit === item.unit &&\n                        origItem.price_mode === item.price_mode\n                      );\n                      \n                      return (\n                        <div key={index} className=\"edit-item\">\n                          <div className=\"form-group\">\n                            <label>Product</label>\n                            <input\n                              type=\"text\"\n                              value={originalItem?.product_name || t('app.unknown_product')}\n                              readOnly\n                              className=\"readonly-field\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label>Unit</label>\n                            <input\n                              type=\"text\"\n                              value={originalItem?.unit_name ? `${originalItem.unit_name} (${originalItem.unit_symbol})` : 'N/A'}\n                              readOnly\n                              className=\"readonly-field\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label>Price Mode</label>\n                            <input\n                              type=\"text\"\n                              value={item.price_mode === 'wholesale' ? 'Wholesale (WS)' : 'Standard (STD)'}\n                              readOnly\n                              className=\"readonly-field\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label>Unit Price</label>\n                            <input\n                              type=\"text\"\n                              value={formatCurrency(item.unit_price)}\n                              readOnly\n                              className=\"readonly-field\"\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label>Quantity</label>\n                            <input\n                              type=\"number\"\n                              min=\"0\"\n                              value={item.quantity}\n                              onChange={(e) => updateEditItem(index, 'quantity', parseFloat(e.target.value) || 0)}\n                              readOnly={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid'}\n                              className={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid' ? 'read-only-input' : ''}\n                            />\n                          </div>\n                          \n                          <div className=\"form-group\">\n                            <label>Total</label>\n                            <input\n                              type=\"text\"\n                              value={formatCurrency(item.quantity * item.unit_price)}\n                              readOnly\n                              className=\"readonly-field\"\n                            />\n                          </div>\n                        \n                        {!(selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid') && (\n                          <Button \n                            variant=\"danger\" \n                            size=\"small\"\n                            onClick={() => removeEditItem(index)}\n                          >\n                            Remove\n                          </Button>\n                        )}\n                      </div>\n                      );\n                    })}\n                  </div>\n                  \n                  {!(selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid') && (\n                    <>\n                      <h3>Payment Options</h3>\n                      <div className=\"payment-section\">\n                        <div className=\"form-group\">\n                          <label>Payment Type</label>\n                          <div className=\"payment-types\">\n                            <label className=\"payment-type\">\n                              <input\n                                type=\"radio\"\n                                name=\"editPaymentType\"\n                                value=\"full\"\n                                checked={editFormData.payment_type === 'full'}\n                                onChange={(e) => setEditFormData(prev => ({\n                                  ...prev,\n                                  payment_type: e.target.value,\n                                  paid_amount: e.target.value === 'full' ? calculateEditTotal() : prev.paid_amount\n                                }))}\n                                disabled={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid'}\n                              />\n                              <span>Full Payment (100%)</span>\n                            </label>\n                            <label className=\"payment-type\">\n                              <input\n                                type=\"radio\"\n                                name=\"editPaymentType\"\n                                value=\"partial\"\n                                checked={editFormData.payment_type === 'partial'}\n                                onChange={(e) => setEditFormData(prev => ({\n                                  ...prev,\n                                  payment_type: e.target.value\n                                }))}\n                                disabled={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid'}\n                              />\n                              <span>Partial Payment (0-99.99%)</span>\n                            </label>\n                          </div>\n                        </div>\n                        \n                        {editFormData.payment_type === 'partial' && (\n                          <div className=\"form-group\">\n                            <label>Amount to Pay</label>\n                            <input\n                              type=\"number\"\n                              step=\"0.01\"\n                              min=\"0\"\n                              max={calculateEditTotal()}\n                              value={editFormData.paid_amount || 0}\n                              onChange={(e) => {\n                                const value = parseFloat(e.target.value) || 0;\n                                setEditFormData(prev => ({\n                                  ...prev,\n                                  paid_amount: value\n                                }));\n                              }}\n                              placeholder={t('forms.enter_amount_to_pay')}\n                              readOnly={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid'}\n                              className={selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid' ? 'read-only-input' : ''}\n                            />\n                            <small>\n                              Total: ${calculateEditTotal().toFixed(2)} | \n                              Remaining: ${(calculateEditTotal() - (editFormData.paid_amount || 0)).toFixed(2)}\n                            </small>\n                          </div>\n                        )}\n                        \n                        {editFormData.payment_type === 'full' && (\n                          <div className=\"form-group\">\n                            <label>Amount to Pay</label>\n                            <input\n                              type=\"number\"\n                              step=\"0.01\"\n                              value={calculateEditTotal()}\n                              readOnly\n                              className=\"form-control\"\n                            />\n                            <small>Full payment for the total amount.</small>\n                          </div>\n                        )}\n                      </div>\n                    </>\n                  )}\n                  \n                  <div className=\"modal-actions\">\n                    <Button variant=\"secondary\" onClick={() => setShowEditModal(false)}>\n                      {selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid' ? t('modals.close') : t('modals.cancel')}\n                    </Button>\n                    {!(selectedSale?.status === 'completed' && selectedSale?.payment_status === 'paid') && (\n                      <Button \n                        variant=\"primary\" \n                        onClick={handleEditSale}\n                        disabled={!validateEditSale()}\n                      >\n                        Update Sale\n                      </Button>\n                    )}\n                  </div>\n                </>\n              ) : (\n                <div className=\"error-message\">\n                  Failed to load sale details\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Payment Modal */}\n      {showPaymentModal && selectedSale && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Make Payment - {selectedSale.sale_number}</h2>\n              <button className=\"close-button\" onClick={() => setShowPaymentModal(false)}>&times;</button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"payment-info\">\n                <p><strong>Customer:</strong> {selectedSale.customer_name || 'N/A'}</p>\n                <p><strong>Total Amount:</strong> ${selectedSale.total_amount}</p>\n                <p><strong>Paid Amount:</strong> ${selectedSale.paid_amount}</p>\n                <p><strong>Remaining Amount:</strong> ${selectedSale.remaining_amount}</p>\n              </div>\n              \n              <div className=\"form-group\">\n                <label>Payment Amount (Full Payment Only)</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={selectedSale.remaining_amount}\n                  readOnly\n                  className=\"form-control\"\n                />\n                <small>This will be a full payment for the remaining amount.</small>\n              </div>\n              \n              <div className=\"modal-actions\">\n                <Button variant=\"secondary\" onClick={() => setShowPaymentModal(false)}>\n                  Cancel\n                </Button>\n                <Button \n                  variant=\"success\" \n                  onClick={() => handleMakePayment(selectedSale.id, selectedSale.remaining_amount)}\n                >\n                  Process Payment (${selectedSale.remaining_amount})\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Sale Detail Modal */}\n      {showSaleModal && (\n        <SaleDetailModal\n          sale={selectedSale}\n          onClose={handleCloseSaleModal}\n          loading={saleDetailLoading}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SalesManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}