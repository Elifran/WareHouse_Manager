{"ast":null,"code":"import React,{useState}from'react';import{useTranslation}from'react-i18next';import Button from'./Button';import{createThermalPrintDocument,detectPrinterType,mobilePrint,generateMobilePrintContent,generateXprinterPrintContent,downloadReceiptFile,generatePDFContent,generateESCPOSForReceiptApp,isMobileDevice,openPrintWindow,openPrintPreview}from'../utils/printUtils';import'./PrintButton.css';// Helper functions for generating print content optimized for 80mm thermal printers\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const generateInventoryContent=(data,t)=>{let products=data;if(!Array.isArray(data)){if(data.results&&Array.isArray(data.results)){products=data.results;}else if(data.data&&Array.isArray(data.data)){products=data.data;}else if(data.items&&Array.isArray(data.items)){products=data.items;}else{const numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){products=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');}else{products=[];}}}return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">\").concat(t('titles.inventory_summary','INVENTORY SUMMARY'),\"</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">SUMMARY</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Total Products:</span>\\n        <span>\").concat(Array.isArray(products)?products.length:0,\"</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">PRODUCTS</div>\\n      \").concat(Array.isArray(products)?products.slice(0,20).map(item=>\"\\n        <div class=\\\"product-item\\\">\\n          <div class=\\\"product-name\\\">\".concat((item.name||'N/A').substring(0,20),\"</div>\\n          <div class=\\\"product-details\\\">\\n            <span>SKU: \").concat((item.sku||'N/A').substring(0,8),\"</span>\\n            <span>Qty: \").concat(item.stock_quantity||0,\"</span>\\n            <span>\").concat(parseFloat(item.price||0).toFixed(2),\" MGA</span>\\n          </div>\\n        </div>\\n      \")).join(''):'<div class=\"no-data\">No products found</div>',\"\\n      \").concat(Array.isArray(products)&&products.length>20?\"\\n        <div class=\\\"truncated-warning\\\">... and \".concat(products.length-20,\" more products</div>\\n      \"):'',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">\").concat(t('footer.generated_by','Generated by ______ANTATSIMO______ System'),\"</div>\\n    </div>\\n  \");};const generatePurchaseOrderContent=(data,t)=>{var _data$supplier;return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">PURCHASE ORDER</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">ORDER INFO</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Order No:</span>\\n        <span>\").concat(data.order_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Supplier:</span>\\n        <span>\").concat((((_data$supplier=data.supplier)===null||_data$supplier===void 0?void 0:_data$supplier.name)||'N/A').substring(0,25),\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Date:</span>\\n        <span>\").concat(data.order_date?new Date(data.order_date).toLocaleDateString():'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Status:</span>\\n        <span>\").concat(data.status||'N/A',\"</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">ITEMS</div>\\n      \").concat(data.items?data.items.slice(0,15).map(item=>{var _item$product;return\"\\n        <div class=\\\"order-item\\\">\\n          <div class=\\\"item-name\\\">\".concat((((_item$product=item.product)===null||_item$product===void 0?void 0:_item$product.name)||'N/A').substring(0,25),\"</div>\\n          <div class=\\\"item-details\\\">\\n            <span>\").concat(item.quantity_ordered||0,\" x \").concat(parseFloat(item.unit_cost||0).toFixed(2),\"</span>\\n            <span>\").concat(parseFloat((item.quantity_ordered||0)*(item.unit_cost||0)).toFixed(2),\" MGA</span>\\n          </div>\\n        </div>\\n      \");}).join(''):'<div class=\"no-data\">No items found</div>',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-total\\\">\\n      <div class=\\\"total-row\\\">\\n        <span>TOTAL AMOUNT:</span>\\n        <span>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">End of Purchase Order</div>\\n    </div>\\n  \");};const generateDeliveryContent=(data,t)=>{var _data$purchase_order;return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">DELIVERY RECEIPT</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">DELIVERY INFO</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Delivery No:</span>\\n        <span>\").concat(data.delivery_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>PO Number:</span>\\n        <span>\").concat(((_data$purchase_order=data.purchase_order)===null||_data$purchase_order===void 0?void 0:_data$purchase_order.order_number)||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Date:</span>\\n        <span>\").concat(data.delivery_date?new Date(data.delivery_date).toLocaleDateString():'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Status:</span>\\n        <span>\").concat(data.status||'N/A',\"</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">ITEMS RECEIVED</div>\\n      \").concat(data.items?data.items.slice(0,15).map(item=>{var _item$product2;return\"\\n        <div class=\\\"delivery-item\\\">\\n          <div class=\\\"item-name\\\">\".concat((item.product_name||((_item$product2=item.product)===null||_item$product2===void 0?void 0:_item$product2.name)||'N/A').substring(0,25),\"</div>\\n          <div class=\\\"item-details\\\">\\n            <span>\").concat(item.quantity_received||item.delivered_quantity||0,\" x \").concat(parseFloat(item.unit_cost||0).toFixed(2),\"</span>\\n            <span>\").concat(parseFloat((item.quantity_received||item.delivered_quantity||0)*(item.unit_cost||0)).toFixed(2),\" MGA</span>\\n          </div>\\n        </div>\\n      \");}).join(''):'<div class=\"no-data\">No items found</div>',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-total\\\">\\n      <div class=\\\"total-row\\\">\\n        <span>TOTAL AMOUNT:</span>\\n        <span>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">Delivery completed</div>\\n    </div>\\n  \");};const generateSaleContent=(data,t)=>{let items=data.items;if(!items){const numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){items=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');}}const paymentStatusText=data.payment_status==='paid'?t('payment_status.paid','PAID'):data.payment_status==='partial'?t('payment_status.partial_payment','PARTIAL'):data.payment_status==='pending'?t('payment_status.pending_payment','PENDING'):t('payment_status.unknown','UNKNOWN');return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">SALE RECEIPT</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">SALE INFO</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Sale No:</span>\\n        <span>\").concat(data.sale_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Customer:</span>\\n        <span>\").concat((data.customer_name||t('customer.walk_in','Walk-in Customer')).substring(0,25),\"</span>\\n      </div>\\n      \").concat(data.customer_phone?\"\\n        <div class=\\\"receipt-row\\\">\\n          <span>Phone:</span>\\n          <span>\".concat(data.customer_phone,\"</span>\\n        </div>\\n      \"):'',\"\\n      <div class=\\\"receipt-row\\\">\\n        <span>Status:</span>\\n        <span>\").concat(paymentStatusText,\"</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">ITEMS SOLD</div>\\n      \").concat(items&&Array.isArray(items)?items.slice(0,20).map(item=>\"\\n        <div class=\\\"sale-item\\\">\\n          <div class=\\\"item-name\\\">\".concat((item.product_name||'N/A').substring(0,25),\"</div>\\n          <div class=\\\"item-details\\\">\\n            <span>\").concat(item.quantity_display||item.quantity||0,\" x \").concat(parseFloat(item.unit_price||0).toFixed(2),\"</span>\\n            <span>\").concat(parseFloat(item.total_price||0).toFixed(2),\" MGA</span>\\n          </div>\\n        </div>\\n      \")).join(''):'<div class=\"no-data\">No items found</div>',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-totals\\\">\\n      <div class=\\\"total-row\\\">\\n        <span>Subtotal:</span>\\n        <span>\").concat(parseFloat(data.total_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n      <div class=\\\"total-row\\\">\\n        <span>Paid:</span>\\n        <span>\").concat(parseFloat(data.paid_amount||0).toFixed(2),\" MGA</span>\\n      </div>\\n      \").concat(data.payment_status==='partial'?\"\\n        <div class=\\\"total-row due-amount\\\">\\n          <span>Due:</span>\\n          <span>\".concat(parseFloat(data.remaining_amount||0).toFixed(2),\" MGA</span>\\n        </div>\\n      \"):'',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"thank-you\\\">\").concat(t('receipt.thank_you','Thank you for your business!'),\"</div>\\n      <div class=\\\"footer-text\\\">\").concat(data.sale_number||'',\"</div>\\n    </div>\\n  \");};const generateSalesHistoryContent=(data,t)=>{let sales=data;if(!Array.isArray(data)){if(data.results&&Array.isArray(data.results)){sales=data.results;}else if(data.data&&Array.isArray(data.data)){sales=data.data;}else if(data.items&&Array.isArray(data.items)){sales=data.items;}else{const numberedKeys=Object.keys(data).filter(key=>/^\\d+$/.test(key));if(numberedKeys.length>0){sales=numberedKeys.map(key=>data[key]).filter(item=>item&&typeof item==='object');}else{sales=[];}}}const totalRevenue=Array.isArray(sales)?sales.reduce((sum,sale)=>sum+parseFloat(sale.total_amount||0),0):0;return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">SALES REPORT</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">SUMMARY</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Total Sales:</span>\\n        <span>\").concat(Array.isArray(sales)?sales.length:0,\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Total Revenue:</span>\\n        <span>\").concat(totalRevenue.toFixed(2),\" MGA</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">RECENT SALES</div>\\n      \").concat(Array.isArray(sales)?sales.slice(0,10).map(sale=>\"\\n        <div class=\\\"sale-summary\\\">\\n          <div class=\\\"sale-info\\\">\\n            <span>\".concat(sale.sale_number||'N/A',\"</span>\\n            <span>\").concat(parseFloat(sale.total_amount||0).toFixed(2),\" MGA</span>\\n          </div>\\n          <div class=\\\"sale-details\\\">\\n            <span>\").concat((sale.customer_name||t('customer.walk_in','Walk-in')).substring(0,15),\"</span>\\n            <span>\").concat(sale.created_at?new Date(sale.created_at).toLocaleDateString():'N/A',\"</span>\\n          </div>\\n        </div>\\n      \")).join(''):'<div class=\"no-data\">No sales data</div>',\"\\n      \").concat(Array.isArray(sales)&&sales.length>10?\"\\n        <div class=\\\"truncated-warning\\\">... and \".concat(sales.length-10,\" more sales</div>\\n      \"):'',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">Sales report generated</div>\\n    </div>\\n  \");};const generatePackagingValidationContent=(data,t)=>{return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">PACKAGING VALIDATION</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">VALIDATION INFO</div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Sale No:</span>\\n        <span>\").concat(data.sale_number||'N/A',\"</span>\\n      </div>\\n      <div class=\\\"receipt-row\\\">\\n        <span>Customer:</span>\\n        <span>\").concat((data.customer_name||t('customer.walk_in','Walk-in Customer')).substring(0,25),\"</span>\\n      </div>\\n      \").concat(data.customer_phone?\"\\n        <div class=\\\"receipt-row\\\">\\n          <span>Phone:</span>\\n          <span>\".concat(data.customer_phone,\"</span>\\n        </div>\\n      \"):'',\"\\n      <div class=\\\"receipt-row\\\">\\n        <span>Total Items:</span>\\n        <span>\").concat(data.packaging_items?data.packaging_items.length:0,\"</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">PACKAGING ITEMS</div>\\n      \").concat(data.packaging_items&&Array.isArray(data.packaging_items)?data.packaging_items.slice(0,15).map(item=>\"\\n        <div class=\\\"packaging-item\\\">\\n          <div class=\\\"item-name\\\">\".concat((item.product_name||'N/A').substring(0,25),\"</div>\\n          <div class=\\\"item-details\\\">\\n            <span>\").concat(item.quantity||0,\" x \").concat(parseFloat(item.unit_price||0).toFixed(2),\"</span>\\n            <span>\").concat(parseFloat(item.total_price||0).toFixed(2),\" MGA</span>\\n            <span class=\\\"status-\").concat(item.status,\"\\\">\").concat(item.status==='consignation'?'PAID':item.status==='exchange'?'EXCH':item.status==='due'?'DUE':item.status,\"</span>\\n          </div>\\n        </div>\\n      \")).join(''):'<div class=\"no-data\">No packaging items</div>',\"\\n    </div>\\n    \\n    <div class=\\\"receipt-total\\\">\\n      <div class=\\\"total-row\\\">\\n        <span>PACKAGING TOTAL:</span>\\n        <span>\").concat(parseFloat(data.packaging_total||0).toFixed(2),\" MGA</span>\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">Packaging validation completed</div>\\n    </div>\\n  \");};const generateDefaultContent=(data,t)=>{return\"\\n    <div class=\\\"receipt-header\\\">\\n      <div class=\\\"company-name\\\">\".concat(t('company.name','______ANTATSIMO______'),\"</div>\\n      <div class=\\\"document-title\\\">DOCUMENT</div>\\n      <div class=\\\"receipt-date\\\">\").concat(new Date().toLocaleDateString(),\" \").concat(new Date().toLocaleTimeString(),\"</div>\\n    </div>\\n    \\n    <div class=\\\"receipt-section\\\">\\n      <div class=\\\"section-title\\\">CONTENT</div>\\n      <div class=\\\"default-content\\\">\\n        Document generated successfully\\n      </div>\\n    </div>\\n    \\n    <div class=\\\"receipt-footer\\\">\\n      <div class=\\\"footer-text\\\">Document printed</div>\\n    </div>\\n  \");};// Export the generatePrintContent function\nexport const generatePrintContent=(data,title,type,t)=>{const currentDate=new Date().toLocaleDateString();const currentTime=new Date().toLocaleTimeString();let content=\"\\n    <!DOCTYPE html>\\n    <html>\\n    <head>\\n      <title>\".concat(title,\"</title>\\n      <meta charset=\\\"UTF-8\\\">\\n      <style>\\n        /* 80mm Thermal Printer Receipt Styles */\\n        * {\\n          margin: 0;\\n          padding: 0;\\n          box-sizing: border-box;\\n        }\\n        \\n        body {\\n          font-family: 'Courier New', Courier, monospace;\\n          font-size: 12px;\\n          line-height: 1.2;\\n          color: #000;\\n          width: 80mm;\\n          max-width: 80mm;\\n          margin: 0 auto;\\n          padding: 3mm;\\n          background: white;\\n        }\\n        \\n        .receipt-header {\\n          text-align: center;\\n          margin-bottom: 8px;\\n          padding-bottom: 6px;\\n          border-bottom: 1px dashed #000;\\n        }\\n        \\n        .company-name {\\n          font-weight: bold;\\n          font-size: 14px;\\n          margin-bottom: 2px;\\n          text-transform: uppercase;\\n        }\\n        \\n        .document-title {\\n          font-weight: bold;\\n          font-size: 13px;\\n          margin-bottom: 3px;\\n          text-transform: uppercase;\\n        }\\n        \\n        .receipt-date {\\n          font-size: 11px;\\n          color: #555;\\n        }\\n        \\n        .receipt-section {\\n          margin-bottom: 8px;\\n          padding-bottom: 6px;\\n          border-bottom: 1px dotted #ccc;\\n        }\\n        \\n        .section-title {\\n          font-weight: bold;\\n          font-size: 11px;\\n          margin-bottom: 4px;\\n          text-transform: uppercase;\\n          background: #f0f0f0;\\n          padding: 2px 4px;\\n        }\\n        \\n        .receipt-row {\\n          display: flex;\\n          justify-content: space-between;\\n          margin-bottom: 3px;\\n          font-size: 11px;\\n        }\\n        \\n        .product-item,\\n        .order-item,\\n        .delivery-item,\\n        .sale-item,\\n        .packaging-item,\\n        .sale-summary {\\n          margin-bottom: 4px;\\n          padding: 2px 0;\\n        }\\n        \\n        .product-name,\\n        .item-name {\\n          font-weight: bold;\\n          margin-bottom: 1px;\\n          word-wrap: break-word;\\n        }\\n        \\n        .product-details,\\n        .item-details,\\n        .sale-info {\\n          display: flex;\\n          justify-content: space-between;\\n          font-size: 10px;\\n          color: #555;\\n        }\\n        \\n        .receipt-totals,\\n        .receipt-total {\\n          margin: 8px 0;\\n          padding-top: 6px;\\n          border-top: 2px solid #000;\\n        }\\n        \\n        .total-row {\\n          display: flex;\\n          justify-content: space-between;\\n          margin-bottom: 3px;\\n          font-weight: bold;\\n        }\\n        \\n        .due-amount {\\n          color: #d00;\\n        }\\n        \\n        .no-data {\\n          text-align: center;\\n          color: #888;\\n          font-style: italic;\\n          padding: 8px 0;\\n        }\\n        \\n        .truncated-warning {\\n          text-align: center;\\n          color: #888;\\n          font-size: 10px;\\n          font-style: italic;\\n          margin-top: 4px;\\n        }\\n        \\n        .thank-you {\\n          text-align: center;\\n          font-weight: bold;\\n          margin: 6px 0;\\n        }\\n        \\n        .receipt-footer {\\n          text-align: center;\\n          margin-top: 10px;\\n          padding-top: 6px;\\n          border-top: 1px dashed #000;\\n          font-size: 10px;\\n          color: #666;\\n        }\\n        \\n        .footer-text {\\n          margin-bottom: 2px;\\n        }\\n        \\n        .status-consignation { color: #090; }\\n        .status-exchange { color: #009; }\\n        .status-due { color: #d00; font-weight: bold; }\\n        \\n        /* Print-specific styles */\\n        @media print {\\n          body {\\n            margin: 0;\\n            padding: 2mm;\\n            width: 80mm;\\n          }\\n          \\n          .no-print {\\n            display: none;\\n          }\\n          \\n          /* Ensure proper sizing for thermal paper */\\n          @page {\\n            size: 80mm auto;\\n            margin: 0;\\n          }\\n        }\\n        \\n        /* Force monospace and proper breaking */\\n        * {\\n          font-family: 'Courier New', Courier, monospace !important;\\n        }\\n        \\n        .default-content {\\n          text-align: center;\\n          padding: 10px 0;\\n          color: #666;\\n        }\\n      </style>\\n    </head>\\n    <body>\\n  \");// Add type-specific content\nswitch(type){case'inventory':content+=generateInventoryContent(data,t);break;case'purchase_order':content+=generatePurchaseOrderContent(data,t);break;case'delivery':content+=generateDeliveryContent(data,t);break;case'sale':content+=generateSaleContent(data,t);break;case'sales_history':content+=generateSalesHistoryContent(data,t);break;case'packaging_validation':content+=generatePackagingValidationContent(data,t);break;default:content+=generateDefaultContent(data,t);}content+=\"\\n    </body>\\n    </html>\\n  \";return content;};const PrintButton=_ref=>{let{data,title,type='default',onValidate=null,validateText='Validate & Print',printText='Print',className='',disabled=false,showValidateOption=false}=_ref;const{t}=useTranslation();const[isPrinting,setIsPrinting]=useState(false);const[showPrintOptions,setShowPrintOptions]=useState(false);const handlePrint=async function(){let validateFirst=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;let useThermalPrinter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let useReceiptApp=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;let usePreview=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;// Validate data structure\nif(!data){console.error('No data provided to PrintButton');window.alert(t('print.no_data','No data available to print.'));return;}if(validateFirst&&onValidate){try{await onValidate();}catch(error){console.error('Validation failed:',error);return;}}setIsPrinting(true);try{let printContent;const isMobile=isMobileDevice();// Handle receipt app integration\nif(useReceiptApp){console.log('Attempting to download receipt file...',{data,title});const success=downloadReceiptFile(data,title);console.log('Download result:',success);if(success){window.alert(t('print.pdf_downloaded','Receipt PDF downloaded! You can now open it with any PDF viewer or receipt printer app to print directly to your Xprinter.'));return;}else{throw new Error('Failed to download receipt file.');}}// Generate appropriate content based on device and printer type\nif(useThermalPrinter||isMobile){// Use Xprinter-optimized content for better compatibility\nprintContent=generateXprinterPrintContent(data,title,type,t);}else{printContent=generatePrintContent(data,title,type,t);}// Handle print preview\nif(usePreview){const previewSuccess=openPrintPreview(printContent,title);if(previewSuccess){return;}else{throw new Error('Failed to open print preview window.');}}// Use mobile-friendly printing for mobile devices\nif(isMobile){const success=await mobilePrint(printContent,title);if(!success){// If mobile printing fails, offer receipt app option\nconst useReceiptApp=window.confirm(t('print.mobile_failed_offer_app','Mobile printing failed. Would you like to download a file for receipt printer apps instead?'));if(useReceiptApp){const downloadSuccess=downloadReceiptFile(data,title);if(downloadSuccess){window.alert(t('print.pdf_downloaded','Receipt PDF downloaded! You can now open it with any PDF viewer or receipt printer app to print directly to your Xprinter.'));return;}}throw new Error('Mobile printing failed. Please try again or check your printer connection.');}}else{// Desktop printing with enhanced error handling\n// Try print preview first for better visibility\nconst previewSuccess=openPrintPreview(printContent,title);if(previewSuccess){// Preview opened successfully, user can print from there\nreturn;}else{// Fallback to direct print window\nconst success=await openPrintWindow(printContent,title);if(!success){throw new Error('Failed to open print window. Please check popup blockers and try again.');}}}}catch(error){console.error('Print error:',error);// Provide more specific error messages\nlet errorMessage=t('print.failed','Failed to print. Please try again.');if(error.message.includes('popup')){errorMessage=t('print.popup_blocked','Popup blocked. Please allow popups for this site and try again.');}else if(error.message.includes('Mobile printing failed')){errorMessage=t('print.mobile_failed','Mobile printing failed. Please check your printer connection and try again.');}else if(error.message.includes('window.open')){errorMessage=t('print.window_failed','Could not open print window. Please check your browser settings.');}else if(error.message.includes('Failed to download')){errorMessage=t('print.download_failed','Failed to download receipt file. Please try again.');}window.alert(errorMessage);}finally{setIsPrinting(false);setShowPrintOptions(false);}};if(showValidateOption&&onValidate){return/*#__PURE__*/_jsxs(\"div\",{className:\"print-button-container \".concat(className),children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>setShowPrintOptions(!showPrintOptions),disabled:disabled,children:showPrintOptions?t('button.hide_options','Hide Options'):t('button.show_options','Show Options')}),showPrintOptions&&/*#__PURE__*/_jsxs(\"div\",{className:\"print-options\",children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"small\",onClick:()=>handlePrint(true),disabled:disabled||isPrinting,children:isPrinting?t('button.processing','Processing...'):validateText}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false),disabled:disabled||isPrinting,children:isPrinting?t('button.preparing','Preparing...'):printText}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"small\",onClick:()=>handlePrint(false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.preparing','Preparing...'):t('button.print_thermal','Print (Thermal)')})]})]});}// Show different options for mobile vs desktop\nconst isMobile=isMobileDevice();if(isMobile){return/*#__PURE__*/_jsx(\"div\",{className:\"print-button-container \".concat(className),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'8px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"primary\",size:\"small\",onClick:()=>handlePrint(false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.printing','Printing...'):t('button.print_receipt','Print Receipt')}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"small\",onClick:()=>handlePrint(false,false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.downloading','Downloading...'):t('button.download_pdf','Download PDF')}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false,false,false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.loading','Loading...'):t('button.preview','Print Preview')}),showValidateOption&&onValidate&&/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(true,true),disabled:disabled||isPrinting,children:isPrinting?t('button.processing','Processing...'):validateText})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"print-button-container \".concat(className),children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.printing','Printing...'):printText}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"small\",onClick:()=>handlePrint(false,false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.downloading','Downloading...'):t('button.download_pdf','Download PDF')}),/*#__PURE__*/_jsx(Button,{variant:\"outline\",size:\"small\",onClick:()=>handlePrint(false,false,false,true),disabled:disabled||isPrinting,children:isPrinting?t('button.loading','Loading...'):t('button.preview','Print Preview')})]})});};export default PrintButton;","map":{"version":3,"names":["React","useState","useTranslation","Button","createThermalPrintDocument","detectPrinterType","mobilePrint","generateMobilePrintContent","generateXprinterPrintContent","downloadReceiptFile","generatePDFContent","generateESCPOSForReceiptApp","isMobileDevice","openPrintWindow","openPrintPreview","jsx","_jsx","jsxs","_jsxs","generateInventoryContent","data","t","products","Array","isArray","results","items","numberedKeys","Object","keys","filter","key","test","length","map","item","concat","Date","toLocaleDateString","toLocaleTimeString","slice","name","substring","sku","stock_quantity","parseFloat","price","toFixed","join","generatePurchaseOrderContent","_data$supplier","order_number","supplier","order_date","status","_item$product","product","quantity_ordered","unit_cost","total_amount","generateDeliveryContent","_data$purchase_order","delivery_number","purchase_order","delivery_date","_item$product2","product_name","quantity_received","delivered_quantity","generateSaleContent","paymentStatusText","payment_status","sale_number","customer_name","customer_phone","quantity_display","quantity","unit_price","total_price","paid_amount","remaining_amount","generateSalesHistoryContent","sales","totalRevenue","reduce","sum","sale","created_at","generatePackagingValidationContent","packaging_items","packaging_total","generateDefaultContent","generatePrintContent","title","type","currentDate","currentTime","content","PrintButton","_ref","onValidate","validateText","printText","className","disabled","showValidateOption","isPrinting","setIsPrinting","showPrintOptions","setShowPrintOptions","handlePrint","validateFirst","arguments","undefined","useThermalPrinter","useReceiptApp","usePreview","console","error","window","alert","printContent","isMobile","log","success","Error","previewSuccess","confirm","downloadSuccess","errorMessage","message","includes","children","variant","size","onClick","style","display","flexDirection","gap","flexWrap"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/components/PrintButton.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Button from './Button';\nimport { \n  createThermalPrintDocument, \n  detectPrinterType, \n  mobilePrint, \n  generateMobilePrintContent,\n  generateXprinterPrintContent,\n  downloadReceiptFile,\n  generatePDFContent,\n  generateESCPOSForReceiptApp,\n  isMobileDevice,\n  openPrintWindow,\n  openPrintPreview\n} from '../utils/printUtils';\nimport './PrintButton.css';\n\n// Helper functions for generating print content optimized for 80mm thermal printers\nconst generateInventoryContent = (data, t) => {\n  let products = data;\n  if (!Array.isArray(data)) {\n    if (data.results && Array.isArray(data.results)) {\n      products = data.results;\n    } else if (data.data && Array.isArray(data.data)) {\n      products = data.data;\n    } else if (data.items && Array.isArray(data.items)) {\n      products = data.items;\n    } else {\n      const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n      if (numberedKeys.length > 0) {\n        products = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n      } else {\n        products = [];\n      }\n    }\n  }\n\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">${t('titles.inventory_summary', 'INVENTORY SUMMARY')}</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">SUMMARY</div>\n      <div class=\"receipt-row\">\n        <span>Total Products:</span>\n        <span>${Array.isArray(products) ? products.length : 0}</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">PRODUCTS</div>\n      ${Array.isArray(products) ? products.slice(0, 20).map(item => `\n        <div class=\"product-item\">\n          <div class=\"product-name\">${(item.name || 'N/A').substring(0, 20)}</div>\n          <div class=\"product-details\">\n            <span>SKU: ${(item.sku || 'N/A').substring(0, 8)}</span>\n            <span>Qty: ${item.stock_quantity || 0}</span>\n            <span>${parseFloat(item.price || 0).toFixed(2)} MGA</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No products found</div>'}\n      ${Array.isArray(products) && products.length > 20 ? `\n        <div class=\"truncated-warning\">... and ${products.length - 20} more products</div>\n      ` : ''}\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">${t('footer.generated_by', 'Generated by ______ANTATSIMO______ System')}</div>\n    </div>\n  `;\n};\n\nconst generatePurchaseOrderContent = (data, t) => {\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">PURCHASE ORDER</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">ORDER INFO</div>\n      <div class=\"receipt-row\">\n        <span>Order No:</span>\n        <span>${data.order_number || 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Supplier:</span>\n        <span>${(data.supplier?.name || 'N/A').substring(0, 25)}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Date:</span>\n        <span>${data.order_date ? new Date(data.order_date).toLocaleDateString() : 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Status:</span>\n        <span>${data.status || 'N/A'}</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">ITEMS</div>\n      ${data.items ? data.items.slice(0, 15).map(item => `\n        <div class=\"order-item\">\n          <div class=\"item-name\">${(item.product?.name || 'N/A').substring(0, 25)}</div>\n          <div class=\"item-details\">\n            <span>${item.quantity_ordered || 0} x ${parseFloat(item.unit_cost || 0).toFixed(2)}</span>\n            <span>${parseFloat((item.quantity_ordered || 0) * (item.unit_cost || 0)).toFixed(2)} MGA</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No items found</div>'}\n    </div>\n    \n    <div class=\"receipt-total\">\n      <div class=\"total-row\">\n        <span>TOTAL AMOUNT:</span>\n        <span>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">End of Purchase Order</div>\n    </div>\n  `;\n};\n\nconst generateDeliveryContent = (data, t) => {\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">DELIVERY RECEIPT</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">DELIVERY INFO</div>\n      <div class=\"receipt-row\">\n        <span>Delivery No:</span>\n        <span>${data.delivery_number || 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>PO Number:</span>\n        <span>${data.purchase_order?.order_number || 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Date:</span>\n        <span>${data.delivery_date ? new Date(data.delivery_date).toLocaleDateString() : 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Status:</span>\n        <span>${data.status || 'N/A'}</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">ITEMS RECEIVED</div>\n      ${data.items ? data.items.slice(0, 15).map(item => `\n        <div class=\"delivery-item\">\n          <div class=\"item-name\">${(item.product_name || item.product?.name || 'N/A').substring(0, 25)}</div>\n          <div class=\"item-details\">\n            <span>${item.quantity_received || item.delivered_quantity || 0} x ${parseFloat(item.unit_cost || 0).toFixed(2)}</span>\n            <span>${parseFloat((item.quantity_received || item.delivered_quantity || 0) * (item.unit_cost || 0)).toFixed(2)} MGA</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No items found</div>'}\n    </div>\n    \n    <div class=\"receipt-total\">\n      <div class=\"total-row\">\n        <span>TOTAL AMOUNT:</span>\n        <span>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">Delivery completed</div>\n    </div>\n  `;\n};\n\nconst generateSaleContent = (data, t) => {\n  let items = data.items;\n  if (!items) {\n    const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n    if (numberedKeys.length > 0) {\n      items = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n    }\n  }\n\n  const paymentStatusText = data.payment_status === 'paid' ? t('payment_status.paid', 'PAID') : \n                          data.payment_status === 'partial' ? t('payment_status.partial_payment', 'PARTIAL') : \n                          data.payment_status === 'pending' ? t('payment_status.pending_payment', 'PENDING') : \n                          t('payment_status.unknown', 'UNKNOWN');\n\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">SALE RECEIPT</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">SALE INFO</div>\n      <div class=\"receipt-row\">\n        <span>Sale No:</span>\n        <span>${data.sale_number || 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Customer:</span>\n        <span>${(data.customer_name || t('customer.walk_in', 'Walk-in Customer')).substring(0, 25)}</span>\n      </div>\n      ${data.customer_phone ? `\n        <div class=\"receipt-row\">\n          <span>Phone:</span>\n          <span>${data.customer_phone}</span>\n        </div>\n      ` : ''}\n      <div class=\"receipt-row\">\n        <span>Status:</span>\n        <span>${paymentStatusText}</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">ITEMS SOLD</div>\n      ${items && Array.isArray(items) ? items.slice(0, 20).map(item => `\n        <div class=\"sale-item\">\n          <div class=\"item-name\">${(item.product_name || 'N/A').substring(0, 25)}</div>\n          <div class=\"item-details\">\n            <span>${item.quantity_display || item.quantity || 0} x ${parseFloat(item.unit_price || 0).toFixed(2)}</span>\n            <span>${parseFloat(item.total_price || 0).toFixed(2)} MGA</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No items found</div>'}\n    </div>\n    \n    <div class=\"receipt-totals\">\n      <div class=\"total-row\">\n        <span>Subtotal:</span>\n        <span>${parseFloat(data.total_amount || 0).toFixed(2)} MGA</span>\n      </div>\n      <div class=\"total-row\">\n        <span>Paid:</span>\n        <span>${parseFloat(data.paid_amount || 0).toFixed(2)} MGA</span>\n      </div>\n      ${data.payment_status === 'partial' ? `\n        <div class=\"total-row due-amount\">\n          <span>Due:</span>\n          <span>${parseFloat(data.remaining_amount || 0).toFixed(2)} MGA</span>\n        </div>\n      ` : ''}\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"thank-you\">${t('receipt.thank_you', 'Thank you for your business!')}</div>\n      <div class=\"footer-text\">${data.sale_number || ''}</div>\n    </div>\n  `;\n};\n\nconst generateSalesHistoryContent = (data, t) => {\n  let sales = data;\n  if (!Array.isArray(data)) {\n    if (data.results && Array.isArray(data.results)) {\n      sales = data.results;\n    } else if (data.data && Array.isArray(data.data)) {\n      sales = data.data;\n    } else if (data.items && Array.isArray(data.items)) {\n      sales = data.items;\n    } else {\n      const numberedKeys = Object.keys(data).filter(key => /^\\d+$/.test(key));\n      if (numberedKeys.length > 0) {\n        sales = numberedKeys.map(key => data[key]).filter(item => item && typeof item === 'object');\n      } else {\n        sales = [];\n      }\n    }\n  }\n\n  const totalRevenue = Array.isArray(sales) ? sales.reduce((sum, sale) => sum + parseFloat(sale.total_amount || 0), 0) : 0;\n\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">SALES REPORT</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">SUMMARY</div>\n      <div class=\"receipt-row\">\n        <span>Total Sales:</span>\n        <span>${Array.isArray(sales) ? sales.length : 0}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Total Revenue:</span>\n        <span>${totalRevenue.toFixed(2)} MGA</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">RECENT SALES</div>\n      ${Array.isArray(sales) ? sales.slice(0, 10).map(sale => `\n        <div class=\"sale-summary\">\n          <div class=\"sale-info\">\n            <span>${sale.sale_number || 'N/A'}</span>\n            <span>${parseFloat(sale.total_amount || 0).toFixed(2)} MGA</span>\n          </div>\n          <div class=\"sale-details\">\n            <span>${(sale.customer_name || t('customer.walk_in', 'Walk-in')).substring(0, 15)}</span>\n            <span>${sale.created_at ? new Date(sale.created_at).toLocaleDateString() : 'N/A'}</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No sales data</div>'}\n      ${Array.isArray(sales) && sales.length > 10 ? `\n        <div class=\"truncated-warning\">... and ${sales.length - 10} more sales</div>\n      ` : ''}\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">Sales report generated</div>\n    </div>\n  `;\n};\n\nconst generatePackagingValidationContent = (data, t) => {\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">PACKAGING VALIDATION</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">VALIDATION INFO</div>\n      <div class=\"receipt-row\">\n        <span>Sale No:</span>\n        <span>${data.sale_number || 'N/A'}</span>\n      </div>\n      <div class=\"receipt-row\">\n        <span>Customer:</span>\n        <span>${(data.customer_name || t('customer.walk_in', 'Walk-in Customer')).substring(0, 25)}</span>\n      </div>\n      ${data.customer_phone ? `\n        <div class=\"receipt-row\">\n          <span>Phone:</span>\n          <span>${data.customer_phone}</span>\n        </div>\n      ` : ''}\n      <div class=\"receipt-row\">\n        <span>Total Items:</span>\n        <span>${data.packaging_items ? data.packaging_items.length : 0}</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">PACKAGING ITEMS</div>\n      ${data.packaging_items && Array.isArray(data.packaging_items) ? data.packaging_items.slice(0, 15).map(item => `\n        <div class=\"packaging-item\">\n          <div class=\"item-name\">${(item.product_name || 'N/A').substring(0, 25)}</div>\n          <div class=\"item-details\">\n            <span>${item.quantity || 0} x ${parseFloat(item.unit_price || 0).toFixed(2)}</span>\n            <span>${parseFloat(item.total_price || 0).toFixed(2)} MGA</span>\n            <span class=\"status-${item.status}\">${item.status === 'consignation' ? 'PAID' : \n                   item.status === 'exchange' ? 'EXCH' : \n                   item.status === 'due' ? 'DUE' : item.status}</span>\n          </div>\n        </div>\n      `).join('') : '<div class=\"no-data\">No packaging items</div>'}\n    </div>\n    \n    <div class=\"receipt-total\">\n      <div class=\"total-row\">\n        <span>PACKAGING TOTAL:</span>\n        <span>${parseFloat(data.packaging_total || 0).toFixed(2)} MGA</span>\n      </div>\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">Packaging validation completed</div>\n    </div>\n  `;\n};\n\nconst generateDefaultContent = (data, t) => {\n  return `\n    <div class=\"receipt-header\">\n      <div class=\"company-name\">${t('company.name', '______ANTATSIMO______')}</div>\n      <div class=\"document-title\">DOCUMENT</div>\n      <div class=\"receipt-date\">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</div>\n    </div>\n    \n    <div class=\"receipt-section\">\n      <div class=\"section-title\">CONTENT</div>\n      <div class=\"default-content\">\n        Document generated successfully\n      </div>\n    </div>\n    \n    <div class=\"receipt-footer\">\n      <div class=\"footer-text\">Document printed</div>\n    </div>\n  `;\n};\n\n// Export the generatePrintContent function\nexport const generatePrintContent = (data, title, type, t) => {\n  const currentDate = new Date().toLocaleDateString();\n  const currentTime = new Date().toLocaleTimeString();\n  \n  let content = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>${title}</title>\n      <meta charset=\"UTF-8\">\n      <style>\n        /* 80mm Thermal Printer Receipt Styles */\n        * {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n        \n        body {\n          font-family: 'Courier New', Courier, monospace;\n          font-size: 12px;\n          line-height: 1.2;\n          color: #000;\n          width: 80mm;\n          max-width: 80mm;\n          margin: 0 auto;\n          padding: 3mm;\n          background: white;\n        }\n        \n        .receipt-header {\n          text-align: center;\n          margin-bottom: 8px;\n          padding-bottom: 6px;\n          border-bottom: 1px dashed #000;\n        }\n        \n        .company-name {\n          font-weight: bold;\n          font-size: 14px;\n          margin-bottom: 2px;\n          text-transform: uppercase;\n        }\n        \n        .document-title {\n          font-weight: bold;\n          font-size: 13px;\n          margin-bottom: 3px;\n          text-transform: uppercase;\n        }\n        \n        .receipt-date {\n          font-size: 11px;\n          color: #555;\n        }\n        \n        .receipt-section {\n          margin-bottom: 8px;\n          padding-bottom: 6px;\n          border-bottom: 1px dotted #ccc;\n        }\n        \n        .section-title {\n          font-weight: bold;\n          font-size: 11px;\n          margin-bottom: 4px;\n          text-transform: uppercase;\n          background: #f0f0f0;\n          padding: 2px 4px;\n        }\n        \n        .receipt-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n          font-size: 11px;\n        }\n        \n        .product-item,\n        .order-item,\n        .delivery-item,\n        .sale-item,\n        .packaging-item,\n        .sale-summary {\n          margin-bottom: 4px;\n          padding: 2px 0;\n        }\n        \n        .product-name,\n        .item-name {\n          font-weight: bold;\n          margin-bottom: 1px;\n          word-wrap: break-word;\n        }\n        \n        .product-details,\n        .item-details,\n        .sale-info {\n          display: flex;\n          justify-content: space-between;\n          font-size: 10px;\n          color: #555;\n        }\n        \n        .receipt-totals,\n        .receipt-total {\n          margin: 8px 0;\n          padding-top: 6px;\n          border-top: 2px solid #000;\n        }\n        \n        .total-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n          font-weight: bold;\n        }\n        \n        .due-amount {\n          color: #d00;\n        }\n        \n        .no-data {\n          text-align: center;\n          color: #888;\n          font-style: italic;\n          padding: 8px 0;\n        }\n        \n        .truncated-warning {\n          text-align: center;\n          color: #888;\n          font-size: 10px;\n          font-style: italic;\n          margin-top: 4px;\n        }\n        \n        .thank-you {\n          text-align: center;\n          font-weight: bold;\n          margin: 6px 0;\n        }\n        \n        .receipt-footer {\n          text-align: center;\n          margin-top: 10px;\n          padding-top: 6px;\n          border-top: 1px dashed #000;\n          font-size: 10px;\n          color: #666;\n        }\n        \n        .footer-text {\n          margin-bottom: 2px;\n        }\n        \n        .status-consignation { color: #090; }\n        .status-exchange { color: #009; }\n        .status-due { color: #d00; font-weight: bold; }\n        \n        /* Print-specific styles */\n        @media print {\n          body {\n            margin: 0;\n            padding: 2mm;\n            width: 80mm;\n          }\n          \n          .no-print {\n            display: none;\n          }\n          \n          /* Ensure proper sizing for thermal paper */\n          @page {\n            size: 80mm auto;\n            margin: 0;\n          }\n        }\n        \n        /* Force monospace and proper breaking */\n        * {\n          font-family: 'Courier New', Courier, monospace !important;\n        }\n        \n        .default-content {\n          text-align: center;\n          padding: 10px 0;\n          color: #666;\n        }\n      </style>\n    </head>\n    <body>\n  `;\n\n  // Add type-specific content\n  switch (type) {\n    case 'inventory':\n      content += generateInventoryContent(data, t);\n      break;\n    case 'purchase_order':\n      content += generatePurchaseOrderContent(data, t);\n      break;\n    case 'delivery':\n      content += generateDeliveryContent(data, t);\n      break;\n    case 'sale':\n      content += generateSaleContent(data, t);\n      break;\n    case 'sales_history':\n      content += generateSalesHistoryContent(data, t);\n      break;\n    case 'packaging_validation':\n      content += generatePackagingValidationContent(data, t);\n      break;\n    default:\n      content += generateDefaultContent(data, t);\n  }\n\n  content += `\n    </body>\n    </html>\n  `;\n\n  return content;\n};\n\nconst PrintButton = ({ \n  data, \n  title, \n  type = 'default', \n  onValidate = null, \n  validateText = 'Validate & Print',\n  printText = 'Print',\n  className = '',\n  disabled = false,\n  showValidateOption = false\n}) => {\n  const { t } = useTranslation();\n  const [isPrinting, setIsPrinting] = useState(false);\n  const [showPrintOptions, setShowPrintOptions] = useState(false);\n\n  const handlePrint = async (validateFirst = false, useThermalPrinter = false, useReceiptApp = false, usePreview = false) => {\n    // Validate data structure\n    if (!data) {\n      console.error('No data provided to PrintButton');\n      window.alert(t('print.no_data', 'No data available to print.'));\n      return;\n    }\n\n    if (validateFirst && onValidate) {\n      try {\n        await onValidate();\n      } catch (error) {\n        console.error('Validation failed:', error);\n        return;\n      }\n    }\n\n    setIsPrinting(true);\n    \n    try {\n      let printContent;\n      const isMobile = isMobileDevice();\n      \n      // Handle receipt app integration\n      if (useReceiptApp) {\n        console.log('Attempting to download receipt file...', { data, title });\n        const success = downloadReceiptFile(data, title);\n        console.log('Download result:', success);\n        if (success) {\n          window.alert(t('print.pdf_downloaded', 'Receipt PDF downloaded! You can now open it with any PDF viewer or receipt printer app to print directly to your Xprinter.'));\n          return;\n        } else {\n          throw new Error('Failed to download receipt file.');\n        }\n      }\n      \n      // Generate appropriate content based on device and printer type\n      if (useThermalPrinter || isMobile) {\n        // Use Xprinter-optimized content for better compatibility\n        printContent = generateXprinterPrintContent(data, title, type, t);\n      } else {\n        printContent = generatePrintContent(data, title, type, t);\n      }\n      \n      // Handle print preview\n      if (usePreview) {\n        const previewSuccess = openPrintPreview(printContent, title);\n        if (previewSuccess) {\n          return;\n        } else {\n          throw new Error('Failed to open print preview window.');\n        }\n      }\n      \n      // Use mobile-friendly printing for mobile devices\n      if (isMobile) {\n        const success = await mobilePrint(printContent, title);\n        if (!success) {\n          // If mobile printing fails, offer receipt app option\n          const useReceiptApp = window.confirm(t('print.mobile_failed_offer_app', 'Mobile printing failed. Would you like to download a file for receipt printer apps instead?'));\n          if (useReceiptApp) {\n            const downloadSuccess = downloadReceiptFile(data, title);\n            if (downloadSuccess) {\n              window.alert(t('print.pdf_downloaded', 'Receipt PDF downloaded! You can now open it with any PDF viewer or receipt printer app to print directly to your Xprinter.'));\n              return;\n            }\n          }\n          throw new Error('Mobile printing failed. Please try again or check your printer connection.');\n        }\n      } else {\n        // Desktop printing with enhanced error handling\n        // Try print preview first for better visibility\n        const previewSuccess = openPrintPreview(printContent, title);\n        if (previewSuccess) {\n          // Preview opened successfully, user can print from there\n          return;\n        } else {\n          // Fallback to direct print window\n          const success = await openPrintWindow(printContent, title);\n          if (!success) {\n            throw new Error('Failed to open print window. Please check popup blockers and try again.');\n          }\n        }\n      }\n      \n    } catch (error) {\n      console.error('Print error:', error);\n      \n      // Provide more specific error messages\n      let errorMessage = t('print.failed', 'Failed to print. Please try again.');\n      \n      if (error.message.includes('popup')) {\n        errorMessage = t('print.popup_blocked', 'Popup blocked. Please allow popups for this site and try again.');\n      } else if (error.message.includes('Mobile printing failed')) {\n        errorMessage = t('print.mobile_failed', 'Mobile printing failed. Please check your printer connection and try again.');\n      } else if (error.message.includes('window.open')) {\n        errorMessage = t('print.window_failed', 'Could not open print window. Please check your browser settings.');\n      } else if (error.message.includes('Failed to download')) {\n        errorMessage = t('print.download_failed', 'Failed to download receipt file. Please try again.');\n      }\n      \n      window.alert(errorMessage);\n    } finally {\n      setIsPrinting(false);\n      setShowPrintOptions(false);\n    }\n  };\n\n  if (showValidateOption && onValidate) {\n    return (\n      <div className={`print-button-container ${className}`}>\n        <Button\n          variant=\"outline\"\n          size=\"small\"\n          onClick={() => setShowPrintOptions(!showPrintOptions)}\n          disabled={disabled}\n        >\n          {showPrintOptions ? t('button.hide_options', 'Hide Options') : t('button.show_options', 'Show Options')}\n        </Button>\n        {showPrintOptions && (\n          <div className=\"print-options\">\n            <Button\n              variant=\"primary\"\n              size=\"small\"\n              onClick={() => handlePrint(true)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? t('button.processing', 'Processing...') : validateText}\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"small\"\n              onClick={() => handlePrint(false)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? t('button.preparing', 'Preparing...') : printText}\n            </Button>\n            <Button\n              variant=\"secondary\"\n              size=\"small\"\n              onClick={() => handlePrint(false, true)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? t('button.preparing', 'Preparing...') : t('button.print_thermal', 'Print (Thermal)')}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Show different options for mobile vs desktop\n  const isMobile = isMobileDevice();\n  \n  if (isMobile) {\n    return (\n      <div className={`print-button-container ${className}`}>\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n          <Button\n            variant=\"primary\"\n            size=\"small\"\n            onClick={() => handlePrint(false, true)}\n            disabled={disabled || isPrinting}\n          >\n            {isPrinting ? t('button.printing', 'Printing...') : t('button.print_receipt', 'Print Receipt')}\n          </Button>\n          \n          <Button\n            variant=\"secondary\"\n            size=\"small\"\n            onClick={() => handlePrint(false, false, true)}\n            disabled={disabled || isPrinting}\n          >\n            {isPrinting ? t('button.downloading', 'Downloading...') : t('button.download_pdf', 'Download PDF')}\n          </Button>\n          \n          <Button\n            variant=\"outline\"\n            size=\"small\"\n            onClick={() => handlePrint(false, false, false, true)}\n            disabled={disabled || isPrinting}\n          >\n            {isPrinting ? t('button.loading', 'Loading...') : t('button.preview', 'Print Preview')}\n          </Button>\n          \n          {showValidateOption && onValidate && (\n            <Button\n              variant=\"outline\"\n              size=\"small\"\n              onClick={() => handlePrint(true, true)}\n              disabled={disabled || isPrinting}\n            >\n              {isPrinting ? t('button.processing', 'Processing...') : validateText}\n            </Button>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`print-button-container ${className}`}>\n      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n        <Button\n          variant=\"outline\"\n          size=\"small\"\n          onClick={() => handlePrint(false, true)}\n          disabled={disabled || isPrinting}\n        >\n          {isPrinting ? t('button.printing', 'Printing...') : printText}\n        </Button>\n        \n        <Button\n          variant=\"secondary\"\n          size=\"small\"\n          onClick={() => handlePrint(false, false, true)}\n          disabled={disabled || isPrinting}\n        >\n          {isPrinting ? t('button.downloading', 'Downloading...') : t('button.download_pdf', 'Download PDF')}\n        </Button>\n        \n        <Button\n          variant=\"outline\"\n          size=\"small\"\n          onClick={() => handlePrint(false, false, false, true)}\n          disabled={disabled || isPrinting}\n        >\n          {isPrinting ? t('button.loading', 'Loading...') : t('button.preview', 'Print Preview')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default PrintButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}