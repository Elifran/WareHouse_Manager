{"ast":null,"code":"import _objectSpread from\"/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useTranslation}from'react-i18next';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import Button from'../components/Button';import'./PackagingManagement.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PackagingManagement=()=>{const{t}=useTranslation();const{user}=useAuth();const[transactions,setTransactions]=useState([]);const[filteredTransactions,setFilteredTransactions]=useState([]);const[sales,setSales]=useState([]);const[filteredSales,setFilteredSales]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[showCreateForm,setShowCreateForm]=useState(false);const[showPaymentForm,setShowPaymentForm]=useState(false);const[showSettleForm,setShowSettleForm]=useState(false);const[showDetailsModal,setShowDetailsModal]=useState(false);const[selectedTransaction,setSelectedTransaction]=useState(null);const[transactionDetails,setTransactionDetails]=useState(null);const[statistics,setStatistics]=useState({});// Pagination states\nconst[currentTransactionPage,setCurrentTransactionPage]=useState(1);const[currentSalePage,setCurrentSalePage]=useState(1);const itemsPerPage=10;// Filter states\nconst[transactionFilters,setTransactionFilters]=useState({search:'',status:'',paymentStatus:'',startDate:'',endDate:'',transactionType:''});const[saleFilters,setSaleFilters]=useState({search:'',status:'',startDate:'',endDate:''});// Form data\nconst[formData,setFormData]=useState({transaction_type:'consignation',sale:'',customer_name:'',customer_phone:'',customer_email:'',payment_method:'cash',status:'active',notes:'',items:[]});const[paymentData,setPaymentData]=useState({amount:0,payment_method:'cash',notes:''});const[settleData,setSettleData]=useState({settlement_type:'return',notes:''});useEffect(()=>{fetchTransactions();fetchSales();fetchStatistics();},[]);useEffect(()=>{applyTransactionFilters();},[transactions,transactionFilters]);useEffect(()=>{applySaleFilters();},[sales,saleFilters]);const fetchTransactions=async()=>{try{setLoading(true);const response=await api.get('/api/packaging/transactions/');setTransactions(response.data.results||response.data);}catch(err){setError('Failed to load packaging transactions');console.error('Error fetching transactions:',err);}finally{setLoading(false);}};const fetchTransactionDetails=async transactionId=>{try{const response=await api.get(\"/api/packaging/transactions/\".concat(transactionId,\"/\"));setTransactionDetails(response.data);return response.data;}catch(err){setError('Failed to load transaction details');console.error('Error fetching transaction details:',err);return null;}};const fetchSales=async()=>{try{const response=await api.get('/api/sales/');setSales(response.data.results||response.data);}catch(err){console.error('Error fetching sales:',err);}};const fetchStatistics=async()=>{try{const response=await api.get('/api/packaging/statistics/');setStatistics(response.data);}catch(err){console.error('Error fetching statistics:',err);}};// Filter functions\nconst applyTransactionFilters=()=>{let filtered=[...transactions];// Search filter\nif(transactionFilters.search){const searchLower=transactionFilters.search.toLowerCase();filtered=filtered.filter(transaction=>{var _transaction$transact,_transaction$customer,_transaction$sale_num;return((_transaction$transact=transaction.transaction_number)===null||_transaction$transact===void 0?void 0:_transaction$transact.toLowerCase().includes(searchLower))||((_transaction$customer=transaction.customer_name)===null||_transaction$customer===void 0?void 0:_transaction$customer.toLowerCase().includes(searchLower))||((_transaction$sale_num=transaction.sale_number)===null||_transaction$sale_num===void 0?void 0:_transaction$sale_num.toLowerCase().includes(searchLower));});}// Status filter\nif(transactionFilters.status){filtered=filtered.filter(transaction=>transaction.status===transactionFilters.status);}// Payment status filter\nif(transactionFilters.paymentStatus){filtered=filtered.filter(transaction=>transaction.payment_status===transactionFilters.paymentStatus);}// Transaction type filter\nif(transactionFilters.transactionType){filtered=filtered.filter(transaction=>transaction.transaction_type===transactionFilters.transactionType);}// Date range filter\nif(transactionFilters.startDate){filtered=filtered.filter(transaction=>new Date(transaction.created_at)>=new Date(transactionFilters.startDate));}if(transactionFilters.endDate){filtered=filtered.filter(transaction=>new Date(transaction.created_at)<=new Date(transactionFilters.endDate+'T23:59:59'));}setFilteredTransactions(filtered);setCurrentTransactionPage(1);// Reset to first page when filters change\n};const applySaleFilters=()=>{let filtered=sales.filter(sale=>sale.packaging_items&&sale.packaging_items.length>0);// Search filter\nif(saleFilters.search){const searchLower=saleFilters.search.toLowerCase();filtered=filtered.filter(sale=>{var _sale$sale_number,_sale$customer_name;return((_sale$sale_number=sale.sale_number)===null||_sale$sale_number===void 0?void 0:_sale$sale_number.toLowerCase().includes(searchLower))||((_sale$customer_name=sale.customer_name)===null||_sale$customer_name===void 0?void 0:_sale$customer_name.toLowerCase().includes(searchLower));});}// Status filter\nif(saleFilters.status){filtered=filtered.filter(sale=>sale.status===saleFilters.status);}// Date range filter\nif(saleFilters.startDate){filtered=filtered.filter(sale=>new Date(sale.created_at)>=new Date(saleFilters.startDate));}if(saleFilters.endDate){filtered=filtered.filter(sale=>new Date(sale.created_at)<=new Date(saleFilters.endDate+'T23:59:59'));}setFilteredSales(filtered);setCurrentSalePage(1);// Reset to first page when filters change\n};const handleTransactionFilterChange=(key,value)=>{setTransactionFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:value}));};const handleSaleFilterChange=(key,value)=>{setSaleFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:value}));};const clearTransactionFilters=()=>{setTransactionFilters({search:'',status:'',paymentStatus:'',startDate:'',endDate:'',transactionType:''});};const clearSaleFilters=()=>{setSaleFilters({search:'',status:'',startDate:'',endDate:''});};const handleViewDetails=async transaction=>{try{setSelectedTransaction(transaction);setLoading(true);const details=await fetchTransactionDetails(transaction.id);if(details){setTransactionDetails(details);setShowDetailsModal(true);}}catch(err){setError('Failed to load transaction details');}finally{setLoading(false);}};// Pagination calculations\nconst getCurrentTransactions=()=>{const startIndex=(currentTransactionPage-1)*itemsPerPage;const endIndex=startIndex+itemsPerPage;return filteredTransactions.slice(startIndex,endIndex);};const getCurrentSales=()=>{const startIndex=(currentSalePage-1)*itemsPerPage;const endIndex=startIndex+itemsPerPage;return filteredSales.slice(startIndex,endIndex);};const getTotalTransactionPages=()=>{return Math.ceil(filteredTransactions.length/itemsPerPage);};const getTotalSalePages=()=>{return Math.ceil(filteredSales.length/itemsPerPage);};const handleMakePayment=async()=>{try{setError('');setSuccess('');if(!selectedTransaction||!paymentData.amount){setError('Please select a transaction and enter payment amount');return;}await api.post(\"/api/packaging/transactions/\".concat(selectedTransaction.id,\"/payments/\"),paymentData);setSuccess('Payment processed successfully');setPaymentData({amount:0,payment_method:'cash',notes:''});setShowPaymentForm(false);setSelectedTransaction(null);fetchTransactions();fetchStatistics();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to process payment');console.error('Error processing payment:',err);}};const handleSettleTransaction=async()=>{try{setError('');setSuccess('');if(!selectedTransaction){setError('Please select a transaction to settle');return;}await api.post(\"/api/packaging/transactions/\".concat(selectedTransaction.id,\"/settle/\"),settleData);setSuccess('Packaging transaction settled successfully');setSettleData({settlement_type:'return',notes:''});setShowSettleForm(false);setSelectedTransaction(null);fetchTransactions();fetchStatistics();}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.error)||'Failed to settle transaction');console.error('Error settling transaction:',err);}};const formatCurrency=amount=>{return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'}).format(amount);};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const formatDateTime=dateString=>{return new Date(dateString).toLocaleString();};const getStatusBadge=status=>{const statusClasses={active:'status-active',completed:'status-completed',cancelled:'status-cancelled'};return/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(statusClasses[status]||''),children:status});};const getPaymentStatusBadge=paymentStatus=>{const paymentClasses={pending:'payment-pending',partial:'payment-partial',paid:'payment-paid',refunded:'payment-refunded'};const paymentLabels={pending:'Unpaid',partial:'Partial',paid:'Paid',refunded:'Refunded'};return/*#__PURE__*/_jsx(\"span\",{className:\"payment-badge \".concat(paymentClasses[paymentStatus]||''),children:paymentLabels[paymentStatus]||paymentStatus});};if(loading&&!showDetailsModal){return/*#__PURE__*/_jsx(\"div\",{className:\"packaging-management\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading packaging transactions...\"})});}const currentTransactions=getCurrentTransactions();const currentSales=getCurrentSales();const totalTransactionPages=getTotalTransactionPages();const totalSalePages=getTotalSalePages();const hasActiveTransactionFilters=Object.values(transactionFilters).some(value=>value!=='');const hasActiveSaleFilters=Object.values(saleFilters).some(value=>value!=='');return/*#__PURE__*/_jsxs(\"div\",{className:\"packaging-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Packaging Management\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:/*#__PURE__*/_jsx(\"div\",{className:\"info-text\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Packaging transactions are automatically created when sales are completed\"})})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"statistics-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Transactions\"}),/*#__PURE__*/_jsx(\"p\",{children:statistics.total_transactions||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Active Transactions\"}),/*#__PURE__*/_jsx(\"p\",{children:statistics.active_transactions||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"p\",{children:formatCurrency(statistics.total_amount||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Paid Amount\"}),/*#__PURE__*/_jsx(\"p\",{children:formatCurrency(statistics.paid_amount||0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Remaining Amount\"}),/*#__PURE__*/_jsx(\"p\",{children:formatCurrency(statistics.remaining_amount||0)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transactions-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Packaging Transactions\"}),totalTransactionPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-info\",children:[\"Page \",currentTransactionPage,\" of \",totalTransactionPages,\"(\",filteredTransactions.length,\" filtered of \",transactions.length,\" total)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),hasActiveTransactionFilters&&/*#__PURE__*/_jsx(Button,{onClick:clearTransactionFilters,variant:\"text\",size:\"small\",children:\"Clear All Filters\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by transaction, customer, or sale...\",value:transactionFilters.search,onChange:e=>handleTransactionFilterChange('search',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:transactionFilters.status,onChange:e=>handleTransactionFilterChange('status',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:transactionFilters.paymentStatus,onChange:e=>handleTransactionFilterChange('paymentStatus',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Payment Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Unpaid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"partial\",children:\"Partial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"paid\",children:\"Paid\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refunded\",children:\"Refunded\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Transaction Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:transactionFilters.transactionType,onChange:e=>handleTransactionFilterChange('transactionType',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"consignation\",children:\"Consignation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"exchange\",children:\"Exchange\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:transactionFilters.startDate,onChange:e=>handleTransactionFilterChange('startDate',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:transactionFilters.endDate,onChange:e=>handleTransactionFilterChange('endDate',e.target.value)})]})]})]}),filteredTransactions.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:transactions.length===0?'No packaging transactions found':'No transactions match your filters'}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"transactions-list\",children:currentTransactions.map(transaction=>/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:transaction.transaction_number}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Sale: \",transaction.sale_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Customer: \",transaction.customer_name||'N/A']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-status\",children:[getStatusBadge(transaction.status),getPaymentStatusBadge(transaction.payment_status)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Type:\"}),/*#__PURE__*/_jsx(\"span\",{children:transaction.transaction_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(transaction.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Paid Amount:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(transaction.paid_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Remaining:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatCurrency(transaction.remaining_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(transaction.created_at)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-actions\",children:[transaction.remaining_amount>0&&/*#__PURE__*/_jsx(Button,{onClick:()=>{setSelectedTransaction(transaction);setPaymentData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:transaction.remaining_amount}));setShowPaymentForm(true);},variant:\"primary\",size:\"small\",children:\"Make Payment\"}),transaction.status==='active'&&/*#__PURE__*/_jsx(Button,{onClick:()=>{setSelectedTransaction(transaction);setSettleData({settlement_type:'return',notes:''});setShowSettleForm(true);},variant:\"success\",size:\"small\",children:\"Settle\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleViewDetails(transaction),variant:\"secondary\",size:\"small\",children:\"View Details\"})]})]},transaction.id))}),totalTransactionPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentTransactionPage(prev=>Math.max(prev-1,1)),disabled:currentTransactionPage===1,variant:\"secondary\",size:\"small\",children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"page-indicator\",children:[\"Page \",currentTransactionPage,\" of \",totalTransactionPages]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentTransactionPage(prev=>Math.min(prev+1,totalTransactionPages)),disabled:currentTransactionPage===totalTransactionPages,variant:\"secondary\",size:\"small\",children:\"Next\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sales-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sales with Packaging\"}),totalSalePages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-info\",children:[\"Page \",currentSalePage,\" of \",totalSalePages,\"(\",filteredSales.length,\" filtered)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filters\"}),hasActiveSaleFilters&&/*#__PURE__*/_jsx(Button,{onClick:clearSaleFilters,variant:\"text\",size:\"small\",children:\"Clear All Filters\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Search\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by sale number or customer...\",value:saleFilters.search,onChange:e=>handleSaleFilterChange('search',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:saleFilters.status,onChange:e=>handleSaleFilterChange('status',e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cancelled\",children:\"Cancelled\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:saleFilters.startDate,onChange:e=>handleSaleFilterChange('startDate',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:saleFilters.endDate,onChange:e=>handleSaleFilterChange('endDate',e.target.value)})]})]})]}),filteredSales.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:sales.filter(s=>s.packaging_items&&s.packaging_items.length>0).length===0?'No sales with packaging found':'No sales match your filters'}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"sales-list\",children:currentSales.map(sale=>/*#__PURE__*/_jsxs(\"div\",{className:\"sale-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sale-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sale-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:sale.sale_number}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Customer: \",sale.customer_name||'Walk-in Customer']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Date: \",formatDate(sale.created_at)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",sale.status]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"packaging-summary\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Packaging Items (\",sale.packaging_items.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"packaging-items\",children:sale.packaging_items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"packaging-item\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[item.product_name,\" x \",item.quantity,\" = \",formatCurrency(item.total_price)]}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(item.status),children:item.status})]},index))}),sale.status==='completed'&&/*#__PURE__*/_jsx(\"div\",{className:\"auto-created-notice\",children:/*#__PURE__*/_jsx(\"small\",{children:\"\\u2705 Packaging transaction automatically created\"})})]})]},sale.id))}),totalSalePages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-controls\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentSalePage(prev=>Math.max(prev-1,1)),disabled:currentSalePage===1,variant:\"secondary\",size:\"small\",children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"page-indicator\",children:[\"Page \",currentSalePage,\" of \",totalSalePages]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentSalePage(prev=>Math.min(prev+1,totalSalePages)),disabled:currentSalePage===totalSalePages,variant:\"secondary\",size:\"small\",children:\"Next\"})]})]})]}),showDetailsModal&&selectedTransaction&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content large-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Transaction Details - \",selectedTransaction.transaction_number]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailsModal(false),className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading details...\"}):transactionDetails?/*#__PURE__*/_jsxs(\"div\",{className:\"transaction-details-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Basic Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"details-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Transaction Number:\"}),/*#__PURE__*/_jsx(\"span\",{children:transactionDetails.transaction_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sale Number:\"}),/*#__PURE__*/_jsx(\"span\",{children:transactionDetails.sale_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer:\"}),/*#__PURE__*/_jsx(\"span\",{children:transactionDetails.customer_name||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Transaction Type:\"}),/*#__PURE__*/_jsx(\"span\",{children:transactionDetails.transaction_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status:\"}),/*#__PURE__*/_jsx(\"span\",{children:getStatusBadge(transactionDetails.status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Status:\"}),/*#__PURE__*/_jsx(\"span\",{children:getPaymentStatusBadge(transactionDetails.payment_status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Created Date:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDateTime(transactionDetails.created_at)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Updated:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDateTime(transactionDetails.updated_at)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Financial Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"financial-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"financial-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"amount\",children:formatCurrency(transactionDetails.total_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"financial-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Paid Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"amount paid\",children:formatCurrency(transactionDetails.paid_amount)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"financial-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Remaining Amount:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"amount remaining\",children:formatCurrency(transactionDetails.remaining_amount)})]})]})]}),transactionDetails.items&&transactionDetails.items.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Packaging Items (\",transactionDetails.items.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Unit Price\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Total Price\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Status\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-body\",children:transactionDetails.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:item.product_name}),/*#__PURE__*/_jsx(\"div\",{children:item.quantity}),/*#__PURE__*/_jsx(\"div\",{children:formatCurrency(item.unit_price)}),/*#__PURE__*/_jsx(\"div\",{children:formatCurrency(item.total_price)}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(item.status),children:item.status})})]},index))})]})]}),transactionDetails.payments&&transactionDetails.payments.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Payment History (\",transactionDetails.payments.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"items-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Method\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Notes\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-body\",children:transactionDetails.payments.map((payment,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"table-row\",children:[/*#__PURE__*/_jsx(\"div\",{children:formatDateTime(payment.created_at)}),/*#__PURE__*/_jsx(\"div\",{children:formatCurrency(payment.amount)}),/*#__PURE__*/_jsx(\"div\",{children:payment.payment_method}),/*#__PURE__*/_jsx(\"div\",{children:payment.notes||'-'})]},index))})]})]}),transactionDetails.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"details-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-content\",children:transactionDetails.notes})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:\"Failed to load transaction details\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\",children:/*#__PURE__*/_jsx(Button,{onClick:()=>setShowDetailsModal(false),variant:\"secondary\",children:\"Close\"})})]})}),showPaymentForm&&selectedTransaction&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Make Payment\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPaymentForm(false),className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Transaction:\"}),\" \",selectedTransaction.transaction_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",selectedTransaction.customer_name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" \",formatCurrency(selectedTransaction.total_amount)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paid Amount:\"}),\" \",formatCurrency(selectedTransaction.paid_amount)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Remaining:\"}),\" \",formatCurrency(selectedTransaction.remaining_amount)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Amount *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",min:\"0.01\",max:selectedTransaction.remaining_amount,value:paymentData.amount,onChange:e=>setPaymentData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:parseFloat(e.target.value)})),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentData.payment_method,onChange:e=>setPaymentData(prev=>_objectSpread(_objectSpread({},prev),{},{payment_method:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"cash\",children:\"Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"card\",children:\"Card\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mobile_money\",children:\"Mobile Money\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bank_transfer\",children:\"Bank Transfer\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:paymentData.notes,onChange:e=>setPaymentData(prev=>_objectSpread(_objectSpread({},prev),{},{notes:e.target.value})),rows:\"3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(Button,{onClick:handleMakePayment,variant:\"primary\",children:\"Process Payment\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowPaymentForm(false),variant:\"secondary\",children:\"Cancel\"})]})]})}),showSettleForm&&selectedTransaction&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settle Packaging Transaction\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettleForm(false),className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"payment-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Transaction:\"}),\" \",selectedTransaction.transaction_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",selectedTransaction.customer_name||'N/A']}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Sale:\"}),\" \",selectedTransaction.sale_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"}),\" \",formatCurrency(selectedTransaction.total_amount)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paid Amount:\"}),\" \",formatCurrency(selectedTransaction.paid_amount)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Remaining:\"}),\" \",formatCurrency(selectedTransaction.remaining_amount)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Settlement Type *\"}),/*#__PURE__*/_jsxs(\"select\",{value:settleData.settlement_type,onChange:e=>setSettleData(prev=>_objectSpread(_objectSpread({},prev),{},{settlement_type:e.target.value})),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"return\",children:\"Packaging Returned\"}),/*#__PURE__*/_jsx(\"option\",{value:\"refund\",children:\"Deposit Refunded\"})]}),/*#__PURE__*/_jsx(\"small\",{children:settleData.settlement_type==='return'?'Customer returned the packaging items':'Customer received refund for packaging deposit'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:settleData.notes,onChange:e=>setSettleData(prev=>_objectSpread(_objectSpread({},prev),{},{notes:e.target.value})),rows:\"3\",placeholder:\"Additional notes about the settlement...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"settlement-warning\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Warning:\"}),\" This action will mark the packaging transaction as completed and cannot be undone.\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(Button,{onClick:handleSettleTransaction,variant:\"success\",children:\"Settle Transaction\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowSettleForm(false),variant:\"secondary\",children:\"Cancel\"})]})]})})]});};export default PackagingManagement;","map":{"version":3,"names":["React","useState","useEffect","useTranslation","useAuth","api","Button","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PackagingManagement","t","user","transactions","setTransactions","filteredTransactions","setFilteredTransactions","sales","setSales","filteredSales","setFilteredSales","loading","setLoading","error","setError","success","setSuccess","showCreateForm","setShowCreateForm","showPaymentForm","setShowPaymentForm","showSettleForm","setShowSettleForm","showDetailsModal","setShowDetailsModal","selectedTransaction","setSelectedTransaction","transactionDetails","setTransactionDetails","statistics","setStatistics","currentTransactionPage","setCurrentTransactionPage","currentSalePage","setCurrentSalePage","itemsPerPage","transactionFilters","setTransactionFilters","search","status","paymentStatus","startDate","endDate","transactionType","saleFilters","setSaleFilters","formData","setFormData","transaction_type","sale","customer_name","customer_phone","customer_email","payment_method","notes","items","paymentData","setPaymentData","amount","settleData","setSettleData","settlement_type","fetchTransactions","fetchSales","fetchStatistics","applyTransactionFilters","applySaleFilters","response","get","data","results","err","console","fetchTransactionDetails","transactionId","concat","filtered","searchLower","toLowerCase","filter","transaction","_transaction$transact","_transaction$customer","_transaction$sale_num","transaction_number","includes","sale_number","payment_status","Date","created_at","packaging_items","length","_sale$sale_number","_sale$customer_name","handleTransactionFilterChange","key","value","prev","_objectSpread","handleSaleFilterChange","clearTransactionFilters","clearSaleFilters","handleViewDetails","details","id","getCurrentTransactions","startIndex","endIndex","slice","getCurrentSales","getTotalTransactionPages","Math","ceil","getTotalSalePages","handleMakePayment","post","_err$response","_err$response$data","handleSettleTransaction","_err$response2","_err$response2$data","formatCurrency","Intl","NumberFormat","style","currency","format","formatDate","dateString","toLocaleDateString","formatDateTime","toLocaleString","getStatusBadge","statusClasses","active","completed","cancelled","className","children","getPaymentStatusBadge","paymentClasses","pending","partial","paid","refunded","paymentLabels","currentTransactions","currentSales","totalTransactionPages","totalSalePages","hasActiveTransactionFilters","Object","values","some","hasActiveSaleFilters","total_transactions","active_transactions","total_amount","paid_amount","remaining_amount","onClick","variant","size","type","placeholder","onChange","e","target","map","max","disabled","min","s","item","index","product_name","quantity","total_price","updated_at","unit_price","payments","payment","step","parseFloat","required","rows"],"sources":["/home/el-ifran/WareHouse_Manager/elif-sales-app/beverage_management_system/src/pages/PackagingManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../services/api';\nimport Button from '../components/Button';\nimport './PackagingManagement.css';\n\nconst PackagingManagement = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const [transactions, setTransactions] = useState([]);\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\n  const [sales, setSales] = useState([]);\n  const [filteredSales, setFilteredSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  const [showPaymentForm, setShowPaymentForm] = useState(false);\n  const [showSettleForm, setShowSettleForm] = useState(false);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [selectedTransaction, setSelectedTransaction] = useState(null);\n  const [transactionDetails, setTransactionDetails] = useState(null);\n  const [statistics, setStatistics] = useState({});\n  \n  // Pagination states\n  const [currentTransactionPage, setCurrentTransactionPage] = useState(1);\n  const [currentSalePage, setCurrentSalePage] = useState(1);\n  const itemsPerPage = 10;\n  \n  // Filter states\n  const [transactionFilters, setTransactionFilters] = useState({\n    search: '',\n    status: '',\n    paymentStatus: '',\n    startDate: '',\n    endDate: '',\n    transactionType: ''\n  });\n\n  const [saleFilters, setSaleFilters] = useState({\n    search: '',\n    status: '',\n    startDate: '',\n    endDate: ''\n  });\n\n  // Form data\n  const [formData, setFormData] = useState({\n    transaction_type: 'consignation',\n    sale: '',\n    customer_name: '',\n    customer_phone: '',\n    customer_email: '',\n    payment_method: 'cash',\n    status: 'active',\n    notes: '',\n    items: []\n  });\n  \n  const [paymentData, setPaymentData] = useState({\n    amount: 0,\n    payment_method: 'cash',\n    notes: ''\n  });\n\n  const [settleData, setSettleData] = useState({\n    settlement_type: 'return',\n    notes: ''\n  });\n\n  useEffect(() => {\n    fetchTransactions();\n    fetchSales();\n    fetchStatistics();\n  }, []);\n\n  useEffect(() => {\n    applyTransactionFilters();\n  }, [transactions, transactionFilters]);\n\n  useEffect(() => {\n    applySaleFilters();\n  }, [sales, saleFilters]);\n\n  const fetchTransactions = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/packaging/transactions/');\n      setTransactions(response.data.results || response.data);\n    } catch (err) {\n      setError('Failed to load packaging transactions');\n      console.error('Error fetching transactions:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchTransactionDetails = async (transactionId) => {\n    try {\n      const response = await api.get(`/api/packaging/transactions/${transactionId}/`);\n      setTransactionDetails(response.data);\n      return response.data;\n    } catch (err) {\n      setError('Failed to load transaction details');\n      console.error('Error fetching transaction details:', err);\n      return null;\n    }\n  };\n\n  const fetchSales = async () => {\n    try {\n      const response = await api.get('/api/sales/');\n      setSales(response.data.results || response.data);\n    } catch (err) {\n      console.error('Error fetching sales:', err);\n    }\n  };\n\n  const fetchStatistics = async () => {\n    try {\n      const response = await api.get('/api/packaging/statistics/');\n      setStatistics(response.data);\n    } catch (err) {\n      console.error('Error fetching statistics:', err);\n    }\n  };\n\n  // Filter functions\n  const applyTransactionFilters = () => {\n    let filtered = [...transactions];\n\n    // Search filter\n    if (transactionFilters.search) {\n      const searchLower = transactionFilters.search.toLowerCase();\n      filtered = filtered.filter(transaction =>\n        transaction.transaction_number?.toLowerCase().includes(searchLower) ||\n        transaction.customer_name?.toLowerCase().includes(searchLower) ||\n        transaction.sale_number?.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Status filter\n    if (transactionFilters.status) {\n      filtered = filtered.filter(transaction => transaction.status === transactionFilters.status);\n    }\n\n    // Payment status filter\n    if (transactionFilters.paymentStatus) {\n      filtered = filtered.filter(transaction => transaction.payment_status === transactionFilters.paymentStatus);\n    }\n\n    // Transaction type filter\n    if (transactionFilters.transactionType) {\n      filtered = filtered.filter(transaction => transaction.transaction_type === transactionFilters.transactionType);\n    }\n\n    // Date range filter\n    if (transactionFilters.startDate) {\n      filtered = filtered.filter(transaction => \n        new Date(transaction.created_at) >= new Date(transactionFilters.startDate)\n      );\n    }\n\n    if (transactionFilters.endDate) {\n      filtered = filtered.filter(transaction => \n        new Date(transaction.created_at) <= new Date(transactionFilters.endDate + 'T23:59:59')\n      );\n    }\n\n    setFilteredTransactions(filtered);\n    setCurrentTransactionPage(1); // Reset to first page when filters change\n  };\n\n  const applySaleFilters = () => {\n    let filtered = sales.filter(sale => sale.packaging_items && sale.packaging_items.length > 0);\n\n    // Search filter\n    if (saleFilters.search) {\n      const searchLower = saleFilters.search.toLowerCase();\n      filtered = filtered.filter(sale =>\n        sale.sale_number?.toLowerCase().includes(searchLower) ||\n        sale.customer_name?.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Status filter\n    if (saleFilters.status) {\n      filtered = filtered.filter(sale => sale.status === saleFilters.status);\n    }\n\n    // Date range filter\n    if (saleFilters.startDate) {\n      filtered = filtered.filter(sale => \n        new Date(sale.created_at) >= new Date(saleFilters.startDate)\n      );\n    }\n\n    if (saleFilters.endDate) {\n      filtered = filtered.filter(sale => \n        new Date(sale.created_at) <= new Date(saleFilters.endDate + 'T23:59:59')\n      );\n    }\n\n    setFilteredSales(filtered);\n    setCurrentSalePage(1); // Reset to first page when filters change\n  };\n\n  const handleTransactionFilterChange = (key, value) => {\n    setTransactionFilters(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const handleSaleFilterChange = (key, value) => {\n    setSaleFilters(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const clearTransactionFilters = () => {\n    setTransactionFilters({\n      search: '',\n      status: '',\n      paymentStatus: '',\n      startDate: '',\n      endDate: '',\n      transactionType: ''\n    });\n  };\n\n  const clearSaleFilters = () => {\n    setSaleFilters({\n      search: '',\n      status: '',\n      startDate: '',\n      endDate: ''\n    });\n  };\n\n  const handleViewDetails = async (transaction) => {\n    try {\n      setSelectedTransaction(transaction);\n      setLoading(true);\n      const details = await fetchTransactionDetails(transaction.id);\n      if (details) {\n        setTransactionDetails(details);\n        setShowDetailsModal(true);\n      }\n    } catch (err) {\n      setError('Failed to load transaction details');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Pagination calculations\n  const getCurrentTransactions = () => {\n    const startIndex = (currentTransactionPage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    return filteredTransactions.slice(startIndex, endIndex);\n  };\n\n  const getCurrentSales = () => {\n    const startIndex = (currentSalePage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    return filteredSales.slice(startIndex, endIndex);\n  };\n\n  const getTotalTransactionPages = () => {\n    return Math.ceil(filteredTransactions.length / itemsPerPage);\n  };\n\n  const getTotalSalePages = () => {\n    return Math.ceil(filteredSales.length / itemsPerPage);\n  };\n\n  const handleMakePayment = async () => {\n    try {\n      setError('');\n      setSuccess('');\n\n      if (!selectedTransaction || !paymentData.amount) {\n        setError('Please select a transaction and enter payment amount');\n        return;\n      }\n\n      await api.post(`/api/packaging/transactions/${selectedTransaction.id}/payments/`, paymentData);\n      setSuccess('Payment processed successfully');\n      setPaymentData({ amount: 0, payment_method: 'cash', notes: '' });\n      setShowPaymentForm(false);\n      setSelectedTransaction(null);\n      fetchTransactions();\n      fetchStatistics();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to process payment');\n      console.error('Error processing payment:', err);\n    }\n  };\n\n  const handleSettleTransaction = async () => {\n    try {\n      setError('');\n      setSuccess('');\n\n      if (!selectedTransaction) {\n        setError('Please select a transaction to settle');\n        return;\n      }\n\n      await api.post(`/api/packaging/transactions/${selectedTransaction.id}/settle/`, settleData);\n      setSuccess('Packaging transaction settled successfully');\n      setSettleData({ settlement_type: 'return', notes: '' });\n      setShowSettleForm(false);\n      setSelectedTransaction(null);\n      fetchTransactions();\n      fetchStatistics();\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to settle transaction');\n      console.error('Error settling transaction:', err);\n    }\n  };\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  const formatDateTime = (dateString) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  const getStatusBadge = (status) => {\n    const statusClasses = {\n      active: 'status-active',\n      completed: 'status-completed',\n      cancelled: 'status-cancelled'\n    };\n    return <span className={`status-badge ${statusClasses[status] || ''}`}>{status}</span>;\n  };\n\n  const getPaymentStatusBadge = (paymentStatus) => {\n    const paymentClasses = {\n      pending: 'payment-pending',\n      partial: 'payment-partial',\n      paid: 'payment-paid',\n      refunded: 'payment-refunded'\n    };\n    const paymentLabels = {\n      pending: 'Unpaid',\n      partial: 'Partial',\n      paid: 'Paid',\n      refunded: 'Refunded'\n    };\n    return <span className={`payment-badge ${paymentClasses[paymentStatus] || ''}`}>{paymentLabels[paymentStatus] || paymentStatus}</span>;\n  };\n\n  if (loading && !showDetailsModal) {\n    return (\n      <div className=\"packaging-management\">\n        <div className=\"loading\">Loading packaging transactions...</div>\n      </div>\n    );\n  }\n\n  const currentTransactions = getCurrentTransactions();\n  const currentSales = getCurrentSales();\n  const totalTransactionPages = getTotalTransactionPages();\n  const totalSalePages = getTotalSalePages();\n\n  const hasActiveTransactionFilters = Object.values(transactionFilters).some(value => value !== '');\n  const hasActiveSaleFilters = Object.values(saleFilters).some(value => value !== '');\n\n  return (\n    <div className=\"packaging-management\">\n      <div className=\"page-header\">\n        <h1>Packaging Management</h1>\n        <div className=\"header-actions\">\n          <div className=\"info-text\">\n            <small>Packaging transactions are automatically created when sales are completed</small>\n          </div>\n        </div>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n\n      {/* Statistics */}\n      <div className=\"statistics-grid\">\n        <div className=\"stat-card\">\n          <h3>Total Transactions</h3>\n          <p>{statistics.total_transactions || 0}</p>\n        </div>\n        <div className=\"stat-card\">\n          <h3>Active Transactions</h3>\n          <p>{statistics.active_transactions || 0}</p>\n        </div>\n        <div className=\"stat-card\">\n          <h3>Total Amount</h3>\n          <p>{formatCurrency(statistics.total_amount || 0)}</p>\n        </div>\n        <div className=\"stat-card\">\n          <h3>Paid Amount</h3>\n          <p>{formatCurrency(statistics.paid_amount || 0)}</p>\n        </div>\n        <div className=\"stat-card\">\n          <h3>Remaining Amount</h3>\n          <p>{formatCurrency(statistics.remaining_amount || 0)}</p>\n        </div>\n      </div>\n\n      {/* Transactions List */}\n      <div className=\"transactions-section\">\n        <div className=\"section-header\">\n          <h2>Packaging Transactions</h2>\n          {totalTransactionPages > 1 && (\n            <div className=\"pagination-info\">\n              Page {currentTransactionPage} of {totalTransactionPages} \n              ({filteredTransactions.length} filtered of {transactions.length} total)\n            </div>\n          )}\n        </div>\n\n        {/* Transaction Filters */}\n        <div className=\"filters-section\">\n          <div className=\"filters-header\">\n            <h3>Filters</h3>\n            {hasActiveTransactionFilters && (\n              <Button onClick={clearTransactionFilters} variant=\"text\" size=\"small\">\n                Clear All Filters\n              </Button>\n            )}\n          </div>\n          <div className=\"filters-grid\">\n            <div className=\"filter-group\">\n              <label>Search</label>\n              <input\n                type=\"text\"\n                placeholder=\"Search by transaction, customer, or sale...\"\n                value={transactionFilters.search}\n                onChange={(e) => handleTransactionFilterChange('search', e.target.value)}\n              />\n            </div>\n            <div className=\"filter-group\">\n              <label>Status</label>\n              <select\n                value={transactionFilters.status}\n                onChange={(e) => handleTransactionFilterChange('status', e.target.value)}\n              >\n                <option value=\"\">All Statuses</option>\n                <option value=\"active\">Active</option>\n                <option value=\"completed\">Completed</option>\n                <option value=\"cancelled\">Cancelled</option>\n              </select>\n            </div>\n            <div className=\"filter-group\">\n              <label>Payment Status</label>\n              <select\n                value={transactionFilters.paymentStatus}\n                onChange={(e) => handleTransactionFilterChange('paymentStatus', e.target.value)}\n              >\n                <option value=\"\">All Payment Statuses</option>\n                <option value=\"pending\">Unpaid</option>\n                <option value=\"partial\">Partial</option>\n                <option value=\"paid\">Paid</option>\n                <option value=\"refunded\">Refunded</option>\n              </select>\n            </div>\n            <div className=\"filter-group\">\n              <label>Transaction Type</label>\n              <select\n                value={transactionFilters.transactionType}\n                onChange={(e) => handleTransactionFilterChange('transactionType', e.target.value)}\n              >\n                <option value=\"\">All Types</option>\n                <option value=\"consignation\">Consignation</option>\n                <option value=\"exchange\">Exchange</option>\n              </select>\n            </div>\n            <div className=\"filter-group\">\n              <label>Start Date</label>\n              <input\n                type=\"date\"\n                value={transactionFilters.startDate}\n                onChange={(e) => handleTransactionFilterChange('startDate', e.target.value)}\n              />\n            </div>\n            <div className=\"filter-group\">\n              <label>End Date</label>\n              <input\n                type=\"date\"\n                value={transactionFilters.endDate}\n                onChange={(e) => handleTransactionFilterChange('endDate', e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n        \n        {filteredTransactions.length === 0 ? (\n          <div className=\"no-data\">\n            {transactions.length === 0 \n              ? 'No packaging transactions found' \n              : 'No transactions match your filters'}\n          </div>\n        ) : (\n          <>\n            <div className=\"transactions-list\">\n              {currentTransactions.map(transaction => (\n                <div key={transaction.id} className=\"transaction-card\">\n                  <div className=\"transaction-header\">\n                    <div className=\"transaction-info\">\n                      <h3>{transaction.transaction_number}</h3>\n                      <p>Sale: {transaction.sale_number}</p>\n                      <p>Customer: {transaction.customer_name || 'N/A'}</p>\n                    </div>\n                    <div className=\"transaction-status\">\n                      {getStatusBadge(transaction.status)}\n                      {getPaymentStatusBadge(transaction.payment_status)}\n                    </div>\n                  </div>\n                  \n                  <div className=\"transaction-details\">\n                    <div className=\"detail-row\">\n                      <span>Type:</span>\n                      <span>{transaction.transaction_type}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span>Total Amount:</span>\n                      <span>{formatCurrency(transaction.total_amount)}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span>Paid Amount:</span>\n                      <span>{formatCurrency(transaction.paid_amount)}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span>Remaining:</span>\n                      <span>{formatCurrency(transaction.remaining_amount)}</span>\n                    </div>\n                    <div className=\"detail-row\">\n                      <span>Created:</span>\n                      <span>{formatDate(transaction.created_at)}</span>\n                    </div>\n                  </div>\n\n                  <div className=\"transaction-actions\">\n                    {transaction.remaining_amount > 0 && (\n                      <Button \n                        onClick={() => {\n                          setSelectedTransaction(transaction);\n                          setPaymentData(prev => ({ ...prev, amount: transaction.remaining_amount }));\n                          setShowPaymentForm(true);\n                        }}\n                        variant=\"primary\"\n                        size=\"small\"\n                      >\n                        Make Payment\n                      </Button>\n                    )}\n                    {transaction.status === 'active' && (\n                      <Button \n                        onClick={() => {\n                          setSelectedTransaction(transaction);\n                          setSettleData({ settlement_type: 'return', notes: '' });\n                          setShowSettleForm(true);\n                        }}\n                        variant=\"success\"\n                        size=\"small\"\n                      >\n                        Settle\n                      </Button>\n                    )}\n                    <Button \n                      onClick={() => handleViewDetails(transaction)}\n                      variant=\"secondary\"\n                      size=\"small\"\n                    >\n                      View Details\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Transactions Pagination */}\n            {totalTransactionPages > 1 && (\n              <div className=\"pagination-controls\">\n                <Button \n                  onClick={() => setCurrentTransactionPage(prev => Math.max(prev - 1, 1))}\n                  disabled={currentTransactionPage === 1}\n                  variant=\"secondary\"\n                  size=\"small\"\n                >\n                  Previous\n                </Button>\n                \n                <span className=\"page-indicator\">\n                  Page {currentTransactionPage} of {totalTransactionPages}\n                </span>\n                \n                <Button \n                  onClick={() => setCurrentTransactionPage(prev => Math.min(prev + 1, totalTransactionPages))}\n                  disabled={currentTransactionPage === totalTransactionPages}\n                  variant=\"secondary\"\n                  size=\"small\"\n                >\n                  Next\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Sales with Packaging */}\n      <div className=\"sales-section\">\n        <div className=\"section-header\">\n          <h2>Sales with Packaging</h2>\n          {totalSalePages > 1 && (\n            <div className=\"pagination-info\">\n              Page {currentSalePage} of {totalSalePages}\n              ({filteredSales.length} filtered)\n            </div>\n          )}\n        </div>\n\n        {/* Sale Filters */}\n        <div className=\"filters-section\">\n          <div className=\"filters-header\">\n            <h3>Filters</h3>\n            {hasActiveSaleFilters && (\n              <Button onClick={clearSaleFilters} variant=\"text\" size=\"small\">\n                Clear All Filters\n              </Button>\n            )}\n          </div>\n          <div className=\"filters-grid\">\n            <div className=\"filter-group\">\n              <label>Search</label>\n              <input\n                type=\"text\"\n                placeholder=\"Search by sale number or customer...\"\n                value={saleFilters.search}\n                onChange={(e) => handleSaleFilterChange('search', e.target.value)}\n              />\n            </div>\n            <div className=\"filter-group\">\n              <label>Status</label>\n              <select\n                value={saleFilters.status}\n                onChange={(e) => handleSaleFilterChange('status', e.target.value)}\n              >\n                <option value=\"\">All Statuses</option>\n                <option value=\"pending\">Pending</option>\n                <option value=\"completed\">Completed</option>\n                <option value=\"cancelled\">Cancelled</option>\n              </select>\n            </div>\n            <div className=\"filter-group\">\n              <label>Start Date</label>\n              <input\n                type=\"date\"\n                value={saleFilters.startDate}\n                onChange={(e) => handleSaleFilterChange('startDate', e.target.value)}\n              />\n            </div>\n            <div className=\"filter-group\">\n              <label>End Date</label>\n              <input\n                type=\"date\"\n                value={saleFilters.endDate}\n                onChange={(e) => handleSaleFilterChange('endDate', e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n        \n        {filteredSales.length === 0 ? (\n          <div className=\"no-data\">\n            {sales.filter(s => s.packaging_items && s.packaging_items.length > 0).length === 0\n              ? 'No sales with packaging found' \n              : 'No sales match your filters'}\n          </div>\n        ) : (\n          <>\n            <div className=\"sales-list\">\n              {currentSales.map(sale => (\n                <div key={sale.id} className=\"sale-card\">\n                  <div className=\"sale-header\">\n                    <div className=\"sale-info\">\n                      <h3>{sale.sale_number}</h3>\n                      <p>Customer: {sale.customer_name || 'Walk-in Customer'}</p>\n                      <p>Date: {formatDate(sale.created_at)}</p>\n                      <p>Status: {sale.status}</p>\n                    </div>\n                  </div>\n                  \n                  <div className=\"packaging-summary\">\n                    <h4>Packaging Items ({sale.packaging_items.length})</h4>\n                    <div className=\"packaging-items\">\n                      {sale.packaging_items.map((item, index) => (\n                        <div key={index} className=\"packaging-item\">\n                          <span>{item.product_name} x {item.quantity} = {formatCurrency(item.total_price)}</span>\n                          <span className={`status-badge ${item.status}`}>{item.status}</span>\n                        </div>\n                      ))}\n                    </div>\n                    {sale.status === 'completed' && (\n                      <div className=\"auto-created-notice\">\n                        <small> Packaging transaction automatically created</small>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Sales Pagination */}\n            {totalSalePages > 1 && (\n              <div className=\"pagination-controls\">\n                <Button \n                  onClick={() => setCurrentSalePage(prev => Math.max(prev - 1, 1))}\n                  disabled={currentSalePage === 1}\n                  variant=\"secondary\"\n                  size=\"small\"\n                >\n                  Previous\n                </Button>\n                \n                <span className=\"page-indicator\">\n                  Page {currentSalePage} of {totalSalePages}\n                </span>\n                \n                <Button \n                  onClick={() => setCurrentSalePage(prev => Math.min(prev + 1, totalSalePages))}\n                  disabled={currentSalePage === totalSalePages}\n                  variant=\"secondary\"\n                  size=\"small\"\n                >\n                  Next\n                </Button>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n\n      {/* Transaction Details Modal */}\n      {showDetailsModal && selectedTransaction && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content large-modal\">\n            <div className=\"modal-header\">\n              <h2>Transaction Details - {selectedTransaction.transaction_number}</h2>\n              <button onClick={() => setShowDetailsModal(false)} className=\"close-btn\">&times;</button>\n            </div>\n            \n            <div className=\"modal-body\">\n              {loading ? (\n                <div className=\"loading\">Loading details...</div>\n              ) : transactionDetails ? (\n                <div className=\"transaction-details-content\">\n                  {/* Basic Information */}\n                  <div className=\"details-section\">\n                    <h3>Basic Information</h3>\n                    <div className=\"details-grid\">\n                      <div className=\"detail-item\">\n                        <label>Transaction Number:</label>\n                        <span>{transactionDetails.transaction_number}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Sale Number:</label>\n                        <span>{transactionDetails.sale_number}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Customer:</label>\n                        <span>{transactionDetails.customer_name || 'N/A'}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Transaction Type:</label>\n                        <span>{transactionDetails.transaction_type}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Status:</label>\n                        <span>{getStatusBadge(transactionDetails.status)}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Payment Status:</label>\n                        <span>{getPaymentStatusBadge(transactionDetails.payment_status)}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Created Date:</label>\n                        <span>{formatDateTime(transactionDetails.created_at)}</span>\n                      </div>\n                      <div className=\"detail-item\">\n                        <label>Last Updated:</label>\n                        <span>{formatDateTime(transactionDetails.updated_at)}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Financial Summary */}\n                  <div className=\"details-section\">\n                    <h3>Financial Summary</h3>\n                    <div className=\"financial-grid\">\n                      <div className=\"financial-item\">\n                        <label>Total Amount:</label>\n                        <span className=\"amount\">{formatCurrency(transactionDetails.total_amount)}</span>\n                      </div>\n                      <div className=\"financial-item\">\n                        <label>Paid Amount:</label>\n                        <span className=\"amount paid\">{formatCurrency(transactionDetails.paid_amount)}</span>\n                      </div>\n                      <div className=\"financial-item\">\n                        <label>Remaining Amount:</label>\n                        <span className=\"amount remaining\">{formatCurrency(transactionDetails.remaining_amount)}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Packaging Items */}\n                  {transactionDetails.items && transactionDetails.items.length > 0 && (\n                    <div className=\"details-section\">\n                      <h3>Packaging Items ({transactionDetails.items.length})</h3>\n                      <div className=\"items-table\">\n                        <div className=\"table-header\">\n                          <div>Product Name</div>\n                          <div>Quantity</div>\n                          <div>Unit Price</div>\n                          <div>Total Price</div>\n                          <div>Status</div>\n                        </div>\n                        <div className=\"table-body\">\n                          {transactionDetails.items.map((item, index) => (\n                            <div key={index} className=\"table-row\">\n                              <div>{item.product_name}</div>\n                              <div>{item.quantity}</div>\n                              <div>{formatCurrency(item.unit_price)}</div>\n                              <div>{formatCurrency(item.total_price)}</div>\n                              <div>\n                                <span className={`status-badge ${item.status}`}>\n                                  {item.status}\n                                </span>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Payment History */}\n                  {transactionDetails.payments && transactionDetails.payments.length > 0 && (\n                    <div className=\"details-section\">\n                      <h3>Payment History ({transactionDetails.payments.length})</h3>\n                      <div className=\"items-table\">\n                        <div className=\"table-header\">\n                          <div>Date</div>\n                          <div>Amount</div>\n                          <div>Method</div>\n                          <div>Notes</div>\n                        </div>\n                        <div className=\"table-body\">\n                          {transactionDetails.payments.map((payment, index) => (\n                            <div key={index} className=\"table-row\">\n                              <div>{formatDateTime(payment.created_at)}</div>\n                              <div>{formatCurrency(payment.amount)}</div>\n                              <div>{payment.payment_method}</div>\n                              <div>{payment.notes || '-'}</div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Notes */}\n                  {transactionDetails.notes && (\n                    <div className=\"details-section\">\n                      <h3>Notes</h3>\n                      <div className=\"notes-content\">\n                        {transactionDetails.notes}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ) : (\n                <div className=\"error-message\">Failed to load transaction details</div>\n              )}\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button onClick={() => setShowDetailsModal(false)} variant=\"secondary\">\n                Close\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Payment Modal */}\n      {showPaymentForm && selectedTransaction && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Make Payment</h2>\n              <button onClick={() => setShowPaymentForm(false)} className=\"close-btn\">&times;</button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"payment-info\">\n                <p><strong>Transaction:</strong> {selectedTransaction.transaction_number}</p>\n                <p><strong>Customer:</strong> {selectedTransaction.customer_name || 'N/A'}</p>\n                <p><strong>Total Amount:</strong> {formatCurrency(selectedTransaction.total_amount)}</p>\n                <p><strong>Paid Amount:</strong> {formatCurrency(selectedTransaction.paid_amount)}</p>\n                <p><strong>Remaining:</strong> {formatCurrency(selectedTransaction.remaining_amount)}</p>\n              </div>\n\n              <div className=\"form-group\">\n                <label>Payment Amount *</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  min=\"0.01\"\n                  max={selectedTransaction.remaining_amount}\n                  value={paymentData.amount}\n                  onChange={(e) => setPaymentData(prev => ({ ...prev, amount: parseFloat(e.target.value) }))}\n                  required\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Payment Method</label>\n                <select\n                  value={paymentData.payment_method}\n                  onChange={(e) => setPaymentData(prev => ({ ...prev, payment_method: e.target.value }))}\n                >\n                  <option value=\"cash\">Cash</option>\n                  <option value=\"card\">Card</option>\n                  <option value=\"mobile_money\">Mobile Money</option>\n                  <option value=\"bank_transfer\">Bank Transfer</option>\n                </select>\n              </div>\n\n              <div className=\"form-group\">\n                <label>Notes</label>\n                <textarea\n                  value={paymentData.notes}\n                  onChange={(e) => setPaymentData(prev => ({ ...prev, notes: e.target.value }))}\n                  rows=\"3\"\n                />\n              </div>\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button onClick={handleMakePayment} variant=\"primary\">\n                Process Payment\n              </Button>\n              <Button onClick={() => setShowPaymentForm(false)} variant=\"secondary\">\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Settlement Modal */}\n      {showSettleForm && selectedTransaction && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Settle Packaging Transaction</h2>\n              <button onClick={() => setShowSettleForm(false)} className=\"close-btn\">&times;</button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"payment-info\">\n                <p><strong>Transaction:</strong> {selectedTransaction.transaction_number}</p>\n                <p><strong>Customer:</strong> {selectedTransaction.customer_name || 'N/A'}</p>\n                <p><strong>Sale:</strong> {selectedTransaction.sale_number}</p>\n                <p><strong>Total Amount:</strong> {formatCurrency(selectedTransaction.total_amount)}</p>\n                <p><strong>Paid Amount:</strong> {formatCurrency(selectedTransaction.paid_amount)}</p>\n                <p><strong>Remaining:</strong> {formatCurrency(selectedTransaction.remaining_amount)}</p>\n              </div>\n\n              <div className=\"form-group\">\n                <label>Settlement Type *</label>\n                <select\n                  value={settleData.settlement_type}\n                  onChange={(e) => setSettleData(prev => ({ ...prev, settlement_type: e.target.value }))}\n                  required\n                >\n                  <option value=\"return\">Packaging Returned</option>\n                  <option value=\"refund\">Deposit Refunded</option>\n                </select>\n                <small>\n                  {settleData.settlement_type === 'return' \n                    ? 'Customer returned the packaging items' \n                    : 'Customer received refund for packaging deposit'}\n                </small>\n              </div>\n\n              <div className=\"form-group\">\n                <label>Notes</label>\n                <textarea\n                  value={settleData.notes}\n                  onChange={(e) => setSettleData(prev => ({ ...prev, notes: e.target.value }))}\n                  rows=\"3\"\n                  placeholder=\"Additional notes about the settlement...\"\n                />\n              </div>\n\n              <div className=\"settlement-warning\">\n                <p><strong> Warning:</strong> This action will mark the packaging transaction as completed and cannot be undone.</p>\n              </div>\n            </div>\n\n            <div className=\"modal-footer\">\n              <Button onClick={handleSettleTransaction} variant=\"success\">\n                Settle Transaction\n              </Button>\n              <Button onClick={() => setShowSettleForm(false)} variant=\"secondary\">\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PackagingManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}